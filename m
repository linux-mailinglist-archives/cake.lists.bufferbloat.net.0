Return-Path: <cake-bounces@lists.bufferbloat.net>
X-Original-To: lists+cake@lfdr.de
Delivered-To: lists+cake@lfdr.de
Received: from lists.bufferbloat.net (lists.bufferbloat.net [45.79.142.77])
	by mail.lfdr.de (Postfix) with ESMTPS id 32B2ABAE2A
	for <lists+cake@lfdr.de>; Mon, 23 Sep 2019 08:57:21 +0200 (CEST)
Received: from pitt.bufferbloat.net (localhost [IPv6:::1])
	by lists.bufferbloat.net (Postfix) with ESMTP id 0D35D3CB3B;
	Mon, 23 Sep 2019 02:57:19 -0400 (EDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
	d=lists.bufferbloat.net; s=201610; t=1569221839;
	bh=cZ07VHulIpWu8p4xOSO+sBKno0fDGL1YsMwtKEqkmK0=;
	h=To:References:From:Date:In-Reply-To:Subject:List-Id:
	 List-Unsubscribe:List-Archive:List-Post:List-Help:List-Subscribe:
	 Reply-To:Cc:From;
	b=iaQ0jtj1D5Hp7NrZMrGDWGJlN/EemuKyMvStXqZUfI3fTaB4e+cshMLoZtb89fDhF
	 YiTVrphArgbMxI6WSFOrT2A9Kd0jP6cclaOxTXGpC73OblSAiPmJb6N2zLtPgIl+rv
	 3x+crFz5u4UIj/tct93sYgxAYx6oax5ZbGrtFwJzdx5ov+s1rF9AYiK8MJqM5NXkfq
	 mh7pfXvZ8vReDGvq6FKEnSrPnSSOYsEyFW3mWCuL9sM0PQ9t2Xv+fgT10MCyL9bOxR
	 f/IobEeFlOxCrPjWOBUPcDCAsGnFAGNx3gJV5mcrnF9r1dvZ/kCLtTaTOHhzCKS+1O
	 u1BbkTm4hjuww==
X-Original-To: cake@lists.bufferbloat.net
Delivered-To: cake@lists.bufferbloat.net
Received: from web.heavenlysanctuary.com (web.heavenlysanctuary.com
 [74.80.207.230])
 (using TLSv1.2 with cipher ADH-AES256-GCM-SHA384 (256/256 bits))
 (No client certificate requested)
 by lists.bufferbloat.net (Postfix) with ESMTPS id DD0D73B2A4
 for <cake@lists.bufferbloat.net>; Mon, 23 Sep 2019 02:57:17 -0400 (EDT)
Received: from [192.168.10.101] (unknown [47.145.169.78])
 (using TLSv1.3 with cipher TLS_AES_128_GCM_SHA256 (128/128 bits)
 key-exchange X25519 server-signature RSA-PSS (2048 bits) server-digest SHA256)
 (No client certificate requested)
 by web.heavenlysanctuary.com (Postfix) with ESMTPSA id 63E9321E00A2;
 Sun, 22 Sep 2019 23:57:16 -0700 (PDT)
To: Jonathan Morton <chromatix99@gmail.com>
References: <e3d4558a-1d56-a77c-5336-51bb3e6427ea@heavenlysanctuary.com>
 <F35FA667-3AE9-487E-9747-2EFCB6627556@gmail.com>
From: Marco Belmonte <marco@heavenlysanctuary.com>
Message-ID: <e3b4ea05-1fd4-bffb-31f4-44eb58a5114c@heavenlysanctuary.com>
Date: Sun, 22 Sep 2019 23:57:19 -0700
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:70.0) Gecko/20100101
 Thunderbird/70.0
MIME-Version: 1.0
In-Reply-To: <F35FA667-3AE9-487E-9747-2EFCB6627556@gmail.com>
Content-Language: en-US
X-Spam-Status: No, score=-1.0 required=3.0 tests=ALL_TRUSTED, NO_DNS_FOR_FROM, 
 SHORTCIRCUIT shortcircuit=ham autolearn=disabled version=3.4.2
X-Spam-Checker-Version: SpamAssassin 3.4.2 (2018-09-13) on
 web.heavenlysanctuary.com
Subject: Re: [Cake] Frontier FIOS Framing
X-BeenThere: cake@lists.bufferbloat.net
X-Mailman-Version: 2.1.20
Precedence: list
List-Id: Cake - FQ_codel the next generation <cake.lists.bufferbloat.net>
List-Unsubscribe: <https://lists.bufferbloat.net/options/cake>,
 <mailto:cake-request@lists.bufferbloat.net?subject=unsubscribe>
List-Archive: <https://lists.bufferbloat.net/pipermail/cake>
List-Post: <mailto:cake@lists.bufferbloat.net>
List-Help: <mailto:cake-request@lists.bufferbloat.net?subject=help>
List-Subscribe: <https://lists.bufferbloat.net/listinfo/cake>,
 <mailto:cake-request@lists.bufferbloat.net?subject=subscribe>
Reply-To: marco@heavenlysanctuary.com
Cc: cake@lists.bufferbloat.net
Content-Type: multipart/mixed; boundary="===============5427086712957501300=="
Errors-To: cake-bounces@lists.bufferbloat.net
Sender: "Cake" <cake-bounces@lists.bufferbloat.net>

--===============5427086712957501300==
Content-Type: text/html; charset=utf-8
Content-Language: en-US
Content-Transfer-Encoding: 7bit

<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>
  <body>
    <p>Thank you, Jonathan - I will add the ethernet keyword and run
      some tests to get a more precise reading of exactly what 1% should
      be in both directions and also play with the "dual-*host" settings
      and post back my findings or more than likely a few more questions
      :-)</p>
    <p>Marco<br>
    </p>
    <div class="moz-cite-prefix">On 9/22/2019 9:26 PM, Jonathan Morton
      wrote:<br>
    </div>
    <blockquote type="cite"
      cite="mid:F35FA667-3AE9-487E-9747-2EFCB6627556@gmail.com">
      <blockquote type="cite">
        <pre class="moz-quote-pre" wrap="">I have searched every nook and cranny of the bloated internet looking for any information I can find on whether Frontier/Verizon FIOS (assuming the only difference between the service offered by both Frontier and Verizon is in name only) requires any special framing parameters passed on to sch_cake's overhead settings. Most mentions of cake/fq/scm/etc and FIOS are ether very dated and inconclusive or I find messages and forum posts asking questions a lot like this one.
</pre>
      </blockquote>
      <pre class="moz-quote-pre" wrap="">
I don't know precisely what framing FIOS uses.  However, most provisioning shapers used by cable/fibre ISPs operate on Ethernet frames, so if you use the "ethernet" keyword you should match what the shaper is doing.  The proof of the pudding is in the eating, of course.

</pre>
      <blockquote type="cite">
        <pre class="moz-quote-pre" wrap="">Currently this is what I have and am also curious if I should be using the "nat" keyword for both ingress and egress? I'm not entirely sure - see below:
</pre>
      </blockquote>
      <pre class="moz-quote-pre" wrap="">
If your box is doing NAT *and* you are using a flow-mode that depends on accurate internal host information, then you should have the "nat" keyboard on in both directions.  Otherwise it's more efficient to switch it off, though leaving it on does no harm otherwise.

The default flow-mode is "triple-isolate", which does use internal host information.  So do the "dual-srchost" and "dual-dsthost" modes, which are more precise but need you to specify which direction the traffic is flowing.  The "besteffort" and "flows" modes do not, but you should only use those if you're deliberately experimenting with something.

</pre>
      <blockquote type="cite">
        <pre class="moz-quote-pre" wrap="">In absence of framing compensation I figured I should just go extreme by reserving more bandwidth than the qdisc needs because I also read somewhere I think that mentioned that if you don't compensate and are incorrect everything stops working as opposed to if you over compensate you might lose out on bandwidth but you'll still win in the latency department.
</pre>
      </blockquote>
      <pre class="moz-quote-pre" wrap="">
That's approximately correct, close enough for actual practice.  It's also why we included the "conservative" keyword, which applies the maximum amount of framing compensation that is ever likely to be seen in the wild - much more than you'd expect to see on a cable/fibre link, but only slightly more than on most ADSL lines.

The overhead compensation matters more with small packets than with the larger ones used for bulk transfers; for the latter, reserving a little more bandwidth will appear to make everything work.  For fibre I would try "ethernet" and reserve about 1% bandwidth each way, then if possible test to see whether there is any bloat.

 - Jonathan Morton</pre>
    </blockquote>
  </body>
</html>

--===============5427086712957501300==
Content-Type: text/plain; charset="utf-8"
MIME-Version: 1.0
Content-Transfer-Encoding: base64
Content-Disposition: inline

X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KQ2FrZSBtYWls
aW5nIGxpc3QKQ2FrZUBsaXN0cy5idWZmZXJibG9hdC5uZXQKaHR0cHM6Ly9saXN0cy5idWZmZXJi
bG9hdC5uZXQvbGlzdGluZm8vY2FrZQo=

--===============5427086712957501300==--

Return-Path: <cake-bounces@lists.bufferbloat.net>
X-Original-To: lists+cake@lfdr.de
Delivered-To: lists+cake@lfdr.de
Received: from lists.bufferbloat.net (lists.bufferbloat.net [IPv6:2600:3c03:e000:3ca:f00f:f00f:b33b:b33b])
	by mail.lfdr.de (Postfix) with ESMTPS id C6D403C3680
	for <lists+cake@lfdr.de>; Sat, 10 Jul 2021 21:43:50 +0200 (CEST)
Received: from pitt.bufferbloat.net (localhost [127.0.0.1])
	by lists.bufferbloat.net (Postfix) with ESMTP id 0C82A3CBC7;
	Sat, 10 Jul 2021 15:43:43 -0400 (EDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
	d=lists.bufferbloat.net; s=201610; t=1625946223;
	bh=askbXSCNW9WtgE0Ptqg5uHt/cPJWmlAQAJATdOZsaSQ=;
	h=References:In-Reply-To:From:Date:To:Subject:List-Id:
	 List-Unsubscribe:List-Archive:List-Post:List-Help:List-Subscribe:
	 Cc:From;
	b=F/VdlXJvN9SrGH0HVjVlsJ5h+990FPsPiz0f5TSs7MfzgR0TJJwdafazhTd00hoQ0
	 HAT2WWSqSAkCnQ+QR05voo7SuxeKAzIH94+EcZFyp5beA7/jPNHA7gY1s4bWgXmB+H
	 ePHOBvlHPkZagFEAg66v0IhSPm51/5f/BSSlTOjc37Y6vr6HrcYsGFFZ+glinYKzvg
	 XomDzsdRPOKae/kvCsUByeUsfiJbQB1P8w+1uVau+Vnyk53hjD+S579hCdHkmiJ1WO
	 G/zuQW8QcCLqgXQ+9j1C0zvGJOzh/oNf2d5vLlD7kJBU8b6TmKuJT+Lo7J7eQSOB9u
	 WjFd/Isj/3Hxw==
X-Original-To: cake@lists.bufferbloat.net
Delivered-To: cake@lists.bufferbloat.net
Received: from mail-il1-x136.google.com (mail-il1-x136.google.com
 [IPv6:2607:f8b0:4864:20::136])
 (using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))
 (No client certificate requested)
 by lists.bufferbloat.net (Postfix) with ESMTPS id 870AC3B29E;
 Sat, 10 Jul 2021 15:43:41 -0400 (EDT)
Received: by mail-il1-x136.google.com with SMTP id b6so5023880iln.12;
 Sat, 10 Jul 2021 12:43:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=Uw0kl/XhqHJ6ZjRz/VBLGdf++JxLZBdNgAeywh3pDPY=;
 b=Oo+m5CQwrHqwCWTyJcKysn+Y8mcZ1a5EIraawcXmMCyuyDC88TZGUerQkFZkixN6OV
 7DRgKc3Evx+U5lyJIKqiAdn6O1ue27ksf+q4cju2v+fC1GlDvHmdquK96hWeYO8df4Ug
 I6JJWfSj7EO9OfK+fcZqcnq/bJ6dwqmEDpY8+JqZ1OX8QLIi1JTFnC40nkMG2ZY3bjVW
 tcNa4dY9nRe1Pht+FPUSImcfhFmI7EYtw3BtAJm2L0fLew9ilYzFGOH1JMe7rPLioHr1
 WJUZXtaeSyZUXT5tn6g0U+B+XDcQG88r8rWf4kee9+s8WSCkLrhFTfl2nOU/B+jgwPwN
 NoHQ==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=Uw0kl/XhqHJ6ZjRz/VBLGdf++JxLZBdNgAeywh3pDPY=;
 b=L7A83TphCBXGYN1iID6KXIqGFgkLIOMaf7lBeQNmyyRtPTWcXac8X29LPWk+IWi4tQ
 1aD/trRLM1xUx5g8GHGxMn39NZI3kUMXJkszcqEEa8W0cq6EAKImzkw8gCCgXkttjq3L
 RUVF5WyTFYe2AXps5XX2S8Z45LP5ET0cfAzFnGg3rI6CryMG+dOmf46mdZmXAGfW1sL5
 xaA+9M9moxxn4qgoqGlsX/4E3FXo3zsMno+pbj8CnPYM/XzGDB5AHis0QHhCWj/6R/He
 sqkw+WVQUIJ+uFXhNBBNjL5JZbrOr1y2QNmrtLBQq6qRGrKiJQRH81HvJJ1hW6eXbRt/
 83xA==
X-Gm-Message-State: AOAM533lV0SX1PZxMXrkXKH2upyDfmr0zOWkBqs1189b9qCgky/r+faw
 +kYdW3j3WBZ1qLSbWeLcOP0EWsAKd4eiQiQukjA=
X-Google-Smtp-Source: ABdhPJydeq4pHpIF7Z1KHhRcObGz9zezj7KqtNdZ7AI35fCfg6rmxkjv8w1ga3CYM/ywyjgwm4Cfj1ebTtSXYq6X+4M=
X-Received: by 2002:a92:d346:: with SMTP id a6mr4584829ilh.249.1625946220677; 
 Sat, 10 Jul 2021 12:43:40 -0700 (PDT)
MIME-Version: 1.0
References: <1625910047-56840-1-git-send-email-shenjian15@huawei.com>
 <CAA93jw4oWpoWkRk+YrzLfWX+0PpMHMJmALup6BLBczwLrjn-hA@mail.gmail.com>
 <CAOZyJouL=pM+GTTQ3AfEiwE6j5Jt3DFLMJYjasnJLBUszTd=tA@mail.gmail.com>
In-Reply-To: <CAOZyJouL=pM+GTTQ3AfEiwE6j5Jt3DFLMJYjasnJLBUszTd=tA@mail.gmail.com>
From: Dave Taht <dave.taht@gmail.com>
Date: Sat, 10 Jul 2021 12:43:28 -0700
Message-ID: <CAA93jw7MBjijx0MiWPkmRttEELWsNjCdcHwkjPduto6+F4G24w@mail.gmail.com>
To: =?UTF-8?Q?Robert_Chac=C3=B3n?= <robert.chacon@jackrabbitwireless.com>
Subject: Re: [Cake] Fwd: [RFC net-next] net: extend netdev features
X-BeenThere: cake@lists.bufferbloat.net
X-Mailman-Version: 2.1.20
Precedence: list
List-Id: Cake - FQ_codel the next generation <cake.lists.bufferbloat.net>
List-Unsubscribe: <https://lists.bufferbloat.net/options/cake>,
 <mailto:cake-request@lists.bufferbloat.net?subject=unsubscribe>
List-Archive: <https://lists.bufferbloat.net/pipermail/cake>
List-Post: <mailto:cake@lists.bufferbloat.net>
List-Help: <mailto:cake-request@lists.bufferbloat.net?subject=help>
List-Subscribe: <https://lists.bufferbloat.net/listinfo/cake>,
 <mailto:cake-request@lists.bufferbloat.net?subject=subscribe>
Cc: Cake List <cake@lists.bufferbloat.net>,
 cerowrt-devel <cerowrt-devel@lists.bufferbloat.net>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: cake-bounces@lists.bufferbloat.net
Sender: "Cake" <cake-bounces@lists.bufferbloat.net>

Y2FuIEkgZW5jb3VyYWdlIHlvdSB0byB0cnkgY2FrZSB3aXRoIGl0J3MgaW50ZWdyYWwgc2hhcGVy
IGluc3RlYWQgb2YgaHRiPwoKb3IgaHRiICsgY2FrZSBkaWZmc2VydjQgYWNrLWZpbHRlcj8gKEkn
dmUgc2V0dGxlZCBvbiB0aGF0IHRvIG9wdGltaXplCmV2ZW4gYmV0dGVyIGZvciBtYXJrZWQgdmlk
ZW9jb25mZXJlbmNpbmcgdHJhZmZpYy4KZmFjZXRpbWUsIGluIHBhcnRpY3VsYXIsIGRvZXMgbm90
IGhhbmRsZSBsb3NzIHdlbGwpCgoKT24gU2F0LCBKdWwgMTAsIDIwMjEgYXQgMTA6MDAgQU0gUm9i
ZXJ0IENoYWPDs24KPHJvYmVydC5jaGFjb25AamFja3JhYmJpdHdpcmVsZXNzLmNvbT4gd3JvdGU6
Cj4KPiBJIGhhdmUgYSBxdWVzdGlvbiByZWdhcmRpbmcgdGhpcywgYW5kIHRoZSBjdXJyZW50IG1h
eGltdW0gbnVtYmVyIG9mIGh0YiBsZWFmIGNsYXNzZXMgYW5kL29yIHFkaXNjcyBwZXIgaW50ZXJm
YWNlLgo+IEkgcmVjZW50bHkgaW50ZWdyYXRlZCBKZXNwZXIncyB4ZHAtY3B1bWFwLXRjIGNvZGUg
aW50byBMaWJyZVFvUywgd2hpY2ggaW5jcmVhc2VkIHRocm91Z2hwdXQgdG8gMTBHYnBzIG9uIHRl
c3RzLgo+IEkgc3VzcGVjdCBzb21ld2hlcmUgYmV0d2VlbiAxMEdicHMgYW5kIDQwR2JwcyB0aHJv
dWdocHV0IGlzIG5vdyBwb3NzaWJsZSBpZiB5b3UgdGhyb3cgZW5vdWdoIGNvcmVzIGF0IGl0LiBB
c2tpbmcgb3VyIGxvY2FsIHVuaXZlcnNpdHkgdG8gaGVscCB1cyB0ZXN0IHRoaXMuCj4gWGRwLWNw
dW1hcC10YyB1c2VzIHhkcCdzIGNwdW1hcC1yZWRpcmVjdCBmZWF0dXJlIHRvIGZpbHRlciBwYWNr
ZXRzIGludG8gdGhlIGFwcHJvcHJpYXRlIENQVSAvIHF1ZXVlIHVzaW5nIGVCUEYgaGFzaCBtYXBz
LCByYXRoZXIgdGhhbiBsaW51eCB0YyBmaWx0ZXJzIC8gdTMyLgo+Cj4gUXVlc3Rpb24pIFNpbmNl
IExpYnJlUW9TIHdvdWxkIG5vdCBkZXBlbmQgb24gdGMgZmlsdGVycywgd291bGQgdGhlIGN1cnJl
bnQgMzItYml0IG9yIDY0LWJpdCBmZWF0dXJlIGxpbWl0IGltcG9zZSBhIHByYWN0aWNhbCBjbGll
bnQgbGltaXQgb24gTGlicmVRb1M/Cj4gVGhlIGF2ZXJhZ2UgdXNlcidzIHRocm91Z2hwdXQgaXMg
YXJvdW5kIDMuNU1icHMgYXQgcGVhayBob3Vycywgc28gSSdtIHRoaW5raW5nIH41ODAwIHFkaXNj
cyBhbmQgfjU4MDAgaHRiIGxlYWYgY2xhc3NlcyB3b3VsZCBiZSByZXF1aXJlZCBmb3IgZWFjaCBp
bnRlcmZhY2UgYXQgMjBHYnBzIHRocm91Z2hwdXQgZm9yIGV4YW1wbGUuCj4gVGhlcmUgbWF5IGJl
IHNvbWUgbW9yZSBpbW1lZGlhdGUgbGltaXRhdGlvbnMgSSdtIG5vdCB1bmRlcnN0YW5kaW5nLiBK
dXN0IGN1cmlvdXMgYWJvdXQgdGhlIHByYWN0aWNhbCBsaW1pdGF0aW9ucyB0aGVyZS4KPgo+IFRo
YW5rcyEKPiBSb2JlcnQKPgo+IE9uIFNhdCwgSnVsIDEwLCAyMDIxIGF0IDk6MzMgQU0gRGF2ZSBU
YWh0IDxkYXZlLnRhaHRAZ21haWwuY29tPiB3cm90ZToKPiA+Cj4gPiBPbmUgdGhpbmcgc29tZXdo
YXQgcmVsYXRlZCB0byB0aGlzIHdhcyBmaW5hbGx5IGV4cGFuZGluZyB0aGUgc3BhY2UKPiA+IGF2
YWlsYWJsZSBmb3IgdGhlIHRjIGFuZCBpcHRhYmxlcyBmdW5jdGlvbmFsaXR5IGZvcgo+ID4gdGhp
bmdzIGxpa2UgaGFzaGluZyBhbmQgYWN0aW9ucyBldGMgZnJvbSAxNiBiaXRzIHRvIDMyLiBUaGF0
IGlzCj4gPiBzb21ldGhpbmcgb2YgYSBmb3JrIGxpZnQgdXBncmFkZSwgYnV0Li4uIDY0ayBxdWV1
ZXMgaXMgbm90Cj4gPiBlbm91Z2ggaW4gc29tZSBjYXNlcywgbm9yIGlzIDY0ayBwb3NzaWJsZSB1
c2VycyBpbiBsaWJyZXFvcy4gdGhvdWdodHMKPiA+Cj4gPiAtLS0tLS0tLS0tIEZvcndhcmRlZCBt
ZXNzYWdlIC0tLS0tLS0tLQo+ID4gRnJvbTogSmlhbiBTaGVuIDxzaGVuamlhbjE1QGh1YXdlaS5j
b20+Cj4gPiBEYXRlOiBTYXQsIEp1bCAxMCwgMjAyMSBhdCAyOjQ3IEFNCj4gPiBTdWJqZWN0OiBb
UkZDIG5ldC1uZXh0XSBuZXQ6IGV4dGVuZCBuZXRkZXYgZmVhdHVyZXMKPiA+IFRvOiA8ZGF2ZW1A
ZGF2ZW1sb2Z0Lm5ldD4sIDxrdWJhQGtlcm5lbC5vcmc+Cj4gPiBDYzogPG5ldGRldkB2Z2VyLmtl
cm5lbC5vcmc+LCA8bGludXhhcm1Ab3BlbmV1bGVyLm9yZz4KPiA+Cj4gPgo+ID4gRm9yIHRoZSBw
cm90b3R5cGUgb2YgbmV0ZGV2X2ZlYXR1cmVzX3QgaXMgdTY0LCBhbmQgdGhlIG51bWJlcgo+ID4g
b2YgbmV0ZGV2aWNlIGZlYXR1cmUgYml0cyBpcyA2NCBub3cuIFNvIHRoZXJlIGlzIG5vIHNwYWNl
IHRvCj4gPiBpbnRyb2R1Y2UgbmV3IGZlYXR1cmUgYml0Lgo+ID4KPiA+IEkgZGlkIGEgc21hbGwg
Y2hhbmdlIGZvciB0aGlzLiBLZWVwIHRoZSBwcm90b3R5cGUgb2YKPiA+IG5ldGRldl9mZWF0dXJl
X3QsIGFuZCBleHRlbmQgdGhlIGZlYXR1cmUgbWVtYmVycyBpbiBzdHJ1Y3QKPiA+IG5ldF9kZXZp
Y2UgdG8gYW4gYXJyYXkgb2YgbmV0ZGV2X2ZlYXR1cmVzX3QuIFNvIG1vcmUgZmVhdHVyZXMKPiA+
IGJpdHMgY2FuIGJlIHVzZWQuCj4gPgo+ID4gQXMgdGhpcyBjaGFuZ2UsIHNvbWUgZnVuY3Rpb25z
IHdoaWNoIHVzZSBuZXRkZXZfZmVhdHVyZXNfdCBhcwo+ID4gcGFyYW1ldGVyIG9yIHJldHVyZW4g
dmFsdWUgd2lsbCBiZSBhZmZlY3RlZC4KPiA+IEkgZGlkIGJlbG93IGNoYW5nZXM6Cj4gPiBhLiBw
YXJhbWV0ZXI6ICJuZXRkZXZfZmVhdHVyZXNfdCIgdG8gIm5ldGRldl9mZWF0dXJlc190ICoiCj4g
PiBiLiByZXR1cm4gdmFsdWU6ICJuZXRkZXZfZmVhdHVyZV90IiB0byAidm9pZCIsIGFuZCBhZGQK
PiA+ICJuZXRkZXZfZmVhdHVyZV90ICoiIGFzIG91dHB1dCBwYXJhbWV0ZXIuCj4gPgo+ID4gSSBr
ZXB0IHNvbWUgZnVuY3Rpb25zIG5vIGNoYW5nZSwgd2hpY2ggYXJlIHN1cmVseSB1c2VpbmcgdGhl
Cj4gPiBmaXJzdCA2NCBiaXQgb2YgbmV0IGRldmljZSBmZWF0dXJlcyBub3csIHN1Y2ggYXMgZnVu
Y3Rpb24KPiA+IG5lZGV2X2FkZF90c29fZmVhdHVyZXMoKS4gSW4gb3JkZXIgdG8gbWluaW1pemUg
dG8gY2hhbmdlcy4KPiA+Cj4gPiBGb3IgdGhlIGZlYXR1cmVzIGFyZSBhcnJheSBub3csIHNvIGl0
J3MgdW5hYmxlIHRvIGRvIGxvZ2ljYWwKPiA+IG9wZXJhdGlvbiBkaXJlY3RseS4gSSBpbnRyb2R1
Y2UgYSBpbmxpbmUgZnVuY3Rpb24gc2V0IGZvcgo+ID4gdGhlbSwgaW5jbHVkaW5nICJuZXRkZXZf
ZmVhdHVyZXNfYW5kL2FuZG5vdC9vci94b3IvZXF1YWwvZW1wdHkiLgo+ID4KPiA+IEZvciBORVRE
RVZfRkVBVFVSRV9DT1VOVCBtYXkgYmUgbW9yZSB0aGFuIDY0LCBzbyB0aGUgc2hpZnQKPiA+IG9w
ZXJhdGlvbiBmb3IgTkVUREVWX0ZFQVRVUkVfQ09VTlQgaXMgaWxsZWdhbC4gSSBjaGFuZ2VkIHNv
bWUKPiA+IG1hY3JvZXMgYW5kIGZ1bmN0aW9ucywgd2hpY2ggZG9lcyBzaGlmdCBvcGVydGlvbiB3
aXRoIGl0Lgo+ID4KPiA+IEkgaGF2ZW4ndCBmaW5pc2hlZCBhbGwgdGhlIGNoYW5nZXMsIGZvciBp
dCBhZmZlY3RlZCBhbGwgdGhlCj4gPiBkcml2ZXJzIHdoaWNoIHVzZSB0aGUgZmVhdHVyZSwgbmVl
ZCBtb3JlIHRpbWUgYW5kIHRlc3QuIEkKPiA+IHNlbnQgdGhpcyBSRkMgcGF0Y2gsIHdhbnQgdG8g
a25vdyB3aGV0aGVyIHRoaXMgY2hhbmdlIGlzCj4gPiBhY2NlcHRhYmxlLCBhbmQgaG93IHRvIGlt
cHJvdmUgaXQuCj4gPgo+ID4gQW55IGNvbW1lbnRzIHdpbGwgYmUgaGVscGZ1bC4KPiA+Cj4gPiBT
aWduZWQtb2ZmLWJ5OiBKaWFuIFNoZW4gPHNoZW5qaWFuMTVAaHVhd2VpLmNvbT4KPiA+IC0tLQo+
ID4gIGRyaXZlcnMvbmV0L2V0aGVybmV0L2hpc2lsaWNvbi9obnMvaG5zX2VuZXQuYyAgIHwgIDM0
ICstLQo+ID4gIGRyaXZlcnMvbmV0L2V0aGVybmV0L2hpc2lsaWNvbi9obnMzL2huczNfZW5ldC5j
IHwgIDk3ICsrKystLS0tLQo+ID4gIGRyaXZlcnMvbmV0L2V0aGVybmV0L2h1YXdlaS9oaW5pYy9o
aW5pY19tYWluLmMgIHwgIDcxICsrKy0tLQo+ID4gIGRyaXZlcnMvbmV0L2V0aGVybmV0L2h1YXdl
aS9oaW5pYy9oaW5pY19yeC5jICAgIHwgICA0ICstCj4gPiAgaW5jbHVkZS9saW51eC9pZl92bGFu
LmggICAgICAgICAgICAgICAgICAgICAgICAgfCAgIDIgKy0KPiA+ICBpbmNsdWRlL2xpbnV4L25l
dGRldl9mZWF0dXJlcy5oICAgICAgICAgICAgICAgICB8IDEwNSArKysrKysrKy0KPiA+ICBpbmNs
dWRlL2xpbnV4L25ldGRldmljZS5oICAgICAgICAgICAgICAgICAgICAgICB8ICAzMSArLS0KPiA+
ICBuZXQvODAyMXEvdmxhbi5jICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgNCAr
LQo+ID4gIG5ldC84MDIxcS92bGFuLmggICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwg
ICAyICstCj4gPiAgbmV0LzgwMjFxL3ZsYW5fZGV2LmMgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgfCAgNDkgKysrLS0KPiA+ICBuZXQvY29yZS9kZXYuYyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICB8IDI3NiArKysrKysrKysrKystLS0tLS0tLS0tLS0KPiA+ICBuZXQvY29yZS9u
ZXRwb2xsLmMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgNiArLQo+ID4gIG5ldC9l
dGh0b29sL2ZlYXR1cmVzLmMgICAgICAgICAgICAgICAgICAgICAgICAgIHwgIDU2ICsrKy0tCj4g
PiAgbmV0L2V0aHRvb2wvaW9jdGwuYyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgOTMg
KysrKystLS0KPiA+ICAxNCBmaWxlcyBjaGFuZ2VkLCA0OTMgaW5zZXJ0aW9ucygrKSwgMzM3IGRl
bGV0aW9ucygtKQo+ID4KPiA+IGRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9oaXNp
bGljb24vaG5zL2huc19lbmV0LmMKPiA+IGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvaGlzaWxpY29u
L2hucy9obnNfZW5ldC5jCj4gPiBpbmRleCBhZDUzNGY5Li40ZjI0NWNmIDEwMDY0NAo+ID4gLS0t
IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvaGlzaWxpY29uL2hucy9obnNfZW5ldC5jCj4gPiArKysg
Yi9kcml2ZXJzL25ldC9ldGhlcm5ldC9oaXNpbGljb24vaG5zL2huc19lbmV0LmMKPiA+IEBAIC00
NzksNyArNDc5LDcgQEAgc3RhdGljIHZvaWQgaG5zX25pY19yeF9jaGVja3N1bShzdHJ1Y3QKPiA+
IGhuc19uaWNfcmluZ19kYXRhICpyaW5nX2RhdGEsCj4gPiAgICAgICAgIHUzMiBsNGlkOwo+ID4K
PiA+ICAgICAgICAgLyogY2hlY2sgaWYgUlggY2hlY2tzdW0gb2ZmbG9hZCBpcyBlbmFibGVkICov
Cj4gPiAtICAgICAgIGlmICh1bmxpa2VseSghKG5ldGRldi0+ZmVhdHVyZXMgJiBORVRJRl9GX1JY
Q1NVTSkpKQo+ID4gKyAgICAgICBpZiAodW5saWtlbHkoIShuZXRkZXYtPmZlYXR1cmVzWzBdICYg
TkVUSUZfRl9SWENTVU0pKSkKPiA+ICAgICAgICAgICAgICAgICByZXR1cm47Cj4gPgo+ID4gICAg
ICAgICAvKiBJbiBoYXJkd2FyZSwgd2Ugb25seSBzdXBwb3J0IGNoZWNrc3VtIGZvciB0aGUgZm9s
bG93aW5nIHByb3RvY29sczoKPiA+IEBAIC0xNzY4LDE3ICsxNzY4LDE3IEBAIHN0YXRpYyBpbnQg
aG5zX25pY19jaGFuZ2VfbXR1KHN0cnVjdAo+ID4gbmV0X2RldmljZSAqbmRldiwgaW50IG5ld19t
dHUpCj4gPiAgfQo+ID4KPiA+ICBzdGF0aWMgaW50IGhuc19uaWNfc2V0X2ZlYXR1cmVzKHN0cnVj
dCBuZXRfZGV2aWNlICpuZXRkZXYsCj4gPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IG5ldGRldl9mZWF0dXJlc190IGZlYXR1cmVzKQo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBuZXRkZXZfZmVhdHVyZXNfdCAqZmVhdHVyZXMpCj4gPiAgewo+ID4gICAgICAgICBz
dHJ1Y3QgaG5zX25pY19wcml2ICpwcml2ID0gbmV0ZGV2X3ByaXYobmV0ZGV2KTsKPiA+Cj4gPiAg
ICAgICAgIHN3aXRjaCAocHJpdi0+ZW5ldF92ZXIpIHsKPiA+ICAgICAgICAgY2FzZSBBRV9WRVJT
SU9OXzE6Cj4gPiAtICAgICAgICAgICAgICAgaWYgKGZlYXR1cmVzICYgKE5FVElGX0ZfVFNPIHwg
TkVUSUZfRl9UU082KSkKPiA+ICsgICAgICAgICAgICAgICBpZiAoZmVhdHVyZXNbMF0gJiAoTkVU
SUZfRl9UU08gfCBORVRJRl9GX1RTTzYpKQo+ID4gICAgICAgICAgICAgICAgICAgICAgICAgbmV0
ZGV2X2luZm8obmV0ZGV2LCAiZW5ldCB2MSBkbyBub3Qgc3VwcG9ydCB0c28hXG4iKTsKPiA+ICAg
ICAgICAgICAgICAgICBicmVhazsKPiA+ICAgICAgICAgZGVmYXVsdDoKPiA+IC0gICAgICAgICAg
ICAgICBpZiAoZmVhdHVyZXMgJiAoTkVUSUZfRl9UU08gfCBORVRJRl9GX1RTTzYpKSB7Cj4gPiAr
ICAgICAgICAgICAgICAgaWYgKGZlYXR1cmVzWzBdICYgKE5FVElGX0ZfVFNPIHwgTkVUSUZfRl9U
U082KSkgewo+ID4gICAgICAgICAgICAgICAgICAgICAgICAgcHJpdi0+b3BzLmZpbGxfZGVzYyA9
IGZpbGxfdHNvX2Rlc2M7Cj4gPiAgICAgICAgICAgICAgICAgICAgICAgICBwcml2LT5vcHMubWF5
YmVfc3RvcF90eCA9IGhuc19uaWNfbWF5YmVfc3RvcF90c287Cj4gPiAgICAgICAgICAgICAgICAg
ICAgICAgICAvKiBUaGUgY2hpcCBvbmx5IHN1cHBvcnQgNyo0MDk2ICovCj4gPiBAQCAtMTc4OSwy
NCArMTc4OSwyMyBAQCBzdGF0aWMgaW50IGhuc19uaWNfc2V0X2ZlYXR1cmVzKHN0cnVjdAo+ID4g
bmV0X2RldmljZSAqbmV0ZGV2LAo+ID4gICAgICAgICAgICAgICAgIH0KPiA+ICAgICAgICAgICAg
ICAgICBicmVhazsKPiA+ICAgICAgICAgfQo+ID4gLSAgICAgICBuZXRkZXYtPmZlYXR1cmVzID0g
ZmVhdHVyZXM7Cj4gPiArICAgICAgIG5ldGRldi0+ZmVhdHVyZXNbMF0gPSBmZWF0dXJlc1swXTsK
PiA+ICAgICAgICAgcmV0dXJuIDA7Cj4gPiAgfQo+ID4KPiA+IC1zdGF0aWMgbmV0ZGV2X2ZlYXR1
cmVzX3QgaG5zX25pY19maXhfZmVhdHVyZXMoCj4gPiAtICAgICAgICAgICAgICAgc3RydWN0IG5l
dF9kZXZpY2UgKm5ldGRldiwgbmV0ZGV2X2ZlYXR1cmVzX3QgZmVhdHVyZXMpCj4gPiArc3RhdGlj
IHZvaWQgaG5zX25pY19maXhfZmVhdHVyZXMoc3RydWN0IG5ldF9kZXZpY2UgKm5ldGRldiwKPiA+
ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldGRldl9mZWF0dXJlc190ICpmZWF0
dXJlcykKPiA+ICB7Cj4gPiAgICAgICAgIHN0cnVjdCBobnNfbmljX3ByaXYgKnByaXYgPSBuZXRk
ZXZfcHJpdihuZXRkZXYpOwo+ID4KPiA+ICAgICAgICAgc3dpdGNoIChwcml2LT5lbmV0X3Zlcikg
ewo+ID4gICAgICAgICBjYXNlIEFFX1ZFUlNJT05fMToKPiA+IC0gICAgICAgICAgICAgICBmZWF0
dXJlcyAmPSB+KE5FVElGX0ZfVFNPIHwgTkVUSUZfRl9UU082IHwKPiA+ICsgICAgICAgICAgICAg
ICBmZWF0dXJlc1swXSAmPSB+KE5FVElGX0ZfVFNPIHwgTkVUSUZfRl9UU082IHwKPiA+ICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgTkVUSUZfRl9IV19WTEFOX0NUQUdfRklMVEVSKTsK
PiA+ICAgICAgICAgICAgICAgICBicmVhazsKPiA+ICAgICAgICAgZGVmYXVsdDoKPiA+ICAgICAg
ICAgICAgICAgICBicmVhazsKPiA+ICAgICAgICAgfQo+ID4gLSAgICAgICByZXR1cm4gZmVhdHVy
ZXM7Cj4gPiAgfQo+ID4KPiA+ICBzdGF0aWMgaW50IGhuc19uaWNfdWNfc3luYyhzdHJ1Y3QgbmV0
X2RldmljZSAqbmV0ZGV2LCBjb25zdCB1bnNpZ25lZAo+ID4gY2hhciAqYWRkcikKPiA+IEBAIC0y
MTYzLDggKzIxNjIsOCBAQCBzdGF0aWMgdm9pZCBobnNfbmljX3NldF9wcml2X29wcyhzdHJ1Y3QK
PiA+IG5ldF9kZXZpY2UgKm5ldGRldikKPiA+ICAgICAgICAgICAgICAgICBwcml2LT5vcHMubWF5
YmVfc3RvcF90eCA9IGhuc19uaWNfbWF5YmVfc3RvcF90eDsKPiA+ICAgICAgICAgfSBlbHNlIHsK
PiA+ICAgICAgICAgICAgICAgICBwcml2LT5vcHMuZ2V0X3J4ZF9ibnVtID0gZ2V0X3YycnhfZGVz
Y19ibnVtOwo+ID4gLSAgICAgICAgICAgICAgIGlmICgobmV0ZGV2LT5mZWF0dXJlcyAmIE5FVElG
X0ZfVFNPKSB8fAo+ID4gLSAgICAgICAgICAgICAgICAgICAobmV0ZGV2LT5mZWF0dXJlcyAmIE5F
VElGX0ZfVFNPNikpIHsKPiA+ICsgICAgICAgICAgICAgICBpZiAoKG5ldGRldi0+ZmVhdHVyZXNb
MF0gJiBORVRJRl9GX1RTTykgfHwKPiA+ICsgICAgICAgICAgICAgICAgICAgKG5ldGRldi0+ZmVh
dHVyZXNbMF0gJiBORVRJRl9GX1RTTzYpKSB7Cj4gPiAgICAgICAgICAgICAgICAgICAgICAgICBw
cml2LT5vcHMuZmlsbF9kZXNjID0gZmlsbF90c29fZGVzYzsKPiA+ICAgICAgICAgICAgICAgICAg
ICAgICAgIHByaXYtPm9wcy5tYXliZV9zdG9wX3R4ID0gaG5zX25pY19tYXliZV9zdG9wX3RzbzsK
PiA+ICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFRoaXMgY2hpcCBvbmx5IHN1cHBvcnQgNyo0
MDk2ICovCj4gPiBAQCAtMjMyNSwyMiArMjMyNCwyMyBAQCBzdGF0aWMgaW50IGhuc19uaWNfZGV2
X3Byb2JlKHN0cnVjdAo+ID4gcGxhdGZvcm1fZGV2aWNlICpwZGV2KQo+ID4gICAgICAgICBuZGV2
LT5uZXRkZXZfb3BzID0gJmhuc19uaWNfbmV0ZGV2X29wczsKPiA+ICAgICAgICAgaG5zX2V0aHRv
b2xfc2V0X29wcyhuZGV2KTsKPiA+Cj4gPiAtICAgICAgIG5kZXYtPmZlYXR1cmVzIHw9IE5FVElG
X0ZfSVBfQ1NVTSB8IE5FVElGX0ZfSVBWNl9DU1VNIHwKPiA+ICsgICAgICAgbmRldi0+ZmVhdHVy
ZXNbMF0gfD0gTkVUSUZfRl9JUF9DU1VNIHwgTkVUSUZfRl9JUFY2X0NTVU0gfAo+ID4gICAgICAg
ICAgICAgICAgIE5FVElGX0ZfUlhDU1VNIHwgTkVUSUZfRl9TRyB8IE5FVElGX0ZfR1NPIHwKPiA+
ICAgICAgICAgICAgICAgICBORVRJRl9GX0dSTzsKPiA+IC0gICAgICAgbmRldi0+dmxhbl9mZWF0
dXJlcyB8PQo+ID4gKyAgICAgICBuZGV2LT52bGFuX2ZlYXR1cmVzWzBdIHw9Cj4gPiAgICAgICAg
ICAgICAgICAgTkVUSUZfRl9JUF9DU1VNIHwgTkVUSUZfRl9JUFY2X0NTVU0gfCBORVRJRl9GX1JY
Q1NVTTsKPiA+IC0gICAgICAgbmRldi0+dmxhbl9mZWF0dXJlcyB8PSBORVRJRl9GX1NHIHwgTkVU
SUZfRl9HU08gfCBORVRJRl9GX0dSTzsKPiA+ICsgICAgICAgbmRldi0+dmxhbl9mZWF0dXJlc1sw
XSB8PSBORVRJRl9GX1NHIHwgTkVUSUZfRl9HU08gfCBORVRJRl9GX0dSTzsKPiA+Cj4gPiAgICAg
ICAgIC8qIE1UVSByYW5nZTogNjggLSA5NTc4ICh2MSkgb3IgOTcwNiAodjIpICovCj4gPiAgICAg
ICAgIG5kZXYtPm1pbl9tdHUgPSBNQUNfTUlOX01UVTsKPiA+ICAgICAgICAgc3dpdGNoIChwcml2
LT5lbmV0X3Zlcikgewo+ID4gICAgICAgICBjYXNlIEFFX1ZFUlNJT05fMjoKPiA+IC0gICAgICAg
ICAgICAgICBuZGV2LT5mZWF0dXJlcyB8PSBORVRJRl9GX1RTTyB8IE5FVElGX0ZfVFNPNiB8IE5F
VElGX0ZfTlRVUExFOwo+ID4gLSAgICAgICAgICAgICAgIG5kZXYtPmh3X2ZlYXR1cmVzIHw9IE5F
VElGX0ZfSVBfQ1NVTSB8IE5FVElGX0ZfSVBWNl9DU1VNIHwKPiA+ICsgICAgICAgICAgICAgICBu
ZGV2LT5mZWF0dXJlc1swXSB8PQo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBO
RVRJRl9GX1RTTyB8IE5FVElGX0ZfVFNPNiB8IE5FVElGX0ZfTlRVUExFOwo+ID4gKyAgICAgICAg
ICAgICAgIG5kZXYtPmh3X2ZlYXR1cmVzWzBdIHw9IE5FVElGX0ZfSVBfQ1NVTSB8IE5FVElGX0Zf
SVBWNl9DU1VNIHwKPiA+ICAgICAgICAgICAgICAgICAgICAgICAgIE5FVElGX0ZfUlhDU1VNIHwg
TkVUSUZfRl9TRyB8IE5FVElGX0ZfR1NPIHwKPiA+ICAgICAgICAgICAgICAgICAgICAgICAgIE5F
VElGX0ZfR1JPIHwgTkVUSUZfRl9UU08gfCBORVRJRl9GX1RTTzY7Cj4gPiAtICAgICAgICAgICAg
ICAgbmRldi0+dmxhbl9mZWF0dXJlcyB8PSBORVRJRl9GX1RTTyB8IE5FVElGX0ZfVFNPNjsKPiA+
ICsgICAgICAgICAgICAgICBuZGV2LT52bGFuX2ZlYXR1cmVzWzBdIHw9IE5FVElGX0ZfVFNPIHwg
TkVUSUZfRl9UU082Owo+ID4gICAgICAgICAgICAgICAgIG5kZXYtPm1heF9tdHUgPSBNQUNfTUFY
X01UVV9WMiAtCj4gPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChFVEhfSExFTiAr
IEVUSF9GQ1NfTEVOICsgVkxBTl9ITEVOKTsKPiA+ICAgICAgICAgICAgICAgICBicmVhazsKPiA+
IGRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9oaXNpbGljb24vaG5zMy9obnMzX2Vu
ZXQuYwo+ID4gYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9oaXNpbGljb24vaG5zMy9obnMzX2VuZXQu
Ywo+ID4gaW5kZXggY2RiNWYxNC4uYmE1NjkwNyAxMDA2NDQKPiA+IC0tLSBhL2RyaXZlcnMvbmV0
L2V0aGVybmV0L2hpc2lsaWNvbi9obnMzL2huczNfZW5ldC5jCj4gPiArKysgYi9kcml2ZXJzL25l
dC9ldGhlcm5ldC9oaXNpbGljb24vaG5zMy9obnMzX2VuZXQuYwo+ID4gQEAgLTE0ODEsNyArMTQ4
MSw3IEBAIHN0YXRpYyBpbnQgaG5zM19oYW5kbGVfdnRhZ3Moc3RydWN0Cj4gPiBobnMzX2VuZXRf
cmluZyAqdHhfcmluZywKPiA+ICAgICAgICAgICAgICAgICByZXR1cm4gLUVJTlZBTDsKPiA+Cj4g
PiAgICAgICAgIGlmIChza2ItPnByb3RvY29sID09IGh0b25zKEVUSF9QXzgwMjFRKSAmJgo+ID4g
LSAgICAgICAgICAgIShoYW5kbGUtPmtpbmZvLm5ldGRldi0+ZmVhdHVyZXMgJiBORVRJRl9GX0hX
X1ZMQU5fQ1RBR19UWCkpIHsKPiA+ICsgICAgICAgICAgICEoaGFuZGxlLT5raW5mby5uZXRkZXYt
PmZlYXR1cmVzWzBdICYgTkVUSUZfRl9IV19WTEFOX0NUQUdfVFgpKSB7Cj4gPiAgICAgICAgICAg
ICAgICAgLyogV2hlbiBIVyBWTEFOIGFjY2VsZXJhdGlvbiBpcyB0dXJuZWQgb2ZmLCBhbmQgdGhl
IHN0YWNrCj4gPiAgICAgICAgICAgICAgICAgICogc2V0cyB0aGUgcHJvdG9jb2wgdG8gODAyLjFx
LCB0aGUgZHJpdmVyIGp1c3QgbmVlZCB0bwo+ID4gICAgICAgICAgICAgICAgICAqIHNldCB0aGUg
cHJvdG9jb2wgdG8gdGhlIGVuY2Fwc3VsYXRlZCBldGhlcnR5cGUuCj4gPiBAQCAtMjMwMCw1NiAr
MjMwMCw1NyBAQCBzdGF0aWMgaW50IGhuczNfbmljX2RvX2lvY3RsKHN0cnVjdCBuZXRfZGV2aWNl
ICpuZXRkZXYsCj4gPiAgfQo+ID4KPiA+ICBzdGF0aWMgaW50IGhuczNfbmljX3NldF9mZWF0dXJl
cyhzdHJ1Y3QgbmV0X2RldmljZSAqbmV0ZGV2LAo+ID4gLSAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgbmV0ZGV2X2ZlYXR1cmVzX3QgZmVhdHVyZXMpCj4gPiArICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBuZXRkZXZfZmVhdHVyZXNfdCAqZmVhdHVyZXMpCj4gPiAgewo+ID4g
LSAgICAgICBuZXRkZXZfZmVhdHVyZXNfdCBjaGFuZ2VkID0gbmV0ZGV2LT5mZWF0dXJlcyBeIGZl
YXR1cmVzOwo+ID4gKyAgICAgICBuZXRkZXZfZmVhdHVyZXNfdCBjaGFuZ2VkW05FVERFVl9GRUFU
VVJFX0RXT1JEU107Cj4gPiAgICAgICAgIHN0cnVjdCBobnMzX25pY19wcml2ICpwcml2ID0gbmV0
ZGV2X3ByaXYobmV0ZGV2KTsKPiA+ICAgICAgICAgc3RydWN0IGhuYWUzX2hhbmRsZSAqaCA9IHBy
aXYtPmFlX2hhbmRsZTsKPiA+ICAgICAgICAgYm9vbCBlbmFibGU7Cj4gPiAgICAgICAgIGludCBy
ZXQ7Cj4gPgo+ID4gLSAgICAgICBpZiAoY2hhbmdlZCAmIChORVRJRl9GX0dST19IVykgJiYgaC0+
YWVfYWxnby0+b3BzLT5zZXRfZ3JvX2VuKSB7Cj4gPiAtICAgICAgICAgICAgICAgZW5hYmxlID0g
ISEoZmVhdHVyZXMgJiBORVRJRl9GX0dST19IVyk7Cj4gPiArICAgICAgIG5ldGRldl9mZWF0dXJl
c194b3IoY2hhbmdlZCwgbmV0ZGV2LT5mZWF0dXJlcywgZmVhdHVyZXMpOwo+ID4gKyAgICAgICBp
ZiAoY2hhbmdlZFswXSAmIChORVRJRl9GX0dST19IVykgJiYgaC0+YWVfYWxnby0+b3BzLT5zZXRf
Z3JvX2VuKSB7Cj4gPiArICAgICAgICAgICAgICAgZW5hYmxlID0gISEoZmVhdHVyZXNbMF0gJiBO
RVRJRl9GX0dST19IVyk7Cj4gPiAgICAgICAgICAgICAgICAgcmV0ID0gaC0+YWVfYWxnby0+b3Bz
LT5zZXRfZ3JvX2VuKGgsIGVuYWJsZSk7Cj4gPiAgICAgICAgICAgICAgICAgaWYgKHJldCkKPiA+
ICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXQ7Cj4gPiAgICAgICAgIH0KPiA+Cj4g
PiAtICAgICAgIGlmICgoY2hhbmdlZCAmIE5FVElGX0ZfSFdfVkxBTl9DVEFHX1JYKSAmJgo+ID4g
KyAgICAgICBpZiAoKGNoYW5nZWRbMF0gJiBORVRJRl9GX0hXX1ZMQU5fQ1RBR19SWCkgJiYKPiA+
ICAgICAgICAgICAgIGgtPmFlX2FsZ28tPm9wcy0+ZW5hYmxlX2h3X3N0cmlwX3J4dnRhZykgewo+
ID4gLSAgICAgICAgICAgICAgIGVuYWJsZSA9ICEhKGZlYXR1cmVzICYgTkVUSUZfRl9IV19WTEFO
X0NUQUdfUlgpOwo+ID4gKyAgICAgICAgICAgICAgIGVuYWJsZSA9ICEhKGZlYXR1cmVzWzBdICYg
TkVUSUZfRl9IV19WTEFOX0NUQUdfUlgpOwo+ID4gICAgICAgICAgICAgICAgIHJldCA9IGgtPmFl
X2FsZ28tPm9wcy0+ZW5hYmxlX2h3X3N0cmlwX3J4dnRhZyhoLCBlbmFibGUpOwo+ID4gICAgICAg
ICAgICAgICAgIGlmIChyZXQpCj4gPiAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0
Owo+ID4gICAgICAgICB9Cj4gPgo+ID4gLSAgICAgICBpZiAoKGNoYW5nZWQgJiBORVRJRl9GX05U
VVBMRSkgJiYgaC0+YWVfYWxnby0+b3BzLT5lbmFibGVfZmQpIHsKPiA+IC0gICAgICAgICAgICAg
ICBlbmFibGUgPSAhIShmZWF0dXJlcyAmIE5FVElGX0ZfTlRVUExFKTsKPiA+ICsgICAgICAgaWYg
KChjaGFuZ2VkWzBdICYgTkVUSUZfRl9OVFVQTEUpICYmIGgtPmFlX2FsZ28tPm9wcy0+ZW5hYmxl
X2ZkKSB7Cj4gPiArICAgICAgICAgICAgICAgZW5hYmxlID0gISEoZmVhdHVyZXNbMF0gJiBORVRJ
Rl9GX05UVVBMRSk7Cj4gPiAgICAgICAgICAgICAgICAgaC0+YWVfYWxnby0+b3BzLT5lbmFibGVf
ZmQoaCwgZW5hYmxlKTsKPiA+ICAgICAgICAgfQo+ID4KPiA+IC0gICAgICAgaWYgKChuZXRkZXYt
PmZlYXR1cmVzICYgTkVUSUZfRl9IV19UQykgPiAoZmVhdHVyZXMgJiBORVRJRl9GX0hXX1RDKSAm
Jgo+ID4gKyAgICAgICBpZiAoKG5ldGRldi0+ZmVhdHVyZXNbMF0gJiBORVRJRl9GX0hXX1RDKSA+
Cj4gPiArICAgICAgICAgICAgKGZlYXR1cmVzWzBdICYgTkVUSUZfRl9IV19UQykgJiYKPiA+ICAg
ICAgICAgICAgIGgtPmFlX2FsZ28tPm9wcy0+Y2xzX2Zsb3dlcl9hY3RpdmUoaCkpIHsKPiA+ICAg
ICAgICAgICAgICAgICBuZXRkZXZfZXJyKG5ldGRldiwKPiA+ICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICJ0aGVyZSBhcmUgb2ZmbG9hZGVkIFRDIGZpbHRlcnMgYWN0aXZlLAo+ID4gY2Fubm90
IGRpc2FibGUgSFcgVEMgb2ZmbG9hZCIpOwo+ID4gICAgICAgICAgICAgICAgIHJldHVybiAtRUlO
VkFMOwo+ID4gICAgICAgICB9Cj4gPgo+ID4gLSAgICAgICBpZiAoKGNoYW5nZWQgJiBORVRJRl9G
X0hXX1ZMQU5fQ1RBR19GSUxURVIpICYmCj4gPiArICAgICAgIGlmICgoY2hhbmdlZFswXSAmIE5F
VElGX0ZfSFdfVkxBTl9DVEFHX0ZJTFRFUikgJiYKPiA+ICAgICAgICAgICAgIGgtPmFlX2FsZ28t
Pm9wcy0+ZW5hYmxlX3ZsYW5fZmlsdGVyKSB7Cj4gPiAtICAgICAgICAgICAgICAgZW5hYmxlID0g
ISEoZmVhdHVyZXMgJiBORVRJRl9GX0hXX1ZMQU5fQ1RBR19GSUxURVIpOwo+ID4gKyAgICAgICAg
ICAgICAgIGVuYWJsZSA9ICEhKGZlYXR1cmVzWzBdICYgTkVUSUZfRl9IV19WTEFOX0NUQUdfRklM
VEVSKTsKPiA+ICAgICAgICAgICAgICAgICByZXQgPSBoLT5hZV9hbGdvLT5vcHMtPmVuYWJsZV92
bGFuX2ZpbHRlcihoLCBlbmFibGUpOwo+ID4gICAgICAgICAgICAgICAgIGlmIChyZXQpCj4gPiAg
ICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0Owo+ID4gICAgICAgICB9Cj4gPgo+ID4g
LSAgICAgICBuZXRkZXYtPmZlYXR1cmVzID0gZmVhdHVyZXM7Cj4gPiArICAgICAgIG5ldGRldl9m
ZWF0dXJlc19jb3B5KG5ldGRldi0+ZmVhdHVyZXMsIGZlYXR1cmVzKTsKPiA+ICAgICAgICAgcmV0
dXJuIDA7Cj4gPiAgfQo+ID4KPiA+IC1zdGF0aWMgbmV0ZGV2X2ZlYXR1cmVzX3QgaG5zM19mZWF0
dXJlc19jaGVjayhzdHJ1Y3Qgc2tfYnVmZiAqc2tiLAo+ID4gLSAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IG5ldF9kZXZpY2UgKmRldiwKPiA+IC0gICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldGRldl9mZWF0dXJlc190
IGZlYXR1cmVzKQo+ID4gK3N0YXRpYyB2b2lkIGhuczNfZmVhdHVyZXNfY2hlY2soc3RydWN0IHNr
X2J1ZmYgKnNrYiwgc3RydWN0IG5ldF9kZXZpY2UgKmRldiwKPiA+ICsgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgbmV0ZGV2X2ZlYXR1cmVzX3QgKmZlYXR1cmVzKQo+ID4gIHsKPiA+ICAj
ZGVmaW5lIEhOUzNfTUFYX0hEUl9MRU4gICAgICAgNDgwVQo+ID4gICNkZWZpbmUgSE5TM19NQVhf
TDRfSERSX0xFTiAgICA2MFUKPiA+IEBAIC0yMzczLDkgKzIzNzQsNyBAQCBzdGF0aWMgbmV0ZGV2
X2ZlYXR1cmVzX3QKPiA+IGhuczNfZmVhdHVyZXNfY2hlY2soc3RydWN0IHNrX2J1ZmYgKnNrYiwK
PiA+ICAgICAgICAgICogbGVuIG9mIDQ4MCBieXRlcy4KPiA+ICAgICAgICAgICovCj4gPiAgICAg
ICAgIGlmIChsZW4gPiBITlMzX01BWF9IRFJfTEVOKQo+ID4gLSAgICAgICAgICAgICAgIGZlYXR1
cmVzICY9IH4oTkVUSUZfRl9DU1VNX01BU0sgfCBORVRJRl9GX0dTT19NQVNLKTsKPiA+IC0KPiA+
IC0gICAgICAgcmV0dXJuIGZlYXR1cmVzOwo+ID4gKyAgICAgICAgICAgICAgIGZlYXR1cmVzWzBd
ICY9IH4oTkVUSUZfRl9DU1VNX01BU0sgfCBORVRJRl9GX0dTT19NQVNLKTsKPiA+ICB9Cj4gPgo+
ID4gIHN0YXRpYyB2b2lkIGhuczNfbmljX2dldF9zdGF0czY0KHN0cnVjdCBuZXRfZGV2aWNlICpu
ZXRkZXYsCj4gPiBAQCAtMzEyNywyNyArMzEyNiwyOCBAQCBzdGF0aWMgdm9pZCBobnMzX3NldF9k
ZWZhdWx0X2ZlYXR1cmUoc3RydWN0Cj4gPiBuZXRfZGV2aWNlICpuZXRkZXYpCj4gPgo+ID4gICAg
ICAgICBuZXRkZXYtPnByaXZfZmxhZ3MgfD0gSUZGX1VOSUNBU1RfRkxUOwo+ID4KPiA+IC0gICAg
ICAgbmV0ZGV2LT5od19lbmNfZmVhdHVyZXMgfD0gTkVUSUZfRl9SWENTVU0gfCBORVRJRl9GX1NH
IHwgTkVUSUZfRl9HU08gfAo+ID4gKyAgICAgICBuZXRkZXYtPmh3X2VuY19mZWF0dXJlc1swXSB8
PQo+ID4gKyAgICAgICAgICAgICAgIE5FVElGX0ZfUlhDU1VNIHwgTkVUSUZfRl9TRyB8IE5FVElG
X0ZfR1NPIHwKPiA+ICAgICAgICAgICAgICAgICBORVRJRl9GX0dSTyB8IE5FVElGX0ZfVFNPIHwg
TkVUSUZfRl9UU082IHwgTkVUSUZfRl9HU09fR1JFIHwKPiA+ICAgICAgICAgICAgICAgICBORVRJ
Rl9GX0dTT19HUkVfQ1NVTSB8IE5FVElGX0ZfR1NPX1VEUF9UVU5ORUwgfAo+ID4gICAgICAgICAg
ICAgICAgIE5FVElGX0ZfU0NUUF9DUkMgfCBORVRJRl9GX1RTT19NQU5HTEVJRCB8IE5FVElGX0Zf
RlJBR0xJU1Q7Cj4gPgo+ID4gICAgICAgICBuZXRkZXYtPmdzb19wYXJ0aWFsX2ZlYXR1cmVzIHw9
IE5FVElGX0ZfR1NPX0dSRV9DU1VNOwo+ID4KPiA+IC0gICAgICAgbmV0ZGV2LT5mZWF0dXJlcyB8
PSBORVRJRl9GX0hXX1ZMQU5fQ1RBR19GSUxURVIgfAo+ID4gKyAgICAgICBuZXRkZXYtPmZlYXR1
cmVzWzBdIHw9IE5FVElGX0ZfSFdfVkxBTl9DVEFHX0ZJTFRFUiB8Cj4gPiAgICAgICAgICAgICAg
ICAgTkVUSUZfRl9IV19WTEFOX0NUQUdfVFggfCBORVRJRl9GX0hXX1ZMQU5fQ1RBR19SWCB8Cj4g
PiAgICAgICAgICAgICAgICAgTkVUSUZfRl9SWENTVU0gfCBORVRJRl9GX1NHIHwgTkVUSUZfRl9H
U08gfAo+ID4gICAgICAgICAgICAgICAgIE5FVElGX0ZfR1JPIHwgTkVUSUZfRl9UU08gfCBORVRJ
Rl9GX1RTTzYgfCBORVRJRl9GX0dTT19HUkUgfAo+ID4gICAgICAgICAgICAgICAgIE5FVElGX0Zf
R1NPX0dSRV9DU1VNIHwgTkVUSUZfRl9HU09fVURQX1RVTk5FTCB8Cj4gPiAgICAgICAgICAgICAg
ICAgTkVUSUZfRl9TQ1RQX0NSQyB8IE5FVElGX0ZfRlJBR0xJU1Q7Cj4gPgo+ID4gLSAgICAgICBu
ZXRkZXYtPnZsYW5fZmVhdHVyZXMgfD0gTkVUSUZfRl9SWENTVU0gfAo+ID4gKyAgICAgICBuZXRk
ZXYtPnZsYW5fZmVhdHVyZXNbMF0gfD0gTkVUSUZfRl9SWENTVU0gfAo+ID4gICAgICAgICAgICAg
ICAgIE5FVElGX0ZfU0cgfCBORVRJRl9GX0dTTyB8IE5FVElGX0ZfR1JPIHwKPiA+ICAgICAgICAg
ICAgICAgICBORVRJRl9GX1RTTyB8IE5FVElGX0ZfVFNPNiB8IE5FVElGX0ZfR1NPX0dSRSB8Cj4g
PiAgICAgICAgICAgICAgICAgTkVUSUZfRl9HU09fR1JFX0NTVU0gfCBORVRJRl9GX0dTT19VRFBf
VFVOTkVMIHwKPiA+ICAgICAgICAgICAgICAgICBORVRJRl9GX1NDVFBfQ1JDIHwgTkVUSUZfRl9G
UkFHTElTVDsKPiA+Cj4gPiAtICAgICAgIG5ldGRldi0+aHdfZmVhdHVyZXMgfD0gTkVUSUZfRl9I
V19WTEFOX0NUQUdfVFggfAo+ID4gKyAgICAgICBuZXRkZXYtPmh3X2ZlYXR1cmVzWzBdIHw9IE5F
VElGX0ZfSFdfVkxBTl9DVEFHX1RYIHwKPiA+ICAgICAgICAgICAgICAgICBORVRJRl9GX0hXX1ZM
QU5fQ1RBR19SWCB8Cj4gPiAgICAgICAgICAgICAgICAgTkVUSUZfRl9SWENTVU0gfCBORVRJRl9G
X1NHIHwgTkVUSUZfRl9HU08gfAo+ID4gICAgICAgICAgICAgICAgIE5FVElGX0ZfR1JPIHwgTkVU
SUZfRl9UU08gfCBORVRJRl9GX1RTTzYgfCBORVRJRl9GX0dTT19HUkUgfAo+ID4gQEAgLTMxNTUs
NDggKzMxNTUsNDkgQEAgc3RhdGljIHZvaWQgaG5zM19zZXRfZGVmYXVsdF9mZWF0dXJlKHN0cnVj
dAo+ID4gbmV0X2RldmljZSAqbmV0ZGV2KQo+ID4gICAgICAgICAgICAgICAgIE5FVElGX0ZfU0NU
UF9DUkMgfCBORVRJRl9GX0ZSQUdMSVNUOwo+ID4KPiA+ICAgICAgICAgaWYgKGFlX2Rldi0+ZGV2
X3ZlcnNpb24gPj0gSE5BRTNfREVWSUNFX1ZFUlNJT05fVjIpIHsKPiA+IC0gICAgICAgICAgICAg
ICBuZXRkZXYtPmh3X2ZlYXR1cmVzIHw9IE5FVElGX0ZfR1JPX0hXOwo+ID4gLSAgICAgICAgICAg
ICAgIG5ldGRldi0+ZmVhdHVyZXMgfD0gTkVUSUZfRl9HUk9fSFc7Cj4gPiArICAgICAgICAgICAg
ICAgbmV0ZGV2LT5od19mZWF0dXJlc1swXSB8PSBORVRJRl9GX0dST19IVzsKPiA+ICsgICAgICAg
ICAgICAgICBuZXRkZXYtPmZlYXR1cmVzWzBdIHw9IE5FVElGX0ZfR1JPX0hXOwo+ID4KPiA+ICAg
ICAgICAgICAgICAgICBpZiAoIShoLT5mbGFncyAmIEhOQUUzX1NVUFBPUlRfVkYpKSB7Cj4gPiAt
ICAgICAgICAgICAgICAgICAgICAgICBuZXRkZXYtPmh3X2ZlYXR1cmVzIHw9IE5FVElGX0ZfTlRV
UExFOwo+ID4gLSAgICAgICAgICAgICAgICAgICAgICAgbmV0ZGV2LT5mZWF0dXJlcyB8PSBORVRJ
Rl9GX05UVVBMRTsKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgIG5ldGRldi0+aHdfZmVhdHVy
ZXNbMF0gfD0gTkVUSUZfRl9OVFVQTEU7Cj4gPiArICAgICAgICAgICAgICAgICAgICAgICBuZXRk
ZXYtPmZlYXR1cmVzWzBdIHw9IE5FVElGX0ZfTlRVUExFOwo+ID4gICAgICAgICAgICAgICAgIH0K
PiA+ICAgICAgICAgfQo+ID4KPiA+ICAgICAgICAgaWYgKHRlc3RfYml0KEhOQUUzX0RFVl9TVVBQ
T1JUX1VEUF9HU09fQiwgYWVfZGV2LT5jYXBzKSkgewo+ID4gLSAgICAgICAgICAgICAgIG5ldGRl
di0+aHdfZmVhdHVyZXMgfD0gTkVUSUZfRl9HU09fVURQX0w0Owo+ID4gLSAgICAgICAgICAgICAg
IG5ldGRldi0+ZmVhdHVyZXMgfD0gTkVUSUZfRl9HU09fVURQX0w0Owo+ID4gLSAgICAgICAgICAg
ICAgIG5ldGRldi0+dmxhbl9mZWF0dXJlcyB8PSBORVRJRl9GX0dTT19VRFBfTDQ7Cj4gPiAtICAg
ICAgICAgICAgICAgbmV0ZGV2LT5od19lbmNfZmVhdHVyZXMgfD0gTkVUSUZfRl9HU09fVURQX0w0
Owo+ID4gKyAgICAgICAgICAgICAgIG5ldGRldi0+aHdfZmVhdHVyZXNbMF0gfD0gTkVUSUZfRl9H
U09fVURQX0w0Owo+ID4gKyAgICAgICAgICAgICAgIG5ldGRldi0+ZmVhdHVyZXNbMF0gfD0gTkVU
SUZfRl9HU09fVURQX0w0Owo+ID4gKyAgICAgICAgICAgICAgIG5ldGRldi0+dmxhbl9mZWF0dXJl
c1swXSB8PSBORVRJRl9GX0dTT19VRFBfTDQ7Cj4gPiArICAgICAgICAgICAgICAgbmV0ZGV2LT5o
d19lbmNfZmVhdHVyZXNbMF0gfD0gTkVUSUZfRl9HU09fVURQX0w0Owo+ID4gICAgICAgICB9Cj4g
Pgo+ID4gICAgICAgICBpZiAodGVzdF9iaXQoSE5BRTNfREVWX1NVUFBPUlRfSFdfVFhfQ1NVTV9C
LCBhZV9kZXYtPmNhcHMpKSB7Cj4gPiAtICAgICAgICAgICAgICAgbmV0ZGV2LT5od19mZWF0dXJl
cyB8PSBORVRJRl9GX0hXX0NTVU07Cj4gPiAtICAgICAgICAgICAgICAgbmV0ZGV2LT5mZWF0dXJl
cyB8PSBORVRJRl9GX0hXX0NTVU07Cj4gPiAtICAgICAgICAgICAgICAgbmV0ZGV2LT52bGFuX2Zl
YXR1cmVzIHw9IE5FVElGX0ZfSFdfQ1NVTTsKPiA+IC0gICAgICAgICAgICAgICBuZXRkZXYtPmh3
X2VuY19mZWF0dXJlcyB8PSBORVRJRl9GX0hXX0NTVU07Cj4gPiArICAgICAgICAgICAgICAgbmV0
ZGV2LT5od19mZWF0dXJlc1swXSB8PSBORVRJRl9GX0hXX0NTVU07Cj4gPiArICAgICAgICAgICAg
ICAgbmV0ZGV2LT5mZWF0dXJlc1swXSB8PSBORVRJRl9GX0hXX0NTVU07Cj4gPiArICAgICAgICAg
ICAgICAgbmV0ZGV2LT52bGFuX2ZlYXR1cmVzWzBdIHw9IE5FVElGX0ZfSFdfQ1NVTTsKPiA+ICsg
ICAgICAgICAgICAgICBuZXRkZXYtPmh3X2VuY19mZWF0dXJlc1swXSB8PSBORVRJRl9GX0hXX0NT
VU07Cj4gPiAgICAgICAgIH0gZWxzZSB7Cj4gPiAtICAgICAgICAgICAgICAgbmV0ZGV2LT5od19m
ZWF0dXJlcyB8PSBORVRJRl9GX0lQX0NTVU0gfCBORVRJRl9GX0lQVjZfQ1NVTTsKPiA+IC0gICAg
ICAgICAgICAgICBuZXRkZXYtPmZlYXR1cmVzIHw9IE5FVElGX0ZfSVBfQ1NVTSB8IE5FVElGX0Zf
SVBWNl9DU1VNOwo+ID4gLSAgICAgICAgICAgICAgIG5ldGRldi0+dmxhbl9mZWF0dXJlcyB8PSBO
RVRJRl9GX0lQX0NTVU0gfCBORVRJRl9GX0lQVjZfQ1NVTTsKPiA+IC0gICAgICAgICAgICAgICBu
ZXRkZXYtPmh3X2VuY19mZWF0dXJlcyB8PSBORVRJRl9GX0lQX0NTVU0gfCBORVRJRl9GX0lQVjZf
Q1NVTTsKPiA+ICsgICAgICAgICAgICAgICBuZXRkZXYtPmh3X2ZlYXR1cmVzWzBdIHw9IE5FVElG
X0ZfSVBfQ1NVTSB8IE5FVElGX0ZfSVBWNl9DU1VNOwo+ID4gKyAgICAgICAgICAgICAgIG5ldGRl
di0+ZmVhdHVyZXNbMF0gfD0gTkVUSUZfRl9JUF9DU1VNIHwgTkVUSUZfRl9JUFY2X0NTVU07Cj4g
PiArICAgICAgICAgICAgICAgbmV0ZGV2LT52bGFuX2ZlYXR1cmVzWzBdIHw9IE5FVElGX0ZfSVBf
Q1NVTSB8IE5FVElGX0ZfSVBWNl9DU1VNOwo+ID4gKyAgICAgICAgICAgICAgIG5ldGRldi0+aHdf
ZW5jX2ZlYXR1cmVzWzBdIHw9Cj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgTkVUSUZfRl9JUF9DU1VNIHwgTkVUSUZfRl9JUFY2X0NTVU07Cj4gPiAgICAgICAgIH0K
PiA+Cj4gPiAgICAgICAgIGlmICh0ZXN0X2JpdChITkFFM19ERVZfU1VQUE9SVF9VRFBfVFVOTkVM
X0NTVU1fQiwgYWVfZGV2LT5jYXBzKSkgewo+ID4gLSAgICAgICAgICAgICAgIG5ldGRldi0+aHdf
ZmVhdHVyZXMgfD0gTkVUSUZfRl9HU09fVURQX1RVTk5FTF9DU1VNOwo+ID4gLSAgICAgICAgICAg
ICAgIG5ldGRldi0+ZmVhdHVyZXMgfD0gTkVUSUZfRl9HU09fVURQX1RVTk5FTF9DU1VNOwo+ID4g
LSAgICAgICAgICAgICAgIG5ldGRldi0+dmxhbl9mZWF0dXJlcyB8PSBORVRJRl9GX0dTT19VRFBf
VFVOTkVMX0NTVU07Cj4gPiAtICAgICAgICAgICAgICAgbmV0ZGV2LT5od19lbmNfZmVhdHVyZXMg
fD0gTkVUSUZfRl9HU09fVURQX1RVTk5FTF9DU1VNOwo+ID4gKyAgICAgICAgICAgICAgIG5ldGRl
di0+aHdfZmVhdHVyZXNbMF0gfD0gTkVUSUZfRl9HU09fVURQX1RVTk5FTF9DU1VNOwo+ID4gKyAg
ICAgICAgICAgICAgIG5ldGRldi0+ZmVhdHVyZXNbMF0gfD0gTkVUSUZfRl9HU09fVURQX1RVTk5F
TF9DU1VNOwo+ID4gKyAgICAgICAgICAgICAgIG5ldGRldi0+dmxhbl9mZWF0dXJlc1swXSB8PSBO
RVRJRl9GX0dTT19VRFBfVFVOTkVMX0NTVU07Cj4gPiArICAgICAgICAgICAgICAgbmV0ZGV2LT5o
d19lbmNfZmVhdHVyZXNbMF0gfD0gTkVUSUZfRl9HU09fVURQX1RVTk5FTF9DU1VNOwo+ID4gICAg
ICAgICB9Cj4gPgo+ID4gICAgICAgICBpZiAodGVzdF9iaXQoSE5BRTNfREVWX1NVUFBPUlRfRkRf
Rk9SV0FSRF9UQ19CLCBhZV9kZXYtPmNhcHMpKSB7Cj4gPiAtICAgICAgICAgICAgICAgbmV0ZGV2
LT5od19mZWF0dXJlcyB8PSBORVRJRl9GX0hXX1RDOwo+ID4gLSAgICAgICAgICAgICAgIG5ldGRl
di0+ZmVhdHVyZXMgfD0gTkVUSUZfRl9IV19UQzsKPiA+ICsgICAgICAgICAgICAgICBuZXRkZXYt
Pmh3X2ZlYXR1cmVzWzBdIHw9IE5FVElGX0ZfSFdfVEM7Cj4gPiArICAgICAgICAgICAgICAgbmV0
ZGV2LT5mZWF0dXJlc1swXSB8PSBORVRJRl9GX0hXX1RDOwo+ID4gICAgICAgICB9Cj4gPgo+ID4g
ICAgICAgICBpZiAodGVzdF9iaXQoSE5BRTNfREVWX1NVUFBPUlRfVkxBTl9GTFRSX01ERl9CLCBh
ZV9kZXYtPmNhcHMpKQo+ID4gLSAgICAgICAgICAgICAgIG5ldGRldi0+aHdfZmVhdHVyZXMgfD0g
TkVUSUZfRl9IV19WTEFOX0NUQUdfRklMVEVSOwo+ID4gKyAgICAgICAgICAgICAgIG5ldGRldi0+
aHdfZmVhdHVyZXNbMF0gfD0gTkVUSUZfRl9IV19WTEFOX0NUQUdfRklMVEVSOwo+ID4gIH0KPiA+
Cj4gPiAgc3RhdGljIGludCBobnMzX2FsbG9jX2J1ZmZlcihzdHJ1Y3QgaG5zM19lbmV0X3Jpbmcg
KnJpbmcsCj4gPiBAQCAtMzcyNyw3ICszNzI4LDcgQEAgc3RhdGljIHZvaWQgaG5zM19yeF9jaGVj
a3N1bShzdHJ1Y3QKPiA+IGhuczNfZW5ldF9yaW5nICpyaW5nLCBzdHJ1Y3Qgc2tfYnVmZiAqc2ti
LAo+ID4KPiA+ICAgICAgICAgc2tiX2NoZWNrc3VtX25vbmVfYXNzZXJ0KHNrYik7Cj4gPgo+ID4g
LSAgICAgICBpZiAoIShuZXRkZXYtPmZlYXR1cmVzICYgTkVUSUZfRl9SWENTVU0pKQo+ID4gKyAg
ICAgICBpZiAoIShuZXRkZXYtPmZlYXR1cmVzWzBdICYgTkVUSUZfRl9SWENTVU0pKQo+ID4gICAg
ICAgICAgICAgICAgIHJldHVybjsKPiA+Cj4gPiAgICAgICAgIGlmICh0ZXN0X2JpdChITlMzX05J
Q19TVEFURV9SWERfQURWX0xBWU9VVF9FTkFCTEUsICZwcml2LT5zdGF0ZSkpCj4gPiBAQCAtNDAy
NCw3ICs0MDI1LDcgQEAgc3RhdGljIGludCBobnMzX2hhbmRsZV9iZGluZm8oc3RydWN0Cj4gPiBo
bnMzX2VuZXRfcmluZyAqcmluZywgc3RydWN0IHNrX2J1ZmYgKnNrYikKPiA+ICAgICAgICAgICog
b3Rfdmxhbl90YWcgaW4gdHdvIGxheWVyIHRhZyBjYXNlLCBhbmQgc3RvcmVkIGF0IHZsYW5fdGFn
Cj4gPiAgICAgICAgICAqIGluIG9uZSBsYXllciB0YWcgY2FzZS4KPiA+ICAgICAgICAgICovCj4g
PiAtICAgICAgIGlmIChuZXRkZXYtPmZlYXR1cmVzICYgTkVUSUZfRl9IV19WTEFOX0NUQUdfUlgp
IHsKPiA+ICsgICAgICAgaWYgKG5ldGRldi0+ZmVhdHVyZXNbMF0gJiBORVRJRl9GX0hXX1ZMQU5f
Q1RBR19SWCkgewo+ID4gICAgICAgICAgICAgICAgIHUxNiB2bGFuX3RhZzsKPiA+Cj4gPiAgICAg
ICAgICAgICAgICAgaWYgKGhuczNfcGFyc2Vfdmxhbl90YWcocmluZywgZGVzYywgbDIzNGluZm8s
ICZ2bGFuX3RhZykpCj4gPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvaHVhd2Vp
L2hpbmljL2hpbmljX21haW4uYwo+ID4gYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9odWF3ZWkvaGlu
aWMvaGluaWNfbWFpbi5jCj4gPiBpbmRleCA0MDVlZTRkLi5iMTkzZWU0IDEwMDY0NAo+ID4gLS0t
IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvaHVhd2VpL2hpbmljL2hpbmljX21haW4uYwo+ID4gKysr
IGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvaHVhd2VpL2hpbmljL2hpbmljX21haW4uYwo+ID4gQEAg
LTc5LDggKzc5LDggQEAgTU9EVUxFX1BBUk1fREVTQyhyeF93ZWlnaHQsICJOdW1iZXIgUnggcGFj
a2V0cyBmb3IKPiA+IE5BUEkgYnVkZ2V0IChkZWZhdWx0PTY0KSIpOwo+ID4gIHN0YXRpYyBpbnQg
Y2hhbmdlX21hY19hZGRyKHN0cnVjdCBuZXRfZGV2aWNlICpuZXRkZXYsIGNvbnN0IHU4ICphZGRy
KTsKPiA+Cj4gPiAgc3RhdGljIGludCBzZXRfZmVhdHVyZXMoc3RydWN0IGhpbmljX2RldiAqbmlj
X2RldiwKPiA+IC0gICAgICAgICAgICAgICAgICAgICAgIG5ldGRldl9mZWF0dXJlc190IHByZV9m
ZWF0dXJlcywKPiA+IC0gICAgICAgICAgICAgICAgICAgICAgIG5ldGRldl9mZWF0dXJlc190IGZl
YXR1cmVzLCBib29sIGZvcmNlX2NoYW5nZSk7Cj4gPiArICAgICAgICAgICAgICAgICAgICAgICBu
ZXRkZXZfZmVhdHVyZXNfdCAqcHJlX2ZlYXR1cmVzLAo+ID4gKyAgICAgICAgICAgICAgICAgICAg
ICAgbmV0ZGV2X2ZlYXR1cmVzX3QgKmZlYXR1cmVzLCBib29sIGZvcmNlX2NoYW5nZSk7Cj4gPgo+
ID4gIHN0YXRpYyB2b2lkIHVwZGF0ZV9yeF9zdGF0cyhzdHJ1Y3QgaGluaWNfZGV2ICpuaWNfZGV2
LCBzdHJ1Y3QgaGluaWNfcnhxICpyeHEpCj4gPiAgewo+ID4gQEAgLTg4MCw3ICs4ODAsNyBAQCBz
dGF0aWMgdm9pZCBoaW5pY19nZXRfc3RhdHM2NChzdHJ1Y3QgbmV0X2RldmljZSAqbmV0ZGV2LAo+
ID4gIH0KPiA+Cj4gPiAgc3RhdGljIGludCBoaW5pY19zZXRfZmVhdHVyZXMoc3RydWN0IG5ldF9k
ZXZpY2UgKm5ldGRldiwKPiA+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldGRldl9m
ZWF0dXJlc190IGZlYXR1cmVzKQo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV0
ZGV2X2ZlYXR1cmVzX3QgKmZlYXR1cmVzKQo+ID4gIHsKPiA+ICAgICAgICAgc3RydWN0IGhpbmlj
X2RldiAqbmljX2RldiA9IG5ldGRldl9wcml2KG5ldGRldik7Cj4gPgo+ID4gQEAgLTg4OCwxOCAr
ODg4LDE2IEBAIHN0YXRpYyBpbnQgaGluaWNfc2V0X2ZlYXR1cmVzKHN0cnVjdCBuZXRfZGV2aWNl
ICpuZXRkZXYsCj4gPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZXMsIGZhbHNl
KTsKPiA+ICB9Cj4gPgo+ID4gLXN0YXRpYyBuZXRkZXZfZmVhdHVyZXNfdCBoaW5pY19maXhfZmVh
dHVyZXMoc3RydWN0IG5ldF9kZXZpY2UgKm5ldGRldiwKPiA+IC0gICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgbmV0ZGV2X2ZlYXR1cmVzX3QgZmVhdHVyZXMpCj4gPiAr
c3RhdGljIHZvaWQgaGluaWNfZml4X2ZlYXR1cmVzKHN0cnVjdCBuZXRfZGV2aWNlICpuZXRkZXYs
Cj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV0ZGV2X2ZlYXR1cmVzX3QgZmVh
dHVyZXMpCj4gPiAgewo+ID4gICAgICAgICBzdHJ1Y3QgaGluaWNfZGV2ICpuaWNfZGV2ID0gbmV0
ZGV2X3ByaXYobmV0ZGV2KTsKPiA+Cj4gPiAgICAgICAgIC8qIElmIFJ4IGNoZWNrc3VtIGlzIGRp
c2FibGVkLCB0aGVuIExSTyBzaG91bGQgYWxzbyBiZSBkaXNhYmxlZCAqLwo+ID4gLSAgICAgICBp
ZiAoIShmZWF0dXJlcyAmIE5FVElGX0ZfUlhDU1VNKSkgewo+ID4gKyAgICAgICBpZiAoIShmZWF0
dXJlc1swXSAmIE5FVElGX0ZfUlhDU1VNKSkgewo+ID4gICAgICAgICAgICAgICAgIG5ldGlmX2lu
Zm8obmljX2RldiwgZHJ2LCBuZXRkZXYsICJkaXNhYmxpbmcgTFJPIGFzCj4gPiBSWENTVU0gaXMg
b2ZmXG4iKTsKPiA+IC0gICAgICAgICAgICAgICBmZWF0dXJlcyAmPSB+TkVUSUZfRl9MUk87Cj4g
PiArICAgICAgICAgICAgICAgZmVhdHVyZXNbMF0gJj0gfk5FVElGX0ZfTFJPOwo+ID4gICAgICAg
ICB9Cj4gPiAtCj4gPiAtICAgICAgIHJldHVybiBmZWF0dXJlczsKPiA+ICB9Cj4gPgo+ID4gIHN0
YXRpYyBjb25zdCBzdHJ1Y3QgbmV0X2RldmljZV9vcHMgaGluaWNfbmV0ZGV2X29wcyA9IHsKPiA+
IEBAIC05NDMsMTkgKzk0MSwyMiBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IG5ldF9kZXZpY2Vfb3Bz
IGhpbmljdmZfbmV0ZGV2X29wcyA9IHsKPiA+Cj4gPiAgc3RhdGljIHZvaWQgbmV0ZGV2X2ZlYXR1
cmVzX2luaXQoc3RydWN0IG5ldF9kZXZpY2UgKm5ldGRldikKPiA+ICB7Cj4gPiAtICAgICAgIG5l
dGRldi0+aHdfZmVhdHVyZXMgPSBORVRJRl9GX1NHIHwgTkVUSUZfRl9ISUdIRE1BIHwgTkVUSUZf
Rl9JUF9DU1VNIHwKPiA+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5FVElGX0ZfSVBW
Nl9DU1VNIHwgTkVUSUZfRl9UU08gfCBORVRJRl9GX1RTTzYgfAo+ID4gLSAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgTkVUSUZfRl9SWENTVU0gfCBORVRJRl9GX0xSTyB8Cj4gPiAtICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBORVRJRl9GX0hXX1ZMQU5fQ1RBR19UWCB8Cj4gPiBORVRJ
Rl9GX0hXX1ZMQU5fQ1RBR19SWCB8Cj4gPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICBO
RVRJRl9GX0dTT19VRFBfVFVOTkVMIHwKPiA+IE5FVElGX0ZfR1NPX1VEUF9UVU5ORUxfQ1NVTTsK
PiA+IC0KPiA+IC0gICAgICAgbmV0ZGV2LT52bGFuX2ZlYXR1cmVzID0gbmV0ZGV2LT5od19mZWF0
dXJlczsKPiA+IC0KPiA+IC0gICAgICAgbmV0ZGV2LT5mZWF0dXJlcyA9IG5ldGRldi0+aHdfZmVh
dHVyZXMgfCBORVRJRl9GX0hXX1ZMQU5fQ1RBR19GSUxURVI7Cj4gPiAtCj4gPiAtICAgICAgIG5l
dGRldi0+aHdfZW5jX2ZlYXR1cmVzID0gTkVUSUZfRl9JUF9DU1VNIHwgTkVUSUZfRl9JUFY2X0NT
VU0KPiA+IHwgTkVUSUZfRl9TQ1RQX0NSQyB8Cj4gPiAtICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgTkVUSUZfRl9TRyB8IE5FVElGX0ZfVFNPIHwKPiA+IE5FVElGX0ZfVFNPNiB8IE5F
VElGX0ZfVFNPX0VDTiB8Cj4gPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTkVU
SUZfRl9HU09fVURQX1RVTk5FTF9DU1VNIHwKPiA+IE5FVElGX0ZfR1NPX1VEUF9UVU5ORUw7Cj4g
PiArICAgICAgIG5ldGRldi0+aHdfZmVhdHVyZXNbMF0gPQo+ID4gKyAgICAgICAgICAgICAgICAg
ICAgICAgTkVUSUZfRl9TRyB8IE5FVElGX0ZfSElHSERNQSB8IE5FVElGX0ZfSVBfQ1NVTSB8Cj4g
PiArICAgICAgICAgICAgICAgICAgICAgICBORVRJRl9GX0lQVjZfQ1NVTSB8IE5FVElGX0ZfVFNP
IHwgTkVUSUZfRl9UU082IHwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgIE5FVElGX0ZfUlhD
U1VNIHwgTkVUSUZfRl9MUk8gfAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgTkVUSUZfRl9I
V19WTEFOX0NUQUdfVFggfCBORVRJRl9GX0hXX1ZMQU5fQ1RBR19SWCB8Cj4gPiArICAgICAgICAg
ICAgICAgICAgICAgICBORVRJRl9GX0dTT19VRFBfVFVOTkVMIHwgTkVUSUZfRl9HU09fVURQX1RV
Tk5FTF9DU1VNOwo+ID4gKwo+ID4gKyAgICAgICBuZXRkZXZfZmVhdHVyZXNfY29weShuZXRkZXYt
PnZsYW5fZmVhdHVyZXMsIG5ldGRldi0+aHdfZmVhdHVyZXMpOwo+ID4gKwo+ID4gKyAgICAgICBu
ZXRkZXYtPmZlYXR1cmVzWzBdID0KPiA+ICsgICAgICAgICAgICAgICAgICAgICAgIG5ldGRldi0+
aHdfZmVhdHVyZXNbMF0gfCBORVRJRl9GX0hXX1ZMQU5fQ1RBR19GSUxURVI7Cj4gPiArCj4gPiAr
ICAgICAgIG5ldGRldi0+aHdfZW5jX2ZlYXR1cmVzWzBdID0KPiA+ICsgICAgICAgICAgICAgICBO
RVRJRl9GX0lQX0NTVU0gfCBORVRJRl9GX0lQVjZfQ1NVTSB8IE5FVElGX0ZfU0NUUF9DUkMgfAo+
ID4gKyAgICAgICAgICAgICAgIE5FVElGX0ZfU0cgfCBORVRJRl9GX1RTTyB8IE5FVElGX0ZfVFNP
NiB8IE5FVElGX0ZfVFNPX0VDTiB8Cj4gPiArICAgICAgICAgICAgICAgTkVUSUZfRl9HU09fVURQ
X1RVTk5FTF9DU1VNIHwgTkVUSUZfRl9HU09fVURQX1RVTk5FTDsKPiA+ICB9Cj4gPgo+ID4gIHN0
YXRpYyB2b2lkIGhpbmljX3JlZnJlc2hfbmljX2NmZyhzdHJ1Y3QgaGluaWNfZGV2ICpuaWNfZGV2
KQo+ID4gQEAgLTEwNzIsMjEgKzEwNzMsMjIgQEAgc3RhdGljIHZvaWQgbGlua19lcnJfZXZlbnQo
dm9pZCAqaGFuZGxlLAo+ID4gIH0KPiA+Cj4gPiAgc3RhdGljIGludCBzZXRfZmVhdHVyZXMoc3Ry
dWN0IGhpbmljX2RldiAqbmljX2RldiwKPiA+IC0gICAgICAgICAgICAgICAgICAgICAgIG5ldGRl
dl9mZWF0dXJlc190IHByZV9mZWF0dXJlcywKPiA+IC0gICAgICAgICAgICAgICAgICAgICAgIG5l
dGRldl9mZWF0dXJlc190IGZlYXR1cmVzLCBib29sIGZvcmNlX2NoYW5nZSkKPiA+ICsgICAgICAg
ICAgICAgICAgICAgICAgIG5ldGRldl9mZWF0dXJlc190ICpwcmVfZmVhdHVyZXMsCj4gPiArICAg
ICAgICAgICAgICAgICAgICAgICBuZXRkZXZfZmVhdHVyZXNfdCAqZmVhdHVyZXMsIGJvb2wgZm9y
Y2VfY2hhbmdlKQo+ID4gIHsKPiA+IC0gICAgICAgbmV0ZGV2X2ZlYXR1cmVzX3QgY2hhbmdlZCA9
IGZvcmNlX2NoYW5nZSA/IH4wIDogcHJlX2ZlYXR1cmVzIF4gZmVhdHVyZXM7Cj4gPiArICAgICAg
IG5ldGRldl9mZWF0dXJlc190IGZhaWxlZF9mZWF0dXJlc1tORVRERVZfRkVBVFVSRV9EV09SRFNd
ID0gezB9Owo+ID4gICAgICAgICB1MzIgY3N1bV9lbiA9IEhJTklDX1JYX0NTVU1fT0ZGTE9BRF9F
TjsKPiA+IC0gICAgICAgbmV0ZGV2X2ZlYXR1cmVzX3QgZmFpbGVkX2ZlYXR1cmVzID0gMDsKPiA+
ICsgICAgICAgbmV0ZGV2X2ZlYXR1cmVzX3QgY2hhbmdlZDsKPiA+ICAgICAgICAgaW50IHJldCA9
IDA7Cj4gPiAgICAgICAgIGludCBlcnIgPSAwOwo+ID4KPiA+ICsgICAgICAgY2hhbmdlZCA9IGZv
cmNlX2NoYW5nZSA/IH4wIDogcHJlX2ZlYXR1cmVzWzBdIF4gZmVhdHVyZXNbMF07Cj4gPiAgICAg
ICAgIGlmIChjaGFuZ2VkICYgTkVUSUZfRl9UU08pIHsKPiA+IC0gICAgICAgICAgICAgICByZXQg
PSBoaW5pY19wb3J0X3NldF90c28obmljX2RldiwgKGZlYXR1cmVzICYgTkVUSUZfRl9UU08pID8K
PiA+ICsgICAgICAgICAgICAgICByZXQgPSBoaW5pY19wb3J0X3NldF90c28obmljX2RldiwgKGZl
YXR1cmVzWzBdICYgTkVUSUZfRl9UU08pID8KPiA+ICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgSElOSUNfVFNPX0VOQUJMRSA6IEhJTklDX1RTT19ESVNBQkxFKTsKPiA+
ICAgICAgICAgICAgICAgICBpZiAocmV0KSB7Cj4gPiAgICAgICAgICAgICAgICAgICAgICAgICBl
cnIgPSByZXQ7Cj4gPiAtICAgICAgICAgICAgICAgICAgICAgICBmYWlsZWRfZmVhdHVyZXMgfD0g
TkVUSUZfRl9UU087Cj4gPiArICAgICAgICAgICAgICAgICAgICAgICBmYWlsZWRfZmVhdHVyZXNb
MF0gfD0gTkVUSUZfRl9UU087Cj4gPiAgICAgICAgICAgICAgICAgfQo+ID4gICAgICAgICB9Cj4g
Pgo+ID4gQEAgLTEwOTQsMzMgKzEwOTYsMzQgQEAgc3RhdGljIGludCBzZXRfZmVhdHVyZXMoc3Ry
dWN0IGhpbmljX2RldiAqbmljX2RldiwKPiA+ICAgICAgICAgICAgICAgICByZXQgPSBoaW5pY19z
ZXRfcnhfY3N1bV9vZmZsb2FkKG5pY19kZXYsIGNzdW1fZW4pOwo+ID4gICAgICAgICAgICAgICAg
IGlmIChyZXQpIHsKPiA+ICAgICAgICAgICAgICAgICAgICAgICAgIGVyciA9IHJldDsKPiA+IC0g
ICAgICAgICAgICAgICAgICAgICAgIGZhaWxlZF9mZWF0dXJlcyB8PSBORVRJRl9GX1JYQ1NVTTsK
PiA+ICsgICAgICAgICAgICAgICAgICAgICAgIGZhaWxlZF9mZWF0dXJlc1swXSB8PSBORVRJRl9G
X1JYQ1NVTTsKPiA+ICAgICAgICAgICAgICAgICB9Cj4gPiAgICAgICAgIH0KPiA+Cj4gPiAgICAg
ICAgIGlmIChjaGFuZ2VkICYgTkVUSUZfRl9MUk8pIHsKPiA+ICAgICAgICAgICAgICAgICByZXQg
PSBoaW5pY19zZXRfcnhfbHJvX3N0YXRlKG5pY19kZXYsCj4gPiAtICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAhIShmZWF0dXJlcyAmIE5FVElGX0ZfTFJPKSwKPiA+
ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICEhKGZlYXR1cmVz
WzBdICYgTkVUSUZfRl9MUk8pLAo+ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgSElOSUNfTFJPX1JYX1RJTUVSX0RFRkFVTFQsCj4gPiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBISU5JQ19MUk9fTUFYX1dRRV9OVU1fREVG
QVVMVCk7Cj4gPiAgICAgICAgICAgICAgICAgaWYgKHJldCkgewo+ID4gICAgICAgICAgICAgICAg
ICAgICAgICAgZXJyID0gcmV0Owo+ID4gLSAgICAgICAgICAgICAgICAgICAgICAgZmFpbGVkX2Zl
YXR1cmVzIHw9IE5FVElGX0ZfTFJPOwo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgZmFpbGVk
X2ZlYXR1cmVzWzBdIHw9IE5FVElGX0ZfTFJPOwo+ID4gICAgICAgICAgICAgICAgIH0KPiA+ICAg
ICAgICAgfQo+ID4KPiA+ICAgICAgICAgaWYgKGNoYW5nZWQgJiBORVRJRl9GX0hXX1ZMQU5fQ1RB
R19SWCkgewo+ID4gICAgICAgICAgICAgICAgIHJldCA9IGhpbmljX3NldF9yeF92bGFuX29mZmxv
YWQobmljX2RldiwKPiA+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICEhKGZlYXR1cmVzICYKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICEhKGZlYXR1cmVzWzBdICYKPiA+ICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5FVElGX0ZfSFdfVkxBTl9DVEFHX1JYKSk7
Cj4gPiAgICAgICAgICAgICAgICAgaWYgKHJldCkgewo+ID4gICAgICAgICAgICAgICAgICAgICAg
ICAgZXJyID0gcmV0Owo+ID4gLSAgICAgICAgICAgICAgICAgICAgICAgZmFpbGVkX2ZlYXR1cmVz
IHw9IE5FVElGX0ZfSFdfVkxBTl9DVEFHX1JYOwo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAg
ZmFpbGVkX2ZlYXR1cmVzWzBdIHw9IE5FVElGX0ZfSFdfVkxBTl9DVEFHX1JYOwo+ID4gICAgICAg
ICAgICAgICAgIH0KPiA+ICAgICAgICAgfQo+ID4KPiA+ICAgICAgICAgaWYgKGVycikgewo+ID4g
LSAgICAgICAgICAgICAgIG5pY19kZXYtPm5ldGRldi0+ZmVhdHVyZXMgPSBmZWF0dXJlcyBeIGZh
aWxlZF9mZWF0dXJlczsKPiA+ICsgICAgICAgICAgICAgICBuZXRkZXZfZmVhdHVyZXNfeG9yKG5p
Y19kZXYtPm5ldGRldi0+ZmVhdHVyZXMsIGZlYXR1cmVzLAo+ID4gKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgZmFpbGVkX2ZlYXR1cmVzKQo+ID4gICAgICAgICAgICAgICAgIHJl
dHVybiAtRUlPOwo+ID4gICAgICAgICB9Cj4gPgo+ID4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0
L2V0aGVybmV0L2h1YXdlaS9oaW5pYy9oaW5pY19yeC5jCj4gPiBiL2RyaXZlcnMvbmV0L2V0aGVy
bmV0L2h1YXdlaS9oaW5pYy9oaW5pY19yeC5jCj4gPiBpbmRleCBmZWQzYjZiLi40NTJhOTFiIDEw
MDY0NAo+ID4gLS0tIGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvaHVhd2VpL2hpbmljL2hpbmljX3J4
LmMKPiA+ICsrKyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L2h1YXdlaS9oaW5pYy9oaW5pY19yeC5j
Cj4gPiBAQCAtMTA2LDcgKzEwNiw3IEBAIHN0YXRpYyB2b2lkIHJ4X2NzdW0oc3RydWN0IGhpbmlj
X3J4cSAqcnhxLCB1MzIgc3RhdHVzLAo+ID4KPiA+ICAgICAgICAgY3N1bV9lcnIgPSBISU5JQ19S
UV9DUUVfU1RBVFVTX0dFVChzdGF0dXMsIENTVU1fRVJSKTsKPiA+Cj4gPiAtICAgICAgIGlmICgh
KG5ldGRldi0+ZmVhdHVyZXMgJiBORVRJRl9GX1JYQ1NVTSkpCj4gPiArICAgICAgIGlmICghKG5l
dGRldi0+ZmVhdHVyZXNbMF0gJiBORVRJRl9GX1JYQ1NVTSkpCj4gPiAgICAgICAgICAgICAgICAg
cmV0dXJuOwo+ID4KPiA+ICAgICAgICAgaWYgKCFjc3VtX2Vycikgewo+ID4gQEAgLTQxMSw3ICs0
MTEsNyBAQCBzdGF0aWMgaW50IHJ4cV9yZWN2KHN0cnVjdCBoaW5pY19yeHEgKnJ4cSwgaW50IGJ1
ZGdldCkKPiA+Cj4gPiAgICAgICAgICAgICAgICAgb2ZmbG9hZF90eXBlID0gYmUzMl90b19jcHUo
Y3FlLT5vZmZsb2FkX3R5cGUpOwo+ID4gICAgICAgICAgICAgICAgIHZsYW5fbGVuID0gYmUzMl90
b19jcHUoY3FlLT5sZW4pOwo+ID4gLSAgICAgICAgICAgICAgIGlmICgobmV0ZGV2LT5mZWF0dXJl
cyAmIE5FVElGX0ZfSFdfVkxBTl9DVEFHX1JYKSAmJgo+ID4gKyAgICAgICAgICAgICAgIGlmICgo
bmV0ZGV2LT5mZWF0dXJlc1swXSAmIE5FVElGX0ZfSFdfVkxBTl9DVEFHX1JYKSAmJgo+ID4gICAg
ICAgICAgICAgICAgICAgICBISU5JQ19HRVRfUlhfVkxBTl9PRkZMT0FEX0VOKG9mZmxvYWRfdHlw
ZSkpIHsKPiA+ICAgICAgICAgICAgICAgICAgICAgICAgIHZpZCA9IEhJTklDX0dFVF9SWF9WTEFO
X1RBRyh2bGFuX2xlbik7Cj4gPiAgICAgICAgICAgICAgICAgICAgICAgICBfX3ZsYW5faHdhY2Nl
bF9wdXRfdGFnKHNrYiwgaHRvbnMoRVRIX1BfODAyMVEpLCB2aWQpOwo+ID4gZGlmZiAtLWdpdCBh
L2luY2x1ZGUvbGludXgvaWZfdmxhbi5oIGIvaW5jbHVkZS9saW51eC9pZl92bGFuLmgKPiA+IGlu
ZGV4IDQxYTUxODMuLjQxNzM0NjQgMTAwNjQ0Cj4gPiAtLS0gYS9pbmNsdWRlL2xpbnV4L2lmX3Zs
YW4uaAo+ID4gKysrIGIvaW5jbHVkZS9saW51eC9pZl92bGFuLmgKPiA+IEBAIC01NjMsNyArNTYz
LDcgQEAgc3RhdGljIGlubGluZSBpbnQgX192bGFuX2h3YWNjZWxfZ2V0X3RhZyhjb25zdAo+ID4g
c3RydWN0IHNrX2J1ZmYgKnNrYiwKPiA+ICAgKi8KPiA+ICBzdGF0aWMgaW5saW5lIGludCB2bGFu
X2dldF90YWcoY29uc3Qgc3RydWN0IHNrX2J1ZmYgKnNrYiwgdTE2ICp2bGFuX3RjaSkKPiA+ICB7
Cj4gPiAtICAgICAgIGlmIChza2ItPmRldi0+ZmVhdHVyZXMgJiBORVRJRl9GX0hXX1ZMQU5fQ1RB
R19UWCkgewo+ID4gKyAgICAgICBpZiAoc2tiLT5kZXYtPmZlYXR1cmVzWzBdICYgTkVUSUZfRl9I
V19WTEFOX0NUQUdfVFgpIHsKPiA+ICAgICAgICAgICAgICAgICByZXR1cm4gX192bGFuX2h3YWNj
ZWxfZ2V0X3RhZyhza2IsIHZsYW5fdGNpKTsKPiA+ICAgICAgICAgfSBlbHNlIHsKPiA+ICAgICAg
ICAgICAgICAgICByZXR1cm4gX192bGFuX2dldF90YWcoc2tiLCB2bGFuX3RjaSk7Cj4gPiBkaWZm
IC0tZ2l0IGEvaW5jbHVkZS9saW51eC9uZXRkZXZfZmVhdHVyZXMuaCBiL2luY2x1ZGUvbGludXgv
bmV0ZGV2X2ZlYXR1cmVzLmgKPiA+IGluZGV4IDJjNmI5ZTQuLjkxODQ5NjMgMTAwNjQ0Cj4gPiAt
LS0gYS9pbmNsdWRlL2xpbnV4L25ldGRldl9mZWF0dXJlcy5oCj4gPiArKysgYi9pbmNsdWRlL2xp
bnV4L25ldGRldl9mZWF0dXJlcy5oCj4gPiBAQCAtMTAyLDcgKzEwMiw4IEBAIGVudW0gewo+ID4g
IH07Cj4gPgo+ID4gIC8qIGNvcHknbidwYXN0ZSBjb21wcmVzc2lvbiA7KSAqLwo+ID4gLSNkZWZp
bmUgX19ORVRJRl9GX0JJVChiaXQpICAgICAoKG5ldGRldl9mZWF0dXJlc190KTEgPDwgKGJpdCkp
Cj4gPiArI2RlZmluZSBfX05FVElGX0ZfQklUKGJpdCkgICAgICgobmV0ZGV2X2ZlYXR1cmVzX3Qp
MSA8PCAoYml0ICYgMHgzRikpCj4gPiArCj4gPiAgI2RlZmluZSBfX05FVElGX0YobmFtZSkgICAg
ICAgICAgICAgICAgX19ORVRJRl9GX0JJVChORVRJRl9GXyMjbmFtZSMjX0JJVCkKPiA+Cj4gPiAg
I2RlZmluZSBORVRJRl9GX0ZDT0VfQ1JDICAgICAgIF9fTkVUSUZfRihGQ09FX0NSQykKPiA+IEBA
IC0xNjksNiArMTcwLDggQEAgZW51bSB7Cj4gPiAgI2RlZmluZSBORVRJRl9GX0hXX0hTUl9GV0Qg
ICAgIF9fTkVUSUZfRihIV19IU1JfRldEKQo+ID4gICNkZWZpbmUgTkVUSUZfRl9IV19IU1JfRFVQ
ICAgICBfX05FVElGX0YoSFdfSFNSX0RVUCkKPiA+Cj4gPiArI2RlZmluZSBORVRERVZfRkVBVFVS
RV9EV09SRFMgIERJVl9ST1VORF9VUChORVRERVZfRkVBVFVSRV9DT1VOVCwgNjQpCj4gPiArCj4g
PiAgLyogRmluZHMgdGhlIG5leHQgZmVhdHVyZSB3aXRoIHRoZSBoaWdoZXN0IG51bWJlciBvZiB0
aGUgcmFuZ2Ugb2Ygc3RhcnQgdGlsbCAwLgo+ID4gICAqLwo+ID4gIHN0YXRpYyBpbmxpbmUgaW50
IGZpbmRfbmV4dF9uZXRkZXZfZmVhdHVyZSh1NjQgZmVhdHVyZSwgdW5zaWduZWQgbG9uZyBzdGFy
dCkKPiA+IEBAIC0xODUsOCArMTg4LDcgQEAgc3RhdGljIGlubGluZSBpbnQgZmluZF9uZXh0X25l
dGRldl9mZWF0dXJlKHU2NAo+ID4gZmVhdHVyZSwgdW5zaWduZWQgbG9uZyBzdGFydCkKPiA+ICAg
KiBtYXNrX2FkZHIgc2hvdWxkIGJlIGEgdTY0IGFuZCBiaXQgYW4gaW50Cj4gPiAgICovCj4gPiAg
I2RlZmluZSBmb3JfZWFjaF9uZXRkZXZfZmVhdHVyZShtYXNrX2FkZHIsIGJpdCkKPiA+ICAgICAg
ICAgIFwKPiA+IC0gICAgICAgZm9yICgoYml0KSA9IGZpbmRfbmV4dF9uZXRkZXZfZmVhdHVyZSgo
bWFza19hZGRyKSwgICAgICAgICAgICAgIFwKPiA+IC0gICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBORVRERVZfRkVBVFVSRV9DT1VOVCk7ICAgIFwKPiA+ICsgICAg
ICAgZm9yICgoYml0KSA9IGZpbmRfbmV4dF9uZXRkZXZfZmVhdHVyZSgobWFza19hZGRyKSwgNjQp
OyAgICAgICAgIFwKPiA+ICAgICAgICAgICAgICAoYml0KSA+PSAwOyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwKPiA+ICAgICAgICAgICAgICAoYml0KSA9
IGZpbmRfbmV4dF9uZXRkZXZfZmVhdHVyZSgobWFza19hZGRyKSwgKGJpdCkgLSAxKSkKPiA+Cj4g
PiBAQCAtMTk1LDExICsxOTcsNiBAQCBzdGF0aWMgaW5saW5lIGludCBmaW5kX25leHRfbmV0ZGV2
X2ZlYXR1cmUodTY0Cj4gPiBmZWF0dXJlLCB1bnNpZ25lZCBsb25nIHN0YXJ0KQo+ID4gICNkZWZp
bmUgTkVUSUZfRl9ORVZFUl9DSEFOR0UgICAoTkVUSUZfRl9WTEFOX0NIQUxMRU5HRUQgfCBcCj4g
PiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBORVRJRl9GX0xMVFggfCBORVRJRl9G
X05FVE5TX0xPQ0FMKQo+ID4KPiA+IC0vKiByZW1lbWJlciB0aGF0ICgodCkxIDw8IHRfQklUUykg
aXMgdW5kZWZpbmVkIGluIEM5OSAqLwo+ID4gLSNkZWZpbmUgTkVUSUZfRl9FVEhUT09MX0JJVFMg
ICAoKF9fTkVUSUZfRl9CSVQoTkVUREVWX0ZFQVRVUkVfQ09VTlQgLSAxKSB8IFwKPiA+IC0gICAg
ICAgICAgICAgICAoX19ORVRJRl9GX0JJVChORVRERVZfRkVBVFVSRV9DT1VOVCAtIDEpIC0gMSkp
ICYgXAo+ID4gLSAgICAgICAgICAgICAgIH5ORVRJRl9GX05FVkVSX0NIQU5HRSkKPiA+IC0KPiA+
ICAvKiBTZWdtZW50YXRpb24gb2ZmbG9hZCBmZWF0dXJlIG1hc2sgKi8KPiA+ICAjZGVmaW5lIE5F
VElGX0ZfR1NPX01BU0sgICAgICAgKF9fTkVUSUZfRl9CSVQoTkVUSUZfRl9HU09fTEFTVCArIDEp
IC0gXAo+ID4gICAgICAgICAgICAgICAgIF9fTkVUSUZfRl9CSVQoTkVUSUZfRl9HU09fU0hJRlQp
KQo+ID4gQEAgLTI2MSw0ICsyNTgsOTYgQEAgc3RhdGljIGlubGluZSBpbnQgZmluZF9uZXh0X25l
dGRldl9mZWF0dXJlKHU2NAo+ID4gZmVhdHVyZSwgdW5zaWduZWQgbG9uZyBzdGFydCkKPiA+ICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5FVElGX0ZfR1NPX1VEUF9UVU5ORUwgfCAg
ICAgICAgICAgICAgIFwKPiA+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5FVElG
X0ZfR1NPX1VEUF9UVU5ORUxfQ1NVTSkKPiA+Cj4gPiArc3RhdGljIGlubGluZSB2b2lkIG5ldGRl
dl9mZWF0dXJlc19jb3B5KG5ldGRldl9mZWF0dXJlc190ICpkc3QsCj4gPiArICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV0ZGV2X2ZlYXR1cmVzX3QgKnNyYykK
PiA+ICt7Cj4gPiArICAgICAgIHVuc2lnbmVkIGludCBpOwo+ID4gKwo+ID4gKyAgICAgICBmb3Ig
KGkgPSAwOyBpIDwgTkVUREVWX0ZFQVRVUkVfRFdPUkRTOyBpKyspCj4gPiArICAgICAgICAgICAg
ICAgZHN0W2ldID0gc3JjW2ldOwo+ID4gK30KPiA+ICsKPiA+ICtzdGF0aWMgaW5saW5lIHZvaWQg
bmV0ZGV2X2ZlYXR1cmVzX2FuZChuZXRkZXZfZmVhdHVyZXNfdCAqZHN0LAo+ID4gKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV0ZGV2X2ZlYXR1cmVzX3QgKmEs
Cj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXRkZXZf
ZmVhdHVyZXNfdCAqYikKPiA+ICt7Cj4gPiArICAgICAgIHVuc2lnbmVkIGludCBpOwo+ID4gKwo+
ID4gKyAgICAgICBmb3IgKGkgPSAwOyBpIDwgTkVUREVWX0ZFQVRVUkVfRFdPUkRTOyBpKyspCj4g
PiArICAgICAgICAgICAgICAgZHN0W2ldID0gYVtpXSAmIGJbaV07Cj4gPiArfQo+ID4gKwo+ID4g
K3N0YXRpYyBpbmxpbmUgdm9pZCBuZXRkZXZfZmVhdHVyZXNfYW5kbm90KG5ldGRldl9mZWF0dXJl
c190ICpkc3QsCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBj
b25zdCBuZXRkZXZfZmVhdHVyZXNfdCAqYSwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGNvbnN0IG5ldGRldl9mZWF0dXJlc190ICpiKQo+ID4gK3sKPiA+ICsg
ICAgICAgdW5zaWduZWQgaW50IGk7Cj4gPiArCj4gPiArICAgICAgIGZvciAoaSA9IDA7IGkgPCBO
RVRERVZfRkVBVFVSRV9EV09SRFM7IGkrKykKPiA+ICsgICAgICAgICAgICAgICBkc3RbaV0gPSBh
W2ldICYgfmJbaV07Cj4gPiArfQo+ID4gKwo+ID4gK3N0YXRpYyBpbmxpbmUgdm9pZCBuZXRkZXZf
ZmVhdHVyZXNfb3IobmV0ZGV2X2ZlYXR1cmVzX3QgKmRzdCwKPiA+ICsgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV0ZGV2X2ZlYXR1cmVzX3QgKmEsCj4gPiArICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ldGRldl9mZWF0dXJlc190
ICpiKQo+ID4gK3sKPiA+ICsgICAgICAgdW5zaWduZWQgaW50IGk7Cj4gPiArCj4gPiArICAgICAg
IGZvciAoaSA9IDA7IGkgPCBORVRERVZfRkVBVFVSRV9EV09SRFM7IGkrKykKPiA+ICsgICAgICAg
ICAgICAgICBkc3RbaV0gPSBhW2ldIHwgYltpXTsKPiA+ICt9Cj4gPiArCj4gPiArc3RhdGljIGlu
bGluZSB2b2lkIG5ldGRldl9mZWF0dXJlc194b3IobmV0ZGV2X2ZlYXR1cmVzX3QgKmRzdCwKPiA+
ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ldGRldl9mZWF0
dXJlc190ICphLAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29u
c3QgbmV0ZGV2X2ZlYXR1cmVzX3QgKmIpCj4gPiArewo+ID4gKyAgICAgICB1bnNpZ25lZCBpbnQg
aTsKPiA+ICsKPiA+ICsgICAgICAgZm9yIChpID0gMDsgaSA8IE5FVERFVl9GRUFUVVJFX0RXT1JE
UzsgaSsrKQo+ID4gKyAgICAgICAgICAgICAgIGRzdFtpXSA9IGFbaV0gXiBiW2ldOwo+ID4gK30K
PiA+ICsKPiA+ICtzdGF0aWMgaW5saW5lIHZvaWQgbmV0ZGV2X2ZlYXR1cmVzX3NldChuZXRkZXZf
ZmVhdHVyZXNfdCAqZHN0LAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgdW5zaWduZWQgaW50IGJpdCkKPiA+ICt7Cj4gPiArICAgICAgIGRzdFtiaXQgLyA2NF0gfD0g
X19ORVRJRl9GX0JJVChiaXQpOwo+ID4gK30KPiA+ICsKPiA+ICtzdGF0aWMgaW5saW5lIGJvb2wg
bmV0ZGV2X2ZlYXR1cmVzX2VxdWFsKGNvbnN0IG5ldGRldl9mZWF0dXJlc190ICphLAo+ID4gKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXRkZXZfZmVhdHVy
ZXNfdCAqYikKPiA+ICt7Cj4gPiArICAgICAgIHVuc2lnbmVkIGludCBpOwo+ID4gKwo+ID4gKyAg
ICAgICBmb3IgKGkgPSAwOyBpIDwgTkVUREVWX0ZFQVRVUkVfRFdPUkRTOyBpKyspCj4gPiArICAg
ICAgICAgICAgICAgaWYgKGFbaV0gIT0gYltpXSkKPiA+ICsgICAgICAgICAgICAgICAgICAgICAg
IHJldHVybiBmYWxzZTsKPiA+ICsKPiA+ICsgICAgICAgcmV0dXJuIHRydWU7Cj4gPiArfQo+ID4g
Kwo+ID4gK3N0YXRpYyBpbmxpbmUgdm9pZCBuZXRkZXZfZmVhdHVyZXNfZW1wdHkobmV0ZGV2X2Zl
YXR1cmVzX3QgKnNyYykKPiA+ICt7Cj4gPiArICAgICAgIHVuc2lnbmVkIGludCBpOwo+ID4gKwo+
ID4gKyAgICAgICBmb3IgKGkgPSAwOyBpIDwgTkVUREVWX0ZFQVRVUkVfRFdPUkRTOyBpKyspCj4g
PiArICAgICAgICAgICAgICAgaWYgKHNyY1tpXSkKPiA+ICsgICAgICAgICAgICAgICAgICAgICAg
IHJldHVybiBmYWxzZTsKPiA+ICsKPiA+ICsgICAgICAgcmV0dXJuIHRydWU7Cj4gPiArfQo+ID4g
Kwo+ID4gK3N0YXRpYyBpbmxpbmUgdm9pZCBuZXRkZXZfZmVhdHVyZXNfZXRodG9vbF9iaXRzKG5l
dGRldl9mZWF0dXJlc190ICpkc3QpCj4gPiArewo+ID4gKyAgICAgICB1bnNpZ25lZCBpbnQgaTsK
PiA+ICsKPiA+ICsgICAgICAgZm9yIChpID0gMDsgaSA8IE5FVERFVl9GRUFUVVJFX0RXT1JEUzsg
aSsrKSB7Cj4gPiArICAgICAgICAgICAgICAgaWYgKE5FVERFVl9GRUFUVVJFX0NPVU5UID49IChp
ICsgMSkgKiA2NCkKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgIGRzdFtpXSA9IEdFTk1BU0tf
VUxMKDYzLCAwKTsKPiA+ICsgICAgICAgICAgICAgICBlbHNlCj4gPiArICAgICAgICAgICAgICAg
ICAgICAgICBkc3RbaV0gPSBHRU5NQVNLX1VMTChORVRERVZfRkVBVFVSRV9DT1VOVCAtIGkgKiA2
NCwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
MCk7Cj4gPiArICAgICAgIH0KPiA+ICsgICAgICAgZHN0WzBdICY9IH5ORVRJRl9GX05FVkVSX0NI
QU5HRTsKPiA+ICt9Cj4gPiArCj4gPiAgI2VuZGlmIC8qIF9MSU5VWF9ORVRERVZfRkVBVFVSRVNf
SCAqLwo+ID4gZGlmZiAtLWdpdCBhL2luY2x1ZGUvbGludXgvbmV0ZGV2aWNlLmggYi9pbmNsdWRl
L2xpbnV4L25ldGRldmljZS5oCj4gPiBpbmRleCBlYWY1YmIwLi40YTI5NDg3IDEwMDY0NAo+ID4g
LS0tIGEvaW5jbHVkZS9saW51eC9uZXRkZXZpY2UuaAo+ID4gKysrIGIvaW5jbHVkZS9saW51eC9u
ZXRkZXZpY2UuaAo+ID4gQEAgLTEzNDcsOSArMTM0Nyw5IEBAIHN0cnVjdCBuZXRfZGV2aWNlX29w
cyB7Cj4gPiAgICAgICAgIGludCAgICAgICAgICAgICAgICAgICAgICgqbmRvX3N0b3ApKHN0cnVj
dCBuZXRfZGV2aWNlICpkZXYpOwo+ID4gICAgICAgICBuZXRkZXZfdHhfdCAgICAgICAgICAgICAo
Km5kb19zdGFydF94bWl0KShzdHJ1Y3Qgc2tfYnVmZiAqc2tiLAo+ID4gICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgbmV0X2RldmljZSAqZGV2
KTsKPiA+IC0gICAgICAgbmV0ZGV2X2ZlYXR1cmVzX3QgICAgICAgKCpuZG9fZmVhdHVyZXNfY2hl
Y2spKHN0cnVjdCBza19idWZmICpza2IsCj4gPiArICAgICAgIHZvaWQgICAgICAgICAgICAgICAg
ICAgICgqbmRvX2ZlYXR1cmVzX2NoZWNrKShzdHJ1Y3Qgc2tfYnVmZiAqc2tiLAo+ID4gICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IG5l
dF9kZXZpY2UgKmRldiwKPiA+IC0KPiA+IG5ldGRldl9mZWF0dXJlc190IGZlYXR1cmVzKTsKPiA+
ICsKPiA+IG5ldGRldl9mZWF0dXJlc190ICpmZWF0dXJlcyk7Cj4gPiAgICAgICAgIHUxNiAgICAg
ICAgICAgICAgICAgICAgICgqbmRvX3NlbGVjdF9xdWV1ZSkoc3RydWN0IG5ldF9kZXZpY2UgKmRl
diwKPiA+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBzdHJ1Y3Qgc2tfYnVmZiAqc2tiLAo+ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBuZXRfZGV2aWNlICpzYl9kZXYpOwo+ID4gQEAg
LTE0NjcsMTAgKzE0NjcsMTAgQEAgc3RydWN0IG5ldF9kZXZpY2Vfb3BzIHsKPiA+ICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvb2wgYWxsX3Ns
YXZlcyk7Cj4gPiAgICAgICAgIHN0cnVjdCBuZXRfZGV2aWNlKiAgICAgICgqbmRvX3NrX2dldF9s
b3dlcl9kZXYpKHN0cnVjdCBuZXRfZGV2aWNlICpkZXYsCj4gPiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBzb2NrICpzayk7Cj4g
PiAtICAgICAgIG5ldGRldl9mZWF0dXJlc190ICAgICAgICgqbmRvX2ZpeF9mZWF0dXJlcykoc3Ry
dWN0IG5ldF9kZXZpY2UgKmRldiwKPiA+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBuZXRkZXZfZmVhdHVyZXNfdCBmZWF0dXJlcyk7Cj4gPiArICAg
ICAgIHZvaWQgICAgICAgICAgICAgICAgICAgICgqbmRvX2ZpeF9mZWF0dXJlcykoc3RydWN0IG5l
dF9kZXZpY2UgKmRldiwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBuZXRkZXZfZmVhdHVyZXNfdAo+ID4gKmZlYXR1cmVzKTsKPiA+ICAgICAg
ICAgaW50ICAgICAgICAgICAgICAgICAgICAgKCpuZG9fc2V0X2ZlYXR1cmVzKShzdHJ1Y3QgbmV0
X2RldmljZSAqZGV2LAo+ID4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIG5ldGRldl9mZWF0dXJlc190IGZlYXR1cmVzKTsKPiA+ICsgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXRkZXZfZmVhdHVyZXNf
dAo+ID4gKmZlYXR1cmVzKTsKPiA+ICAgICAgICAgaW50ICAgICAgICAgICAgICAgICAgICAgKCpu
ZG9fbmVpZ2hfY29uc3RydWN0KShzdHJ1Y3QgbmV0X2RldmljZSAqZGV2LAo+ID4gICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBuZWln
aGJvdXIgKm4pOwo+ID4gICAgICAgICB2b2lkICAgICAgICAgICAgICAgICAgICAoKm5kb19uZWln
aF9kZXN0cm95KShzdHJ1Y3QgbmV0X2RldmljZSAqZGV2LAo+ID4gQEAgLTE5NzgsMTIgKzE5Nzgs
MTIgQEAgc3RydWN0IG5ldF9kZXZpY2Ugewo+ID4gICAgICAgICB1bnNpZ25lZCBzaG9ydCAgICAg
ICAgICBuZWVkZWRfaGVhZHJvb207Cj4gPiAgICAgICAgIHVuc2lnbmVkIHNob3J0ICAgICAgICAg
IG5lZWRlZF90YWlscm9vbTsKPiA+Cj4gPiAtICAgICAgIG5ldGRldl9mZWF0dXJlc190ICAgICAg
IGZlYXR1cmVzOwo+ID4gLSAgICAgICBuZXRkZXZfZmVhdHVyZXNfdCAgICAgICBod19mZWF0dXJl
czsKPiA+IC0gICAgICAgbmV0ZGV2X2ZlYXR1cmVzX3QgICAgICAgd2FudGVkX2ZlYXR1cmVzOwo+
ID4gLSAgICAgICBuZXRkZXZfZmVhdHVyZXNfdCAgICAgICB2bGFuX2ZlYXR1cmVzOwo+ID4gLSAg
ICAgICBuZXRkZXZfZmVhdHVyZXNfdCAgICAgICBod19lbmNfZmVhdHVyZXM7Cj4gPiAtICAgICAg
IG5ldGRldl9mZWF0dXJlc190ICAgICAgIG1wbHNfZmVhdHVyZXM7Cj4gPiArICAgICAgIG5ldGRl
dl9mZWF0dXJlc190ICAgICAgIGZlYXR1cmVzW05FVERFVl9GRUFUVVJFX0RXT1JEU107Cj4gPiAr
ICAgICAgIG5ldGRldl9mZWF0dXJlc190ICAgICAgIGh3X2ZlYXR1cmVzW05FVERFVl9GRUFUVVJF
X0RXT1JEU107Cj4gPiArICAgICAgIG5ldGRldl9mZWF0dXJlc190ICAgICAgIHdhbnRlZF9mZWF0
dXJlc1tORVRERVZfRkVBVFVSRV9EV09SRFNdOwo+ID4gKyAgICAgICBuZXRkZXZfZmVhdHVyZXNf
dCAgICAgICB2bGFuX2ZlYXR1cmVzW05FVERFVl9GRUFUVVJFX0RXT1JEU107Cj4gPiArICAgICAg
IG5ldGRldl9mZWF0dXJlc190ICAgICAgIGh3X2VuY19mZWF0dXJlc1tORVRERVZfRkVBVFVSRV9E
V09SRFNdOwo+ID4gKyAgICAgICBuZXRkZXZfZmVhdHVyZXNfdCAgICAgICBtcGxzX2ZlYXR1cmVz
W05FVERFVl9GRUFUVVJFX0RXT1JEU107Cj4gPiAgICAgICAgIG5ldGRldl9mZWF0dXJlc190ICAg
ICAgIGdzb19wYXJ0aWFsX2ZlYXR1cmVzOwo+ID4KPiA+ICAgICAgICAgdW5zaWduZWQgaW50ICAg
ICAgICAgICAgbWluX210dTsKPiA+IEBAIC00OTg2LDEwICs0OTg2LDExIEBAIHN0YXRpYyBpbmxp
bmUgbmV0ZGV2X2ZlYXR1cmVzX3QKPiA+IG5ldGRldl9pbnRlcnNlY3RfZmVhdHVyZXMobmV0ZGV2
X2ZlYXR1cmVzX3QgZjEsCj4gPiAgICAgICAgIHJldHVybiBmMSAmIGYyOwo+ID4gIH0KPiA+Cj4g
PiAtc3RhdGljIGlubGluZSBuZXRkZXZfZmVhdHVyZXNfdCBuZXRkZXZfZ2V0X3dhbnRlZF9mZWF0
dXJlcygKPiA+IC0gICAgICAgc3RydWN0IG5ldF9kZXZpY2UgKmRldikKPiA+ICtzdGF0aWMgaW5s
aW5lIHZvaWQgbmV0ZGV2X2dldF93YW50ZWRfZmVhdHVyZXMoc3RydWN0IG5ldF9kZXZpY2UgKmRl
diwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXRk
ZXZfZmVhdHVyZXNfdCAqd2FudGVkKQo+ID4gIHsKPiA+IC0gICAgICAgcmV0dXJuIChkZXYtPmZl
YXR1cmVzICYgfmRldi0+aHdfZmVhdHVyZXMpIHwgZGV2LT53YW50ZWRfZmVhdHVyZXM7Cj4gPiAr
ICAgICAgIG5ldGRldl9mZWF0dXJlc19hbmRub3Qod2FudGVkLCBkZXYtPmZlYXR1cmVzLCBkZXYt
Pmh3X2ZlYXR1cmVzKTsKPiA+ICsgICAgICAgbmV0ZGV2X2ZlYXR1cmVzX29yKHdhbnRlZCwgd2Fu
dGVkLCBkZXYtPndhbnRlZF9mZWF0dXJlcyk7Cj4gPiAgfQo+ID4gIG5ldGRldl9mZWF0dXJlc190
IG5ldGRldl9pbmNyZW1lbnRfZmVhdHVyZXMobmV0ZGV2X2ZlYXR1cmVzX3QgYWxsLAo+ID4gICAg
ICAgICBuZXRkZXZfZmVhdHVyZXNfdCBvbmUsIG5ldGRldl9mZWF0dXJlc190IG1hc2spOwo+ID4g
QEAgLTUwMTQsNyArNTAxNSw3IEBAIHZvaWQgbmV0aWZfc3RhY2tlZF90cmFuc2Zlcl9vcGVyc3Rh
dGUoY29uc3QKPiA+IHN0cnVjdCBuZXRfZGV2aWNlICpyb290ZGV2LAo+ID4gIG5ldGRldl9mZWF0
dXJlc190IHBhc3N0aHJ1X2ZlYXR1cmVzX2NoZWNrKHN0cnVjdCBza19idWZmICpza2IsCj4gPiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgbmV0X2Rldmlj
ZSAqZGV2LAo+ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV0
ZGV2X2ZlYXR1cmVzX3QgZmVhdHVyZXMpOwo+ID4gLW5ldGRldl9mZWF0dXJlc190IG5ldGlmX3Nr
Yl9mZWF0dXJlcyhzdHJ1Y3Qgc2tfYnVmZiAqc2tiKTsKPiA+ICt2b2lkIG5ldGlmX3NrYl9mZWF0
dXJlcyhzdHJ1Y3Qgc2tfYnVmZiAqc2tiLCBuZXRkZXZfZmVhdHVyZXNfdCAqZmVhdHVyZXMpOwo+
ID4KPiA+ICBzdGF0aWMgaW5saW5lIGJvb2wgbmV0X2dzb19vayhuZXRkZXZfZmVhdHVyZXNfdCBm
ZWF0dXJlcywgaW50IGdzb190eXBlKQo+ID4gIHsKPiA+IGRpZmYgLS1naXQgYS9uZXQvODAyMXEv
dmxhbi5jIGIvbmV0LzgwMjFxL3ZsYW4uYwo+ID4gaW5kZXggNGNkZjg0MS4uN2Q3NzY5MiAxMDA2
NDQKPiA+IC0tLSBhL25ldC84MDIxcS92bGFuLmMKPiA+ICsrKyBiL25ldC84MDIxcS92bGFuLmMK
PiA+IEBAIC0zMjgsNyArMzI4LDcgQEAgc3RhdGljIHZvaWQgdmxhbl90cmFuc2Zlcl9mZWF0dXJl
cyhzdHJ1Y3QgbmV0X2RldmljZSAqZGV2LAo+ID4gICAgICAgICB2bGFuZGV2LT5nc29fbWF4X3Np
emUgPSBkZXYtPmdzb19tYXhfc2l6ZTsKPiA+ICAgICAgICAgdmxhbmRldi0+Z3NvX21heF9zZWdz
ID0gZGV2LT5nc29fbWF4X3NlZ3M7Cj4gPgo+ID4gLSAgICAgICBpZiAodmxhbl9od19vZmZsb2Fk
X2NhcGFibGUoZGV2LT5mZWF0dXJlcywgdmxhbi0+dmxhbl9wcm90bykpCj4gPiArICAgICAgIGlm
ICh2bGFuX2h3X29mZmxvYWRfY2FwYWJsZShkZXYtPmZlYXR1cmVzWzBdLCB2bGFuLT52bGFuX3By
b3RvKSkKPiA+ICAgICAgICAgICAgICAgICB2bGFuZGV2LT5oYXJkX2hlYWRlcl9sZW4gPSBkZXYt
PmhhcmRfaGVhZGVyX2xlbjsKPiA+ICAgICAgICAgZWxzZQo+ID4gICAgICAgICAgICAgICAgIHZs
YW5kZXYtPmhhcmRfaGVhZGVyX2xlbiA9IGRldi0+aGFyZF9oZWFkZXJfbGVuICsgVkxBTl9ITEVO
Owo+ID4gQEAgLTMzOSw3ICszMzksNyBAQCBzdGF0aWMgdm9pZCB2bGFuX3RyYW5zZmVyX2ZlYXR1
cmVzKHN0cnVjdCBuZXRfZGV2aWNlICpkZXYsCj4gPgo+ID4gICAgICAgICB2bGFuZGV2LT5wcml2
X2ZsYWdzICY9IH5JRkZfWE1JVF9EU1RfUkVMRUFTRTsKPiA+ICAgICAgICAgdmxhbmRldi0+cHJp
dl9mbGFncyB8PSAodmxhbi0+cmVhbF9kZXYtPnByaXZfZmxhZ3MgJgo+ID4gSUZGX1hNSVRfRFNU
X1JFTEVBU0UpOwo+ID4gLSAgICAgICB2bGFuZGV2LT5od19lbmNfZmVhdHVyZXMgPSB2bGFuX3Ru
bF9mZWF0dXJlcyh2bGFuLT5yZWFsX2Rldik7Cj4gPiArICAgICAgIHZsYW5kZXYtPmh3X2VuY19m
ZWF0dXJlc1swXSA9IHZsYW5fdG5sX2ZlYXR1cmVzKHZsYW4tPnJlYWxfZGV2KTsKPiA+Cj4gPiAg
ICAgICAgIG5ldGRldl91cGRhdGVfZmVhdHVyZXModmxhbmRldik7Cj4gPiAgfQo+ID4gZGlmZiAt
LWdpdCBhL25ldC84MDIxcS92bGFuLmggYi9uZXQvODAyMXEvdmxhbi5oCj4gPiBpbmRleCAxYTcw
NWE0Li40ZTc4NGExIDEwMDY0NAo+ID4gLS0tIGEvbmV0LzgwMjFxL3ZsYW4uaAo+ID4gKysrIGIv
bmV0LzgwMjFxL3ZsYW4uaAo+ID4gQEAgLTEwNyw3ICsxMDcsNyBAQCBzdGF0aWMgaW5saW5lIG5l
dGRldl9mZWF0dXJlc190Cj4gPiB2bGFuX3RubF9mZWF0dXJlcyhzdHJ1Y3QgbmV0X2RldmljZSAq
cmVhbF9kZXYpCj4gPiAgewo+ID4gICAgICAgICBuZXRkZXZfZmVhdHVyZXNfdCByZXQ7Cj4gPgo+
ID4gLSAgICAgICByZXQgPSByZWFsX2Rldi0+aHdfZW5jX2ZlYXR1cmVzICYKPiA+ICsgICAgICAg
cmV0ID0gcmVhbF9kZXYtPmh3X2VuY19mZWF0dXJlc1swXSAmCj4gPiAgICAgICAgICAgICAgIChO
RVRJRl9GX0NTVU1fTUFTSyB8IE5FVElGX0ZfR1NPX1NPRlRXQVJFIHwKPiA+ICAgICAgICAgICAg
ICAgIE5FVElGX0ZfR1NPX0VOQ0FQX0FMTCk7Cj4gPgo+ID4gZGlmZiAtLWdpdCBhL25ldC84MDIx
cS92bGFuX2Rldi5jIGIvbmV0LzgwMjFxL3ZsYW5fZGV2LmMKPiA+IGluZGV4IGEwMzY3YjMuLjZk
NDk3NjEgMTAwNjQ0Cj4gPiAtLS0gYS9uZXQvODAyMXEvdmxhbl9kZXYuYwo+ID4gKysrIGIvbmV0
LzgwMjFxL3ZsYW5fZGV2LmMKPiA+IEBAIC01NjYsMjEgKzU2NiwyMSBAQCBzdGF0aWMgaW50IHZs
YW5fZGV2X2luaXQoc3RydWN0IG5ldF9kZXZpY2UgKmRldikKPiA+ICAgICAgICAgaWYgKHZsYW4t
PmZsYWdzICYgVkxBTl9GTEFHX0JSSURHRV9CSU5ESU5HKQo+ID4gICAgICAgICAgICAgICAgIGRl
di0+c3RhdGUgfD0gKDEgPDwgX19MSU5LX1NUQVRFX05PQ0FSUklFUik7Cj4gPgo+ID4gLSAgICAg
ICBkZXYtPmh3X2ZlYXR1cmVzID0gTkVUSUZfRl9IV19DU1VNIHwgTkVUSUZfRl9TRyB8Cj4gPiAt
ICAgICAgICAgICAgICAgICAgICAgICAgICBORVRJRl9GX0ZSQUdMSVNUIHwgTkVUSUZfRl9HU09f
U09GVFdBUkUgfAo+ID4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgTkVUSUZfRl9HU09fRU5D
QVBfQUxMIHwKPiA+IC0gICAgICAgICAgICAgICAgICAgICAgICAgIE5FVElGX0ZfSElHSERNQSB8
IE5FVElGX0ZfU0NUUF9DUkMgfAo+ID4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgTkVUSUZf
Rl9BTExfRkNPRTsKPiA+ICsgICAgICAgZGV2LT5od19mZWF0dXJlc1swXSA9IE5FVElGX0ZfSFdf
Q1NVTSB8IE5FVElGX0ZfU0cgfAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTkVU
SUZfRl9GUkFHTElTVCB8IE5FVElGX0ZfR1NPX1NPRlRXQVJFIHwKPiA+ICsgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIE5FVElGX0ZfR1NPX0VOQ0FQX0FMTCB8Cj4gPiArICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBORVRJRl9GX0hJR0hETUEgfCBORVRJRl9GX1NDVFBfQ1JDIHwKPiA+
ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5FVElGX0ZfQUxMX0ZDT0U7Cj4gPgo+ID4g
LSAgICAgICBkZXYtPmZlYXR1cmVzIHw9IGRldi0+aHdfZmVhdHVyZXMgfCBORVRJRl9GX0xMVFg7
Cj4gPiArICAgICAgIGRldi0+ZmVhdHVyZXNbMF0gfD0gZGV2LT5od19mZWF0dXJlc1swXSB8IE5F
VElGX0ZfTExUWDsKPiA+ICAgICAgICAgZGV2LT5nc29fbWF4X3NpemUgPSByZWFsX2Rldi0+Z3Nv
X21heF9zaXplOwo+ID4gICAgICAgICBkZXYtPmdzb19tYXhfc2VncyA9IHJlYWxfZGV2LT5nc29f
bWF4X3NlZ3M7Cj4gPiAtICAgICAgIGlmIChkZXYtPmZlYXR1cmVzICYgTkVUSUZfRl9WTEFOX0ZF
QVRVUkVTKQo+ID4gKyAgICAgICBpZiAoZGV2LT5mZWF0dXJlc1swXSAmIE5FVElGX0ZfVkxBTl9G
RUFUVVJFUykKPiA+ICAgICAgICAgICAgICAgICBuZXRkZXZfd2FybihyZWFsX2RldiwgIlZMQU4g
ZmVhdHVyZXMgYXJlIHNldAo+ID4gaW5jb3JyZWN0bHkuICBRLWluLVEgY29uZmlndXJhdGlvbnMg
bWF5IG5vdCB3b3JrIGNvcnJlY3RseS5cbiIpOwo+ID4KPiA+IC0gICAgICAgZGV2LT52bGFuX2Zl
YXR1cmVzID0gcmVhbF9kZXYtPnZsYW5fZmVhdHVyZXMgJiB+TkVUSUZfRl9BTExfRkNPRTsKPiA+
IC0gICAgICAgZGV2LT5od19lbmNfZmVhdHVyZXMgPSB2bGFuX3RubF9mZWF0dXJlcyhyZWFsX2Rl
dik7Cj4gPiAtICAgICAgIGRldi0+bXBsc19mZWF0dXJlcyA9IHJlYWxfZGV2LT5tcGxzX2ZlYXR1
cmVzOwo+ID4gKyAgICAgICBkZXYtPnZsYW5fZmVhdHVyZXNbMF0gPSByZWFsX2Rldi0+dmxhbl9m
ZWF0dXJlc1swXSAmIH5ORVRJRl9GX0FMTF9GQ09FOwo+ID4gKyAgICAgICBkZXYtPmh3X2VuY19m
ZWF0dXJlc1swXSA9IHZsYW5fdG5sX2ZlYXR1cmVzKHJlYWxfZGV2KTsKPiA+ICsgICAgICAgbmV0
ZGV2X2ZlYXR1cmVzX2NvcHkoZGV2LT5tcGxzX2ZlYXR1cmVzLCByZWFsX2Rldi0+bXBsc19mZWF0
dXJlcyk7Cj4gPgo+ID4gICAgICAgICAvKiBpcHY2IHNoYXJlZCBjYXJkIHJlbGF0ZWQgc3R1ZmYg
Ki8KPiA+ICAgICAgICAgZGV2LT5kZXZfaWQgPSByZWFsX2Rldi0+ZGV2X2lkOwo+ID4gQEAgLTYz
MywyNyArNjMzLDMwIEBAIHZvaWQgdmxhbl9kZXZfdW5pbml0KHN0cnVjdCBuZXRfZGV2aWNlICpk
ZXYpCj4gPiAgICAgICAgIH0KPiA+ICB9Cj4gPgo+ID4gLXN0YXRpYyBuZXRkZXZfZmVhdHVyZXNf
dCB2bGFuX2Rldl9maXhfZmVhdHVyZXMoc3RydWN0IG5ldF9kZXZpY2UgKmRldiwKPiA+IC0gICAg
ICAgbmV0ZGV2X2ZlYXR1cmVzX3QgZmVhdHVyZXMpCj4gPiArc3RhdGljIHZvaWQgdmxhbl9kZXZf
Zml4X2ZlYXR1cmVzKHN0cnVjdCBuZXRfZGV2aWNlICpkZXYsCj4gPiArICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgbmV0ZGV2X2ZlYXR1cmVzX3QgKmZlYXR1cmVzKQo+ID4gIHsKPiA+
ICAgICAgICAgc3RydWN0IG5ldF9kZXZpY2UgKnJlYWxfZGV2ID0gdmxhbl9kZXZfcHJpdihkZXYp
LT5yZWFsX2RldjsKPiA+IC0gICAgICAgbmV0ZGV2X2ZlYXR1cmVzX3Qgb2xkX2ZlYXR1cmVzID0g
ZmVhdHVyZXM7Cj4gPiAtICAgICAgIG5ldGRldl9mZWF0dXJlc190IGxvd2VyX2ZlYXR1cmVzOwo+
ID4gKyAgICAgICBuZXRkZXZfZmVhdHVyZXNfdCBsb3dlcl9mZWF0dXJlc1tORVRERVZfRkVBVFVS
RV9EV09SRFNdOwo+ID4gKyAgICAgICBuZXRkZXZfZmVhdHVyZXNfdCBvbGRfZmVhdHVyZXNbTkVU
REVWX0ZFQVRVUkVfRFdPUkRTXTsKPiA+Cj4gPiAtICAgICAgIGxvd2VyX2ZlYXR1cmVzID0gbmV0
ZGV2X2ludGVyc2VjdF9mZWF0dXJlcygocmVhbF9kZXYtPnZsYW5fZmVhdHVyZXMgfAo+ID4gLSAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5FVElGX0Zf
UlhDU1VNKSwKPiA+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHJlYWxfZGV2LT5mZWF0dXJlcyk7Cj4gPiArICAgICAgIG5ldGRldl9mZWF0dXJlc19j
b3B5KGxvd2VyX2ZlYXR1cmVzLCBmZWF0dXJlcyk7Cj4gPiArCj4gPiArICAgICAgIGxvd2VyX2Zl
YXR1cmVzWzBdID0KPiA+ICsgICAgICAgICAgICAgICBuZXRkZXZfaW50ZXJzZWN0X2ZlYXR1cmVz
KChyZWFsX2Rldi0+dmxhbl9mZWF0dXJlc1swXSB8Cj4gPiArICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgTkVUSUZfRl9SWENTVU0pLAo+ID4gKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhbF9kZXYtPmZlYXR1cmVzWzBdKTsKPiA+Cj4g
PiAgICAgICAgIC8qIEFkZCBIV19DU1VNIHNldHRpbmcgdG8gcHJlc2VydmUgdXNlciBhYmlsaXR5
IHRvIGNvbnRyb2wKPiA+ICAgICAgICAgICogY2hlY2tzdW0gb2ZmbG9hZCBvbiB0aGUgdmxhbiBk
ZXZpY2UuCj4gPiAgICAgICAgICAqLwo+ID4gLSAgICAgICBpZiAobG93ZXJfZmVhdHVyZXMgJiAo
TkVUSUZfRl9JUF9DU1VNfE5FVElGX0ZfSVBWNl9DU1VNKSkKPiA+IC0gICAgICAgICAgICAgICBs
b3dlcl9mZWF0dXJlcyB8PSBORVRJRl9GX0hXX0NTVU07Cj4gPiAtICAgICAgIGZlYXR1cmVzID0g
bmV0ZGV2X2ludGVyc2VjdF9mZWF0dXJlcyhmZWF0dXJlcywgbG93ZXJfZmVhdHVyZXMpOwo+ID4g
LSAgICAgICBmZWF0dXJlcyB8PSBvbGRfZmVhdHVyZXMgJiAoTkVUSUZfRl9TT0ZUX0ZFQVRVUkVT
IHwKPiA+IE5FVElGX0ZfR1NPX1NPRlRXQVJFKTsKPiA+IC0gICAgICAgZmVhdHVyZXMgfD0gTkVU
SUZfRl9MTFRYOwo+ID4gKyAgICAgICBpZiAobG93ZXJfZmVhdHVyZXNbMF0gJiAoTkVUSUZfRl9J
UF9DU1VNIHwgTkVUSUZfRl9JUFY2X0NTVU0pKQo+ID4gKyAgICAgICAgICAgICAgIGxvd2VyX2Zl
YXR1cmVzWzBdIHw9IE5FVElGX0ZfSFdfQ1NVTTsKPiA+Cj4gPiAtICAgICAgIHJldHVybiBmZWF0
dXJlczsKPiA+ICsgICAgICAgZmVhdHVyZXNbMF0gPSBuZXRkZXZfaW50ZXJzZWN0X2ZlYXR1cmVz
KGZlYXR1cmVzWzBdLCBsb3dlcl9mZWF0dXJlc1swXSk7Cj4gPiArICAgICAgIGZlYXR1cmVzWzBd
IHw9IG9sZF9mZWF0dXJlc1swXSAmCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAoTkVUSUZf
Rl9TT0ZUX0ZFQVRVUkVTIHwgTkVUSUZfRl9HU09fU09GVFdBUkUpOwo+ID4gKyAgICAgICBmZWF0
dXJlc1swXSB8PSBORVRJRl9GX0xMVFg7Cj4gPiAgfQo+ID4KPiA+ICBzdGF0aWMgaW50IHZsYW5f
ZXRodG9vbF9nZXRfbGlua19rc2V0dGluZ3Moc3RydWN0IG5ldF9kZXZpY2UgKmRldiwKPiA+IGRp
ZmYgLS1naXQgYS9uZXQvY29yZS9kZXYuYyBiL25ldC9jb3JlL2Rldi5jCj4gPiBpbmRleCBjMjUz
YzJhLi43MDY2YmYzIDEwMDY0NAo+ID4gLS0tIGEvbmV0L2NvcmUvZGV2LmMKPiA+ICsrKyBiL25l
dC9jb3JlL2Rldi5jCj4gPiBAQCAtMTc2NSw3ICsxNzY1LDcgQEAgdm9pZCBkZXZfZGlzYWJsZV9s
cm8oc3RydWN0IG5ldF9kZXZpY2UgKmRldikKPiA+ICAgICAgICAgZGV2LT53YW50ZWRfZmVhdHVy
ZXMgJj0gfk5FVElGX0ZfTFJPOwo+ID4gICAgICAgICBuZXRkZXZfdXBkYXRlX2ZlYXR1cmVzKGRl
dik7Cj4gPgo+ID4gLSAgICAgICBpZiAodW5saWtlbHkoZGV2LT5mZWF0dXJlcyAmIE5FVElGX0Zf
TFJPKSkKPiA+ICsgICAgICAgaWYgKHVubGlrZWx5KGRldi0+ZmVhdHVyZXNbMF0gJiBORVRJRl9G
X0xSTykpCj4gPiAgICAgICAgICAgICAgICAgbmV0ZGV2X1dBUk4oZGV2LCAiZmFpbGVkIHRvIGRp
c2FibGUgTFJPIVxuIik7Cj4gPgo+ID4gICAgICAgICBuZXRkZXZfZm9yX2VhY2hfbG93ZXJfZGV2
KGRldiwgbG93ZXJfZGV2LCBpdGVyKQo+ID4gQEAgLTE3ODYsNyArMTc4Niw3IEBAIHN0YXRpYyB2
b2lkIGRldl9kaXNhYmxlX2dyb19odyhzdHJ1Y3QgbmV0X2RldmljZSAqZGV2KQo+ID4gICAgICAg
ICBkZXYtPndhbnRlZF9mZWF0dXJlcyAmPSB+TkVUSUZfRl9HUk9fSFc7Cj4gPiAgICAgICAgIG5l
dGRldl91cGRhdGVfZmVhdHVyZXMoZGV2KTsKPiA+Cj4gPiAtICAgICAgIGlmICh1bmxpa2VseShk
ZXYtPmZlYXR1cmVzICYgTkVUSUZfRl9HUk9fSFcpKQo+ID4gKyAgICAgICBpZiAodW5saWtlbHko
ZGV2LT5mZWF0dXJlc1swXSAmIE5FVElGX0ZfR1JPX0hXKSkKPiA+ICAgICAgICAgICAgICAgICBu
ZXRkZXZfV0FSTihkZXYsICJmYWlsZWQgdG8gZGlzYWJsZSBHUk9fSFchXG4iKTsKPiA+ICB9Cj4g
Pgo+ID4gQEAgLTMyNzYsNyArMzI3Niw3IEBAIHN0YXRpYyB2b2lkIHNrYl93YXJuX2JhZF9vZmZs
b2FkKGNvbnN0IHN0cnVjdAo+ID4gc2tfYnVmZiAqc2tiKQo+ID4gICAgICAgICB9Cj4gPiAgICAg
ICAgIHNrYl9kdW1wKEtFUk5fV0FSTklORywgc2tiLCBmYWxzZSk7Cj4gPiAgICAgICAgIFdBUk4o
MSwgIiVzOiBjYXBzPSglcE5GLCAlcE5GKVxuIiwKPiA+IC0gICAgICAgICAgICBuYW1lLCBkZXYg
PyAmZGV2LT5mZWF0dXJlcyA6ICZudWxsX2ZlYXR1cmVzLAo+ID4gKyAgICAgICAgICAgIG5hbWUs
IGRldiA/ICZkZXYtPmZlYXR1cmVzWzBdIDogJm51bGxfZmVhdHVyZXMsCj4gPiAgICAgICAgICAg
ICAgc2tiLT5zayA/ICZza2ItPnNrLT5za19yb3V0ZV9jYXBzIDogJm51bGxfZmVhdHVyZXMpOwo+
ID4gIH0KPiA+Cj4gPiBAQCAtMzQ2Myw3ICszNDYzLDggQEAgc3RydWN0IHNrX2J1ZmYgKl9fc2ti
X2dzb19zZWdtZW50KHN0cnVjdCBza19idWZmICpza2IsCj4gPiAgICAgICAgICAgICAgICAgbmV0
ZGV2X2ZlYXR1cmVzX3QgcGFydGlhbF9mZWF0dXJlcyA9IE5FVElGX0ZfR1NPX1JPQlVTVDsKPiA+
ICAgICAgICAgICAgICAgICBzdHJ1Y3QgbmV0X2RldmljZSAqZGV2ID0gc2tiLT5kZXY7Cj4gPgo+
ID4gLSAgICAgICAgICAgICAgIHBhcnRpYWxfZmVhdHVyZXMgfD0gZGV2LT5mZWF0dXJlcyAmIGRl
di0+Z3NvX3BhcnRpYWxfZmVhdHVyZXM7Cj4gPiArICAgICAgICAgICAgICAgcGFydGlhbF9mZWF0
dXJlcyB8PQo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXYtPmZlYXR1cmVz
WzBdICYgZGV2LT5nc29fcGFydGlhbF9mZWF0dXJlczsKPiA+ICAgICAgICAgICAgICAgICBpZiAo
IXNrYl9nc29fb2soc2tiLCBmZWF0dXJlcyB8IHBhcnRpYWxfZmVhdHVyZXMpKQo+ID4gICAgICAg
ICAgICAgICAgICAgICAgICAgZmVhdHVyZXMgJj0gfk5FVElGX0ZfR1NPX1BBUlRJQUw7Cj4gPiAg
ICAgICAgIH0KPiA+IEBAIC0zNTA4LDcgKzM1MDksNyBAQCBzdGF0aWMgaW50IGlsbGVnYWxfaGln
aGRtYShzdHJ1Y3QgbmV0X2RldmljZQo+ID4gKmRldiwgc3RydWN0IHNrX2J1ZmYgKnNrYikKPiA+
ICAjaWZkZWYgQ09ORklHX0hJR0hNRU0KPiA+ICAgICAgICAgaW50IGk7Cj4gPgo+ID4gLSAgICAg
ICBpZiAoIShkZXYtPmZlYXR1cmVzICYgTkVUSUZfRl9ISUdIRE1BKSkgewo+ID4gKyAgICAgICBp
ZiAoIShkZXYtPmZlYXR1cmVzWzBdICYgTkVUSUZfRl9ISUdIRE1BKSkgewo+ID4gICAgICAgICAg
ICAgICAgIGZvciAoaSA9IDA7IGkgPCBza2Jfc2hpbmZvKHNrYiktPm5yX2ZyYWdzOyBpKyspIHsK
PiA+ICAgICAgICAgICAgICAgICAgICAgICAgIHNrYl9mcmFnX3QgKmZyYWcgPSAmc2tiX3NoaW5m
byhza2IpLT5mcmFnc1tpXTsKPiA+Cj4gPiBAQCAtMzYxMiwzNCArMzYxMywzMyBAQCBzdGF0aWMg
bmV0ZGV2X2ZlYXR1cmVzX3QKPiA+IGdzb19mZWF0dXJlc19jaGVjayhjb25zdCBzdHJ1Y3Qgc2tf
YnVmZiAqc2tiLAo+ID4gICAgICAgICByZXR1cm4gZmVhdHVyZXM7Cj4gPiAgfQo+ID4KPiA+IC1u
ZXRkZXZfZmVhdHVyZXNfdCBuZXRpZl9za2JfZmVhdHVyZXMoc3RydWN0IHNrX2J1ZmYgKnNrYikK
PiA+ICt2b2lkIG5ldGlmX3NrYl9mZWF0dXJlcyhzdHJ1Y3Qgc2tfYnVmZiAqc2tiLCBuZXRkZXZf
ZmVhdHVyZXNfdCAqZmVhdHVyZXMpCj4gPiAgewo+ID4gICAgICAgICBzdHJ1Y3QgbmV0X2Rldmlj
ZSAqZGV2ID0gc2tiLT5kZXY7Cj4gPiAtICAgICAgIG5ldGRldl9mZWF0dXJlc190IGZlYXR1cmVz
ID0gZGV2LT5mZWF0dXJlczsKPiA+Cj4gPiArICAgICAgIG5ldGRldl9mZWF0dXJlc19jb3B5KGZl
YXR1cmVzLCBkZXYtPmZlYXR1cmVzKTsKPiA+ICAgICAgICAgaWYgKHNrYl9pc19nc28oc2tiKSkK
PiA+IC0gICAgICAgICAgICAgICBmZWF0dXJlcyA9IGdzb19mZWF0dXJlc19jaGVjayhza2IsIGRl
diwgZmVhdHVyZXMpOwo+ID4gKyAgICAgICAgICAgICAgIGZlYXR1cmVzWzBdID0gZ3NvX2ZlYXR1
cmVzX2NoZWNrKHNrYiwgZGV2LCBmZWF0dXJlc1swXSk7Cj4gPgo+ID4gICAgICAgICAvKiBJZiBl
bmNhcHN1bGF0aW9uIG9mZmxvYWQgcmVxdWVzdCwgdmVyaWZ5IHdlIGFyZSB0ZXN0aW5nCj4gPiAg
ICAgICAgICAqIGhhcmR3YXJlIGVuY2Fwc3VsYXRpb24gZmVhdHVyZXMgaW5zdGVhZCBvZiBzdGFu
ZGFyZAo+ID4gICAgICAgICAgKiBmZWF0dXJlcyBmb3IgdGhlIG5ldGRldgo+ID4gICAgICAgICAg
Ki8KPiA+ICAgICAgICAgaWYgKHNrYi0+ZW5jYXBzdWxhdGlvbikKPiA+IC0gICAgICAgICAgICAg
ICBmZWF0dXJlcyAmPSBkZXYtPmh3X2VuY19mZWF0dXJlczsKPiA+ICsgICAgICAgICAgICAgICBu
ZXRkZXZfZmVhdHVyZXNfYW5kKGZlYXR1cmVzLCBkZXYtPmh3X2VuY19mZWF0dXJlcyk7Cj4gPgo+
ID4gICAgICAgICBpZiAoc2tiX3ZsYW5fdGFnZ2VkKHNrYikpCj4gPiAtICAgICAgICAgICAgICAg
ZmVhdHVyZXMgPSBuZXRkZXZfaW50ZXJzZWN0X2ZlYXR1cmVzKGZlYXR1cmVzLAo+ID4gLSAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXYtPnZsYW5f
ZmVhdHVyZXMgfAo+ID4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBORVRJRl9GX0hXX1ZMQU5fQ1RBR19UWCB8Cj4gPiAtICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5FVElGX0ZfSFdfVkxBTl9TVEFH
X1RYKTsKPiA+ICsgICAgICAgICAgICAgICBmZWF0dXJlc1swXSA9IG5ldGRldl9pbnRlcnNlY3Rf
ZmVhdHVyZXMoZmVhdHVyZXNbMF0sCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGRldi0+dmxhbl9mZWF0dXJlc1swXSB8Cj4gPiArCj4g
PiBORVRJRl9GX0hXX1ZMQU5fQ1RBR19UWCB8Cj4gPiArCj4gPiBORVRJRl9GX0hXX1ZMQU5fU1RB
R19UWCk7Cj4gPgo+ID4gICAgICAgICBpZiAoZGV2LT5uZXRkZXZfb3BzLT5uZG9fZmVhdHVyZXNf
Y2hlY2spCj4gPiAtICAgICAgICAgICAgICAgZmVhdHVyZXMgJj0gZGV2LT5uZXRkZXZfb3BzLT5u
ZG9fZmVhdHVyZXNfY2hlY2soc2tiLCBkZXYsCj4gPiAtICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZXMpOwo+ID4gKyAg
ICAgICAgICAgICAgIGRldi0+bmV0ZGV2X29wcy0+bmRvX2ZlYXR1cmVzX2NoZWNrKHNrYiwgZGV2
LCBmZWF0dXJlcyk7Cj4gPiAgICAgICAgIGVsc2UKPiA+IC0gICAgICAgICAgICAgICBmZWF0dXJl
cyAmPSBkZmx0X2ZlYXR1cmVzX2NoZWNrKHNrYiwgZGV2LCBmZWF0dXJlcyk7Cj4gPiArICAgICAg
ICAgICAgICAgZmVhdHVyZXNbMF0gJj0gZGZsdF9mZWF0dXJlc19jaGVjayhza2IsIGRldiwgZmVh
dHVyZXNbMF0pOwo+ID4KPiA+IC0gICAgICAgcmV0dXJuIGhhcm1vbml6ZV9mZWF0dXJlcyhza2Is
IGZlYXR1cmVzKTsKPiA+ICsgICAgICAgZmVhdHVyZXNbMF0gPSBoYXJtb25pemVfZmVhdHVyZXMo
c2tiLCBmZWF0dXJlc1swXSk7Cj4gPiAgfQo+ID4gIEVYUE9SVF9TWU1CT0wobmV0aWZfc2tiX2Zl
YXR1cmVzKTsKPiA+Cj4gPiBAQCAtMzcyMiwxMCArMzcyMiwxMCBAQCBFWFBPUlRfU1lNQk9MKHNr
Yl9jc3VtX2h3b2ZmbG9hZF9oZWxwKTsKPiA+Cj4gPiAgc3RhdGljIHN0cnVjdCBza19idWZmICp2
YWxpZGF0ZV94bWl0X3NrYihzdHJ1Y3Qgc2tfYnVmZiAqc2tiLCBzdHJ1Y3QKPiA+IG5ldF9kZXZp
Y2UgKmRldiwgYm9vbCAqYWdhaW4pCj4gPiAgewo+ID4gLSAgICAgICBuZXRkZXZfZmVhdHVyZXNf
dCBmZWF0dXJlczsKPiA+ICsgICAgICAgbmV0ZGV2X2ZlYXR1cmVzX3QgZmVhdHVyZXNbTkVUREVW
X0ZFQVRVUkVfRFdPUkRTXTsKPiA+Cj4gPiAtICAgICAgIGZlYXR1cmVzID0gbmV0aWZfc2tiX2Zl
YXR1cmVzKHNrYik7Cj4gPiAtICAgICAgIHNrYiA9IHZhbGlkYXRlX3htaXRfdmxhbihza2IsIGZl
YXR1cmVzKTsKPiA+ICsgICAgICAgbmV0aWZfc2tiX2ZlYXR1cmVzKHNrYiwgZmVhdHVyZXMpOwo+
ID4gKyAgICAgICBza2IgPSB2YWxpZGF0ZV94bWl0X3ZsYW4oc2tiLCBmZWF0dXJlc1swXSk7Cj4g
PiAgICAgICAgIGlmICh1bmxpa2VseSghc2tiKSkKPiA+ICAgICAgICAgICAgICAgICBnb3RvIG91
dF9udWxsOwo+ID4KPiA+IEBAIC0zNzMzLDEwICszNzMzLDEwIEBAIHN0YXRpYyBzdHJ1Y3Qgc2tf
YnVmZgo+ID4gKnZhbGlkYXRlX3htaXRfc2tiKHN0cnVjdCBza19idWZmICpza2IsIHN0cnVjdCBu
ZXRfZGV2aWNlCj4gPiAgICAgICAgIGlmICh1bmxpa2VseSghc2tiKSkKPiA+ICAgICAgICAgICAg
ICAgICBnb3RvIG91dF9udWxsOwo+ID4KPiA+IC0gICAgICAgaWYgKG5ldGlmX25lZWRzX2dzbyhz
a2IsIGZlYXR1cmVzKSkgewo+ID4gKyAgICAgICBpZiAobmV0aWZfbmVlZHNfZ3NvKHNrYiwgZmVh
dHVyZXNbMF0pKSB7Cj4gPiAgICAgICAgICAgICAgICAgc3RydWN0IHNrX2J1ZmYgKnNlZ3M7Cj4g
Pgo+ID4gLSAgICAgICAgICAgICAgIHNlZ3MgPSBza2JfZ3NvX3NlZ21lbnQoc2tiLCBmZWF0dXJl
cyk7Cj4gPiArICAgICAgICAgICAgICAgc2VncyA9IHNrYl9nc29fc2VnbWVudChza2IsIGZlYXR1
cmVzWzBdKTsKPiA+ICAgICAgICAgICAgICAgICBpZiAoSVNfRVJSKHNlZ3MpKSB7Cj4gPiAgICAg
ICAgICAgICAgICAgICAgICAgICBnb3RvIG91dF9rZnJlZV9za2I7Cj4gPiAgICAgICAgICAgICAg
ICAgfSBlbHNlIGlmIChzZWdzKSB7Cj4gPiBAQCAtMzc0NCw3ICszNzQ0LDcgQEAgc3RhdGljIHN0
cnVjdCBza19idWZmICp2YWxpZGF0ZV94bWl0X3NrYihzdHJ1Y3QKPiA+IHNrX2J1ZmYgKnNrYiwg
c3RydWN0IG5ldF9kZXZpY2UKPiA+ICAgICAgICAgICAgICAgICAgICAgICAgIHNrYiA9IHNlZ3M7
Cj4gPiAgICAgICAgICAgICAgICAgfQo+ID4gICAgICAgICB9IGVsc2Ugewo+ID4gLSAgICAgICAg
ICAgICAgIGlmIChza2JfbmVlZHNfbGluZWFyaXplKHNrYiwgZmVhdHVyZXMpICYmCj4gPiArICAg
ICAgICAgICAgICAgaWYgKHNrYl9uZWVkc19saW5lYXJpemUoc2tiLCBmZWF0dXJlc1swXSkgJiYK
PiA+ICAgICAgICAgICAgICAgICAgICAgX19za2JfbGluZWFyaXplKHNrYikpCj4gPiAgICAgICAg
ICAgICAgICAgICAgICAgICBnb3RvIG91dF9rZnJlZV9za2I7Cj4gPgo+ID4gQEAgLTM3NTksMTIg
KzM3NTksMTIgQEAgc3RhdGljIHN0cnVjdCBza19idWZmCj4gPiAqdmFsaWRhdGVfeG1pdF9za2Io
c3RydWN0IHNrX2J1ZmYgKnNrYiwgc3RydWN0IG5ldF9kZXZpY2UKPiA+ICAgICAgICAgICAgICAg
ICAgICAgICAgIGVsc2UKPiA+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2tiX3Nl
dF90cmFuc3BvcnRfaGVhZGVyKHNrYiwKPiA+Cj4gPiBza2JfY2hlY2tzdW1fc3RhcnRfb2Zmc2V0
KHNrYikpOwo+ID4gLSAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNrYl9jc3VtX2h3b2ZmbG9h
ZF9oZWxwKHNrYiwgZmVhdHVyZXMpKQo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNr
Yl9jc3VtX2h3b2ZmbG9hZF9oZWxwKHNrYiwgZmVhdHVyZXNbMF0pKQo+ID4gICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBnb3RvIG91dF9rZnJlZV9za2I7Cj4gPiAgICAgICAgICAgICAg
ICAgfQo+ID4gICAgICAgICB9Cj4gPgo+ID4gLSAgICAgICBza2IgPSB2YWxpZGF0ZV94bWl0X3hm
cm0oc2tiLCBmZWF0dXJlcywgYWdhaW4pOwo+ID4gKyAgICAgICBza2IgPSB2YWxpZGF0ZV94bWl0
X3hmcm0oc2tiLCBmZWF0dXJlc1swXSwgYWdhaW4pOwo+ID4KPiA+ICAgICAgICAgcmV0dXJuIHNr
YjsKPiA+Cj4gPiBAQCAtNDQyOSw3ICs0NDI5LDcgQEAgc2V0X3Jwc19jcHUoc3RydWN0IG5ldF9k
ZXZpY2UgKmRldiwgc3RydWN0IHNrX2J1ZmYgKnNrYiwKPiA+Cj4gPiAgICAgICAgICAgICAgICAg
LyogU2hvdWxkIHdlIHN0ZWVyIHRoaXMgZmxvdyB0byBhIGRpZmZlcmVudCBoYXJkd2FyZSBxdWV1
ZT8gKi8KPiA+ICAgICAgICAgICAgICAgICBpZiAoIXNrYl9yeF9xdWV1ZV9yZWNvcmRlZChza2Ip
IHx8ICFkZXYtPnJ4X2NwdV9ybWFwIHx8Cj4gPiAtICAgICAgICAgICAgICAgICAgICEoZGV2LT5m
ZWF0dXJlcyAmIE5FVElGX0ZfTlRVUExFKSkKPiA+ICsgICAgICAgICAgICAgICAgICAgIShkZXYt
PmZlYXR1cmVzWzBdICYgTkVUSUZfRl9OVFVQTEUpKQo+ID4gICAgICAgICAgICAgICAgICAgICAg
ICAgZ290byBvdXQ7Cj4gPiAgICAgICAgICAgICAgICAgcnhxX2luZGV4ID0gY3B1X3JtYXBfbG9v
a3VwX2luZGV4KGRldi0+cnhfY3B1X3JtYXAsIG5leHRfY3B1KTsKPiA+ICAgICAgICAgICAgICAg
ICBpZiAocnhxX2luZGV4ID09IHNrYl9nZXRfcnhfcXVldWUoc2tiKSkKPiA+IEBAIC05Nzk5LDE3
MSArOTc5OSwxNzkgQEAgc3RhdGljIHZvaWQgbmV0X3NldF90b2RvKHN0cnVjdCBuZXRfZGV2aWNl
ICpkZXYpCj4gPiAgICAgICAgIGRldl9uZXQoZGV2KS0+ZGV2X3VucmVnX2NvdW50Kys7Cj4gPiAg
fQo+ID4KPiA+IC1zdGF0aWMgbmV0ZGV2X2ZlYXR1cmVzX3QgbmV0ZGV2X3N5bmNfdXBwZXJfZmVh
dHVyZXMoc3RydWN0IG5ldF9kZXZpY2UgKmxvd2VyLAo+ID4gLSAgICAgICBzdHJ1Y3QgbmV0X2Rl
dmljZSAqdXBwZXIsIG5ldGRldl9mZWF0dXJlc190IGZlYXR1cmVzKQo+ID4gK3N0YXRpYyB2b2lk
IG5ldGRldl9zeW5jX3VwcGVyX2ZlYXR1cmVzKHN0cnVjdCBuZXRfZGV2aWNlICpsb3dlciwKPiA+
ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBuZXRfZGV2aWNl
ICp1cHBlciwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldGRl
dl9mZWF0dXJlc190ICpmZWF0dXJlcykKPiA+ICB7Cj4gPiAgICAgICAgIG5ldGRldl9mZWF0dXJl
c190IHVwcGVyX2Rpc2FibGVzID0gTkVUSUZfRl9VUFBFUl9ESVNBQkxFUzsKPiA+ICAgICAgICAg
bmV0ZGV2X2ZlYXR1cmVzX3QgZmVhdHVyZTsKPiA+ICAgICAgICAgaW50IGZlYXR1cmVfYml0Owo+
ID4gKyAgICAgICB1bnNpZ25lZCBpbnQgaTsKPiA+Cj4gPiAtICAgICAgIGZvcl9lYWNoX25ldGRl
dl9mZWF0dXJlKHVwcGVyX2Rpc2FibGVzLCBmZWF0dXJlX2JpdCkgewo+ID4gLSAgICAgICAgICAg
ICAgIGZlYXR1cmUgPSBfX05FVElGX0ZfQklUKGZlYXR1cmVfYml0KTsKPiA+IC0gICAgICAgICAg
ICAgICBpZiAoISh1cHBlci0+d2FudGVkX2ZlYXR1cmVzICYgZmVhdHVyZSkKPiA+IC0gICAgICAg
ICAgICAgICAgICAgJiYgKGZlYXR1cmVzICYgZmVhdHVyZSkpIHsKPiA+IC0gICAgICAgICAgICAg
ICAgICAgICAgIG5ldGRldl9kYmcobG93ZXIsICJEcm9wcGluZyBmZWF0dXJlICVwTkYsCj4gPiB1
cHBlciBkZXYgJXMgaGFzIGl0IG9mZi5cbiIsCj4gPiAtICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICZmZWF0dXJlLCB1cHBlci0+bmFtZSk7Cj4gPiAtICAgICAgICAgICAgICAgICAg
ICAgICBmZWF0dXJlcyAmPSB+ZmVhdHVyZTsKPiA+ICsgICAgICAgZm9yIChpID0gMDsgaSA8IE5F
VERFVl9GRUFUVVJFX0RXT1JEUzsgaSsrKSB7Cj4gPiArICAgICAgICAgICAgICAgZm9yX2VhY2hf
bmV0ZGV2X2ZlYXR1cmUodXBwZXJfZGlzYWJsZXMsIGZlYXR1cmVfYml0KSB7Cj4gPiArICAgICAg
ICAgICAgICAgICAgICAgICBmZWF0dXJlID0gX19ORVRJRl9GX0JJVChmZWF0dXJlX2JpdCk7Cj4g
PiArICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh1cHBlci0+d2FudGVkX2ZlYXR1cmVzW2ld
ICYgZmVhdHVyZSkgJiYKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAoZmVhdHVyZXNb
aV0gJiBmZWF0dXJlKSkgewo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXRk
ZXZfZGJnKGxvd2VyLCAiRHJvcHBpbmcKPiA+IGZlYXR1cmVbJXVdICVwTkYsIHVwcGVyIGRldiAl
cyBoYXMgaXQgb2ZmLlxuIiwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBpLCAmZmVhdHVyZSwgdXBwZXItPm5hbWUpOwo+ID4gKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBmZWF0dXJlc1tpXSAmPSB+ZmVhdHVyZTsKPiA+ICsgICAgICAgICAgICAg
ICAgICAgICAgIH0KPiA+ICAgICAgICAgICAgICAgICB9Cj4gPiAgICAgICAgIH0KPiA+IC0KPiA+
IC0gICAgICAgcmV0dXJuIGZlYXR1cmVzOwo+ID4gIH0KPiA+Cj4gPiAgc3RhdGljIHZvaWQgbmV0
ZGV2X3N5bmNfbG93ZXJfZmVhdHVyZXMoc3RydWN0IG5ldF9kZXZpY2UgKnVwcGVyLAo+ID4gLSAg
ICAgICBzdHJ1Y3QgbmV0X2RldmljZSAqbG93ZXIsIG5ldGRldl9mZWF0dXJlc190IGZlYXR1cmVz
KQo+ID4gKyAgICAgICBzdHJ1Y3QgbmV0X2RldmljZSAqbG93ZXIsIG5ldGRldl9mZWF0dXJlc190
ICpmZWF0dXJlcykKPiA+ICB7Cj4gPiAgICAgICAgIG5ldGRldl9mZWF0dXJlc190IHVwcGVyX2Rp
c2FibGVzID0gTkVUSUZfRl9VUFBFUl9ESVNBQkxFUzsKPiA+ICAgICAgICAgbmV0ZGV2X2ZlYXR1
cmVzX3QgZmVhdHVyZTsKPiA+ICAgICAgICAgaW50IGZlYXR1cmVfYml0Owo+ID4gKyAgICAgICB1
bnNpZ25lZCBpbnQgaTsKPiA+Cj4gPiAtICAgICAgIGZvcl9lYWNoX25ldGRldl9mZWF0dXJlKHVw
cGVyX2Rpc2FibGVzLCBmZWF0dXJlX2JpdCkgewo+ID4gLSAgICAgICAgICAgICAgIGZlYXR1cmUg
PSBfX05FVElGX0ZfQklUKGZlYXR1cmVfYml0KTsKPiA+IC0gICAgICAgICAgICAgICBpZiAoIShm
ZWF0dXJlcyAmIGZlYXR1cmUpICYmIChsb3dlci0+ZmVhdHVyZXMgJiBmZWF0dXJlKSkgewo+ID4g
LSAgICAgICAgICAgICAgICAgICAgICAgbmV0ZGV2X2RiZyh1cHBlciwgIkRpc2FibGluZyBmZWF0
dXJlICVwTkYgb24KPiA+IGxvd2VyIGRldiAlcy5cbiIsCj4gPiAtICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICZmZWF0dXJlLCBsb3dlci0+bmFtZSk7Cj4gPiAtICAgICAgICAgICAg
ICAgICAgICAgICBsb3dlci0+d2FudGVkX2ZlYXR1cmVzICY9IH5mZWF0dXJlOwo+ID4gLSAgICAg
ICAgICAgICAgICAgICAgICAgX19uZXRkZXZfdXBkYXRlX2ZlYXR1cmVzKGxvd2VyKTsKPiA+IC0K
PiA+IC0gICAgICAgICAgICAgICAgICAgICAgIGlmICh1bmxpa2VseShsb3dlci0+ZmVhdHVyZXMg
JiBmZWF0dXJlKSkKPiA+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV0ZGV2X1dB
Uk4odXBwZXIsICJmYWlsZWQgdG8gZGlzYWJsZQo+ID4gJXBORiBvbiAlcyFcbiIsCj4gPiAtICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZmZWF0dXJlLCBsb3dlci0+
bmFtZSk7Cj4gPiAtICAgICAgICAgICAgICAgICAgICAgICBlbHNlCj4gPiAtICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIG5ldGRldl9mZWF0dXJlc19jaGFuZ2UobG93ZXIpOwo+ID4gKyAg
ICAgICBmb3IgKGkgPSAwOyBpIDwgTkVUREVWX0ZFQVRVUkVfRFdPUkRTOyBpKyspIHsKPiA+ICsg
ICAgICAgICAgICAgICBmb3JfZWFjaF9uZXRkZXZfZmVhdHVyZSh1cHBlcl9kaXNhYmxlcywgZmVh
dHVyZV9iaXQpIHsKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmUgPSBfX05FVElG
X0ZfQklUKGZlYXR1cmVfYml0KTsKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGZl
YXR1cmVzW2ldICYgZmVhdHVyZSkgJiYKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAo
bG93ZXItPmZlYXR1cmVzW2ldICYgZmVhdHVyZSkpIHsKPiA+ICsgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgbmV0ZGV2X2RiZyh1cHBlciwgIkRpc2FibGluZwo+ID4gZmVhdHVyZVsldV0g
JXBORiBvbiBsb3dlciBkZXYgJXMuXG4iLAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGksICZmZWF0dXJlLCBsb3dlci0+bmFtZSk7Cj4gPiArICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGxvd2VyLT53YW50ZWRfZmVhdHVyZXNbaV0gJj0gfmZlYXR1
cmVbaV07Cj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9fbmV0ZGV2X3VwZGF0
ZV9mZWF0dXJlcyhsb3dlcik7Cj4gPiArCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGlmICh1bmxpa2VseShsb3dlci0+ZmVhdHVyZXNbaV0gJiBmZWF0dXJlKSkKPiA+ICsgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXRkZXZfV0FSTih1cHBlciwgImZh
aWxlZCB0bwo+ID4gZGlzYWJsZSBmZWF0dXJlWyV1XSAlcE5GIG9uICVzIVxuIiwKPiA+ICsgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLCAmZmVhdHVy
ZSwgbG93ZXItPm5hbWUpOwo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNl
Cj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV0ZGV2X2ZlYXR1
cmVzX2NoYW5nZShsb3dlcik7Cj4gPiArICAgICAgICAgICAgICAgICAgICAgICB9Cj4gPiAgICAg
ICAgICAgICAgICAgfQo+ID4gICAgICAgICB9Cj4gPiAgfQo+ID4KPiA+IC1zdGF0aWMgbmV0ZGV2
X2ZlYXR1cmVzX3QgbmV0ZGV2X2ZpeF9mZWF0dXJlcyhzdHJ1Y3QgbmV0X2RldmljZSAqZGV2LAo+
ID4gLSAgICAgICBuZXRkZXZfZmVhdHVyZXNfdCBmZWF0dXJlcykKPiA+ICtzdGF0aWMgdm9pZCBu
ZXRkZXZfZml4X2ZlYXR1cmVzKHN0cnVjdCBuZXRfZGV2aWNlICpkZXYsCj4gPiArICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIG5ldGRldl9mZWF0dXJlc190ICpmZWF0dXJlcykKPiA+ICB7
Cj4gPiAgICAgICAgIC8qIEZpeCBpbGxlZ2FsIGNoZWNrc3VtIGNvbWJpbmF0aW9ucyAqLwo+ID4g
LSAgICAgICBpZiAoKGZlYXR1cmVzICYgTkVUSUZfRl9IV19DU1VNKSAmJgo+ID4gLSAgICAgICAg
ICAgKGZlYXR1cmVzICYgKE5FVElGX0ZfSVBfQ1NVTXxORVRJRl9GX0lQVjZfQ1NVTSkpKSB7Cj4g
PiArICAgICAgIGlmICgoZmVhdHVyZXNbMF0gJiBORVRJRl9GX0hXX0NTVU0pICYmCj4gPiArICAg
ICAgICAgICAoZmVhdHVyZXNbMF0gJiAoTkVUSUZfRl9JUF9DU1VNIHwgTkVUSUZfRl9JUFY2X0NT
VU0pKSkgewo+ID4gICAgICAgICAgICAgICAgIG5ldGRldl93YXJuKGRldiwgIm1peGVkIEhXIGFu
ZCBJUCBjaGVja3N1bSBzZXR0aW5ncy5cbiIpOwo+ID4gLSAgICAgICAgICAgICAgIGZlYXR1cmVz
ICY9IH4oTkVUSUZfRl9JUF9DU1VNfE5FVElGX0ZfSVBWNl9DU1VNKTsKPiA+ICsgICAgICAgICAg
ICAgICBmZWF0dXJlc1swXSAmPSB+KE5FVElGX0ZfSVBfQ1NVTSB8IE5FVElGX0ZfSVBWNl9DU1VN
KTsKPiA+ICAgICAgICAgfQo+ID4KPiA+ICAgICAgICAgLyogVFNPIHJlcXVpcmVzIHRoYXQgU0cg
aXMgcHJlc2VudCBhcyB3ZWxsLiAqLwo+ID4gLSAgICAgICBpZiAoKGZlYXR1cmVzICYgTkVUSUZf
Rl9BTExfVFNPKSAmJiAhKGZlYXR1cmVzICYgTkVUSUZfRl9TRykpIHsKPiA+ICsgICAgICAgaWYg
KChmZWF0dXJlc1swXSAmIE5FVElGX0ZfQUxMX1RTTykgJiYgIShmZWF0dXJlc1swXSAmIE5FVElG
X0ZfU0cpKSB7Cj4gPiAgICAgICAgICAgICAgICAgbmV0ZGV2X2RiZyhkZXYsICJEcm9wcGluZyBU
U08gZmVhdHVyZXMgc2luY2Ugbm8gU0cgZmVhdHVyZS5cbiIpOwo+ID4gLSAgICAgICAgICAgICAg
IGZlYXR1cmVzICY9IH5ORVRJRl9GX0FMTF9UU087Cj4gPiArICAgICAgICAgICAgICAgZmVhdHVy
ZXNbMF0gJj0gfk5FVElGX0ZfQUxMX1RTTzsKPiA+ICAgICAgICAgfQo+ID4KPiA+IC0gICAgICAg
aWYgKChmZWF0dXJlcyAmIE5FVElGX0ZfVFNPKSAmJiAhKGZlYXR1cmVzICYgTkVUSUZfRl9IV19D
U1VNKSAmJgo+ID4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICEoZmVh
dHVyZXMgJiBORVRJRl9GX0lQX0NTVU0pKSB7Cj4gPiArICAgICAgIGlmICgoZmVhdHVyZXNbMF0g
JiBORVRJRl9GX1RTTykgJiYgIShmZWF0dXJlc1swXSAmIE5FVElGX0ZfSFdfQ1NVTSkgJiYKPiA+
ICsgICAgICAgICAgICEoZmVhdHVyZXNbMF0gJiBORVRJRl9GX0lQX0NTVU0pKSB7Cj4gPiAgICAg
ICAgICAgICAgICAgbmV0ZGV2X2RiZyhkZXYsICJEcm9wcGluZyBUU08gZmVhdHVyZXMgc2luY2Ug
bm8gQ1NVTQo+ID4gZmVhdHVyZS5cbiIpOwo+ID4gLSAgICAgICAgICAgICAgIGZlYXR1cmVzICY9
IH5ORVRJRl9GX1RTTzsKPiA+IC0gICAgICAgICAgICAgICBmZWF0dXJlcyAmPSB+TkVUSUZfRl9U
U09fRUNOOwo+ID4gKyAgICAgICAgICAgICAgIGZlYXR1cmVzWzBdICY9IH5ORVRJRl9GX1RTTzsK
PiA+ICsgICAgICAgICAgICAgICBmZWF0dXJlc1swXSAmPSB+TkVUSUZfRl9UU09fRUNOOwo+ID4g
ICAgICAgICB9Cj4gPgo+ID4gLSAgICAgICBpZiAoKGZlYXR1cmVzICYgTkVUSUZfRl9UU082KSAm
JiAhKGZlYXR1cmVzICYgTkVUSUZfRl9IV19DU1VNKSAmJgo+ID4gLSAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAhKGZlYXR1cmVzICYgTkVUSUZfRl9JUFY2X0NTVU0pKSB7
Cj4gPiArICAgICAgIGlmICgoZmVhdHVyZXNbMF0gJiBORVRJRl9GX1RTTzYpICYmICEoZmVhdHVy
ZXNbMF0gJiBORVRJRl9GX0hXX0NTVU0pICYmCj4gPiArICAgICAgICAgICAhKGZlYXR1cmVzWzBd
ICYgTkVUSUZfRl9JUFY2X0NTVU0pKSB7Cj4gPiAgICAgICAgICAgICAgICAgbmV0ZGV2X2RiZyhk
ZXYsICJEcm9wcGluZyBUU082IGZlYXR1cmVzIHNpbmNlIG5vIENTVU0KPiA+IGZlYXR1cmUuXG4i
KTsKPiA+IC0gICAgICAgICAgICAgICBmZWF0dXJlcyAmPSB+TkVUSUZfRl9UU082Owo+ID4gKyAg
ICAgICAgICAgICAgIGZlYXR1cmVzWzBdICY9IH5ORVRJRl9GX1RTTzY7Cj4gPiAgICAgICAgIH0K
PiA+Cj4gPiAgICAgICAgIC8qIFRTTyB3aXRoIElQdjQgSUQgbWFuZ2xpbmcgcmVxdWlyZXMgSVB2
NCBUU08gYmUgZW5hYmxlZCAqLwo+ID4gLSAgICAgICBpZiAoKGZlYXR1cmVzICYgTkVUSUZfRl9U
U09fTUFOR0xFSUQpICYmICEoZmVhdHVyZXMgJiBORVRJRl9GX1RTTykpCj4gPiAtICAgICAgICAg
ICAgICAgZmVhdHVyZXMgJj0gfk5FVElGX0ZfVFNPX01BTkdMRUlEOwo+ID4gKyAgICAgICBpZiAo
KGZlYXR1cmVzWzBdICYgTkVUSUZfRl9UU09fTUFOR0xFSUQpICYmCj4gPiArICAgICAgICAgICAh
KGZlYXR1cmVzWzBdICYgTkVUSUZfRl9UU08pKQo+ID4gKyAgICAgICAgICAgICAgIGZlYXR1cmVz
WzBdICY9IH5ORVRJRl9GX1RTT19NQU5HTEVJRDsKPiA+Cj4gPiAgICAgICAgIC8qIFRTTyBFQ04g
cmVxdWlyZXMgdGhhdCBUU08gaXMgcHJlc2VudCBhcyB3ZWxsLiAqLwo+ID4gLSAgICAgICBpZiAo
KGZlYXR1cmVzICYgTkVUSUZfRl9BTExfVFNPKSA9PSBORVRJRl9GX1RTT19FQ04pCj4gPiAtICAg
ICAgICAgICAgICAgZmVhdHVyZXMgJj0gfk5FVElGX0ZfVFNPX0VDTjsKPiA+ICsgICAgICAgaWYg
KChmZWF0dXJlc1swXSAmIE5FVElGX0ZfQUxMX1RTTykgPT0gTkVUSUZfRl9UU09fRUNOKQo+ID4g
KyAgICAgICAgICAgICAgIGZlYXR1cmVzWzBdICY9IH5ORVRJRl9GX1RTT19FQ047Cj4gPgo+ID4g
ICAgICAgICAvKiBTb2Z0d2FyZSBHU08gZGVwZW5kcyBvbiBTRy4gKi8KPiA+IC0gICAgICAgaWYg
KChmZWF0dXJlcyAmIE5FVElGX0ZfR1NPKSAmJiAhKGZlYXR1cmVzICYgTkVUSUZfRl9TRykpIHsK
PiA+ICsgICAgICAgaWYgKChmZWF0dXJlc1swXSAmIE5FVElGX0ZfR1NPKSAmJiAhKGZlYXR1cmVz
WzBdICYgTkVUSUZfRl9TRykpIHsKPiA+ICAgICAgICAgICAgICAgICBuZXRkZXZfZGJnKGRldiwg
IkRyb3BwaW5nIE5FVElGX0ZfR1NPIHNpbmNlIG5vIFNHIGZlYXR1cmUuXG4iKTsKPiA+IC0gICAg
ICAgICAgICAgICBmZWF0dXJlcyAmPSB+TkVUSUZfRl9HU087Cj4gPiArICAgICAgICAgICAgICAg
ZmVhdHVyZXNbMF0gJj0gfk5FVElGX0ZfR1NPOwo+ID4gICAgICAgICB9Cj4gPgo+ID4gICAgICAg
ICAvKiBHU08gcGFydGlhbCBmZWF0dXJlcyByZXF1aXJlIEdTTyBwYXJ0aWFsIGJlIHNldCAqLwo+
ID4gLSAgICAgICBpZiAoKGZlYXR1cmVzICYgZGV2LT5nc29fcGFydGlhbF9mZWF0dXJlcykgJiYK
PiA+IC0gICAgICAgICAgICEoZmVhdHVyZXMgJiBORVRJRl9GX0dTT19QQVJUSUFMKSkgewo+ID4g
KyAgICAgICBpZiAoKGZlYXR1cmVzWzBdICYgZGV2LT5nc29fcGFydGlhbF9mZWF0dXJlcykgJiYK
PiA+ICsgICAgICAgICAgICEoZmVhdHVyZXNbMF0gJiBORVRJRl9GX0dTT19QQVJUSUFMKSkgewo+
ID4gICAgICAgICAgICAgICAgIG5ldGRldl9kYmcoZGV2LAo+ID4gICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIkRyb3BwaW5nIHBhcnRpYWxseSBzdXBwb3J0ZWQgR1NPIGZlYXR1cmVzCj4gPiBz
aW5jZSBubyBHU08gcGFydGlhbC5cbiIpOwo+ID4gLSAgICAgICAgICAgICAgIGZlYXR1cmVzICY9
IH5kZXYtPmdzb19wYXJ0aWFsX2ZlYXR1cmVzOwo+ID4gKyAgICAgICAgICAgICAgIGZlYXR1cmVz
WzBdICY9IH5kZXYtPmdzb19wYXJ0aWFsX2ZlYXR1cmVzOwo+ID4gICAgICAgICB9Cj4gPgo+ID4g
LSAgICAgICBpZiAoIShmZWF0dXJlcyAmIE5FVElGX0ZfUlhDU1VNKSkgewo+ID4gKyAgICAgICBp
ZiAoIShmZWF0dXJlc1swXSAmIE5FVElGX0ZfUlhDU1VNKSkgewo+ID4gICAgICAgICAgICAgICAg
IC8qIE5FVElGX0ZfR1JPX0hXIGltcGxpZXMgZG9pbmcgUlhDU1VNIHNpbmNlIGV2ZXJ5IHBhY2tl
dAo+ID4gICAgICAgICAgICAgICAgICAqIHN1Y2Nlc3NmdWxseSBtZXJnZWQgYnkgaGFyZHdhcmUg
bXVzdCBhbHNvIGhhdmUgdGhlCj4gPiAgICAgICAgICAgICAgICAgICogY2hlY2tzdW0gdmVyaWZp
ZWQgYnkgaGFyZHdhcmUuICBJZiB0aGUgdXNlciBkb2VzIG5vdAo+ID4gICAgICAgICAgICAgICAg
ICAqIHdhbnQgdG8gZW5hYmxlIFJYQ1NVTSwgbG9naWNhbGx5LCB3ZSBzaG91bGQgZGlzYWJsZSBH
Uk9fSFcuCj4gPiAgICAgICAgICAgICAgICAgICovCj4gPiAtICAgICAgICAgICAgICAgaWYgKGZl
YXR1cmVzICYgTkVUSUZfRl9HUk9fSFcpIHsKPiA+ICsgICAgICAgICAgICAgICBpZiAoZmVhdHVy
ZXNbMF0gJiBORVRJRl9GX0dST19IVykgewo+ID4gICAgICAgICAgICAgICAgICAgICAgICAgbmV0
ZGV2X2RiZyhkZXYsICJEcm9wcGluZyBORVRJRl9GX0dST19IVyBzaW5jZQo+ID4gbm8gUlhDU1VN
IGZlYXR1cmUuXG4iKTsKPiA+IC0gICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmVzICY9IH5O
RVRJRl9GX0dST19IVzsKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmVzWzBdICY9
IH5ORVRJRl9GX0dST19IVzsKPiA+ICAgICAgICAgICAgICAgICB9Cj4gPiAgICAgICAgIH0KPiA+
Cj4gPiAgICAgICAgIC8qIExSTy9IVy1HUk8gZmVhdHVyZXMgY2Fubm90IGJlIGNvbWJpbmVkIHdp
dGggUlgtRkNTICovCj4gPiAtICAgICAgIGlmIChmZWF0dXJlcyAmIE5FVElGX0ZfUlhGQ1MpIHsK
PiA+IC0gICAgICAgICAgICAgICBpZiAoZmVhdHVyZXMgJiBORVRJRl9GX0xSTykgewo+ID4gKyAg
ICAgICBpZiAoZmVhdHVyZXNbMF0gJiBORVRJRl9GX1JYRkNTKSB7Cj4gPiArICAgICAgICAgICAg
ICAgaWYgKGZlYXR1cmVzWzBdICYgTkVUSUZfRl9MUk8pIHsKPiA+ICAgICAgICAgICAgICAgICAg
ICAgICAgIG5ldGRldl9kYmcoZGV2LCAiRHJvcHBpbmcgTFJPIGZlYXR1cmUgc2luY2UKPiA+IFJY
LUZDUyBpcyByZXF1ZXN0ZWQuXG4iKTsKPiA+IC0gICAgICAgICAgICAgICAgICAgICAgIGZlYXR1
cmVzICY9IH5ORVRJRl9GX0xSTzsKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmVz
WzBdICY9IH5ORVRJRl9GX0xSTzsKPiA+ICAgICAgICAgICAgICAgICB9Cj4gPgo+ID4gLSAgICAg
ICAgICAgICAgIGlmIChmZWF0dXJlcyAmIE5FVElGX0ZfR1JPX0hXKSB7Cj4gPiArICAgICAgICAg
ICAgICAgaWYgKGZlYXR1cmVzWzBdICYgTkVUSUZfRl9HUk9fSFcpIHsKPiA+ICAgICAgICAgICAg
ICAgICAgICAgICAgIG5ldGRldl9kYmcoZGV2LCAiRHJvcHBpbmcgSFctR1JPIGZlYXR1cmUgc2lu
Y2UKPiA+IFJYLUZDUyBpcyByZXF1ZXN0ZWQuXG4iKTsKPiA+IC0gICAgICAgICAgICAgICAgICAg
ICAgIGZlYXR1cmVzICY9IH5ORVRJRl9GX0dST19IVzsKPiA+ICsgICAgICAgICAgICAgICAgICAg
ICAgIGZlYXR1cmVzWzBdICY9IH5ORVRJRl9GX0dST19IVzsKPiA+ICAgICAgICAgICAgICAgICB9
Cj4gPiAgICAgICAgIH0KPiA+Cj4gPiAtICAgICAgIGlmIChmZWF0dXJlcyAmIE5FVElGX0ZfSFdf
VExTX1RYKSB7Cj4gPiAtICAgICAgICAgICAgICAgYm9vbCBpcF9jc3VtID0gKGZlYXR1cmVzICYg
KE5FVElGX0ZfSVBfQ1NVTSB8Cj4gPiBORVRJRl9GX0lQVjZfQ1NVTSkpID09Cj4gPiArICAgICAg
IGlmIChmZWF0dXJlc1swXSAmIE5FVElGX0ZfSFdfVExTX1RYKSB7Cj4gPiArICAgICAgICAgICAg
ICAgYm9vbCBpcF9jc3VtID0gKGZlYXR1cmVzWzBdICYgKE5FVElGX0ZfSVBfQ1NVTSB8Cj4gPiBO
RVRJRl9GX0lQVjZfQ1NVTSkpID09Cj4gPiAgICAgICAgICAgICAgICAgICAgICAgICAoTkVUSUZf
Rl9JUF9DU1VNIHwgTkVUSUZfRl9JUFY2X0NTVU0pOwo+ID4gLSAgICAgICAgICAgICAgIGJvb2wg
aHdfY3N1bSA9IGZlYXR1cmVzICYgTkVUSUZfRl9IV19DU1VNOwo+ID4gKyAgICAgICAgICAgICAg
IGJvb2wgaHdfY3N1bSA9IGZlYXR1cmVzWzBdICYgTkVUSUZfRl9IV19DU1VNOwo+ID4KPiA+ICAg
ICAgICAgICAgICAgICBpZiAoIWlwX2NzdW0gJiYgIWh3X2NzdW0pIHsKPiA+ICAgICAgICAgICAg
ICAgICAgICAgICAgIG5ldGRldl9kYmcoZGV2LCAiRHJvcHBpbmcgVExTIFRYIEhXIG9mZmxvYWQK
PiA+IGZlYXR1cmUgc2luY2Ugbm8gQ1NVTSBmZWF0dXJlLlxuIik7Cj4gPiAtICAgICAgICAgICAg
ICAgICAgICAgICBmZWF0dXJlcyAmPSB+TkVUSUZfRl9IV19UTFNfVFg7Cj4gPiArICAgICAgICAg
ICAgICAgICAgICAgICBmZWF0dXJlc1swXSAmPSB+TkVUSUZfRl9IV19UTFNfVFg7Cj4gPiAgICAg
ICAgICAgICAgICAgfQo+ID4gICAgICAgICB9Cj4gPgo+ID4gLSAgICAgICBpZiAoKGZlYXR1cmVz
ICYgTkVUSUZfRl9IV19UTFNfUlgpICYmICEoZmVhdHVyZXMgJiBORVRJRl9GX1JYQ1NVTSkpIHsK
PiA+ICsgICAgICAgaWYgKChmZWF0dXJlc1swXSAmIE5FVElGX0ZfSFdfVExTX1JYKSAmJgo+ID4g
KyAgICAgICAgICAgIShmZWF0dXJlc1swXSAmIE5FVElGX0ZfUlhDU1VNKSkgewo+ID4gICAgICAg
ICAgICAgICAgIG5ldGRldl9kYmcoZGV2LCAiRHJvcHBpbmcgVExTIFJYIEhXIG9mZmxvYWQgZmVh
dHVyZQo+ID4gc2luY2Ugbm8gUlhDU1VNIGZlYXR1cmUuXG4iKTsKPiA+IC0gICAgICAgICAgICAg
ICBmZWF0dXJlcyAmPSB+TkVUSUZfRl9IV19UTFNfUlg7Cj4gPiArICAgICAgICAgICAgICAgZmVh
dHVyZXNbMF0gJj0gfk5FVElGX0ZfSFdfVExTX1JYOwo+ID4gICAgICAgICB9Cj4gPiAtCj4gPiAt
ICAgICAgIHJldHVybiBmZWF0dXJlczsKPiA+ICB9Cj4gPgo+ID4gIGludCBfX25ldGRldl91cGRh
dGVfZmVhdHVyZXMoc3RydWN0IG5ldF9kZXZpY2UgKmRldikKPiA+ICB7Cj4gPiArICAgICAgIG5l
dGRldl9mZWF0dXJlc190IGZlYXR1cmVzW05FVERFVl9GRUFUVVJFX0RXT1JEU107Cj4gPiAgICAg
ICAgIHN0cnVjdCBuZXRfZGV2aWNlICp1cHBlciwgKmxvd2VyOwo+ID4gLSAgICAgICBuZXRkZXZf
ZmVhdHVyZXNfdCBmZWF0dXJlczsKPiA+ICAgICAgICAgc3RydWN0IGxpc3RfaGVhZCAqaXRlcjsK
PiA+ICsgICAgICAgdW5zaWduZWQgaW50IGk7Cj4gPiAgICAgICAgIGludCBlcnIgPSAtMTsKPiA+
Cj4gPiAgICAgICAgIEFTU0VSVF9SVE5MKCk7Cj4gPgo+ID4gLSAgICAgICBmZWF0dXJlcyA9IG5l
dGRldl9nZXRfd2FudGVkX2ZlYXR1cmVzKGRldik7Cj4gPiArICAgICAgIG5ldGRldl9nZXRfd2Fu
dGVkX2ZlYXR1cmVzKGRldiwgZmVhdHVyZXMpOwo+ID4KPiA+ICAgICAgICAgaWYgKGRldi0+bmV0
ZGV2X29wcy0+bmRvX2ZpeF9mZWF0dXJlcykKPiA+IC0gICAgICAgICAgICAgICBmZWF0dXJlcyA9
IGRldi0+bmV0ZGV2X29wcy0+bmRvX2ZpeF9mZWF0dXJlcyhkZXYsIGZlYXR1cmVzKTsKPiA+ICsg
ICAgICAgICAgICAgICBkZXYtPm5ldGRldl9vcHMtPm5kb19maXhfZmVhdHVyZXMoZGV2LCBmZWF0
dXJlcyk7Cj4gPgo+ID4gICAgICAgICAvKiBkcml2ZXIgbWlnaHQgYmUgbGVzcyBzdHJpY3QgYWJv
dXQgZmVhdHVyZSBkZXBlbmRlbmNpZXMgKi8KPiA+IC0gICAgICAgZmVhdHVyZXMgPSBuZXRkZXZf
Zml4X2ZlYXR1cmVzKGRldiwgZmVhdHVyZXMpOwo+ID4gKyAgICAgICBuZXRkZXZfZml4X2ZlYXR1
cmVzKGRldiwgZmVhdHVyZXMpOwo+ID4KPiA+ICAgICAgICAgLyogc29tZSBmZWF0dXJlcyBjYW4n
dCBiZSBlbmFibGVkIGlmIHRoZXkncmUgb2ZmIG9uIGFuIHVwcGVyIGRldmljZSAqLwo+ID4gICAg
ICAgICBuZXRkZXZfZm9yX2VhY2hfdXBwZXJfZGV2X3JjdShkZXYsIHVwcGVyLCBpdGVyKQo+ID4g
LSAgICAgICAgICAgICAgIGZlYXR1cmVzID0gbmV0ZGV2X3N5bmNfdXBwZXJfZmVhdHVyZXMoZGV2
LCB1cHBlciwgZmVhdHVyZXMpOwo+ID4gKyAgICAgICAgICAgICAgIG5ldGRldl9zeW5jX3VwcGVy
X2ZlYXR1cmVzKGRldiwgdXBwZXIsIGZlYXR1cmVzKTsKPiA+Cj4gPiAtICAgICAgIGlmIChkZXYt
PmZlYXR1cmVzID09IGZlYXR1cmVzKQo+ID4gKyAgICAgICBpZiAobmV0ZGV2X2ZlYXR1cmVzX2Vx
dWFsKGRldi0+ZmVhdHVyZXMsIGZlYXR1cmVzKSkKPiA+ICAgICAgICAgICAgICAgICBnb3RvIHN5
bmNfbG93ZXI7Cj4gPgo+ID4gLSAgICAgICBuZXRkZXZfZGJnKGRldiwgIkZlYXR1cmVzIGNoYW5n
ZWQ6ICVwTkYgLT4gJXBORlxuIiwKPiA+IC0gICAgICAgICAgICAgICAmZGV2LT5mZWF0dXJlcywg
JmZlYXR1cmVzKTsKPiA+ICsgICAgICAgZm9yIChpID0gMDsgaSA8IE5FVERFVl9GRUFUVVJFX0RX
T1JEUzsgaSsrKQo+ID4gKyAgICAgICAgICAgICAgIG5ldGRldl9kYmcoZGV2LCAiRmVhdHVyZXNb
JXVdIGNoYW5nZWQ6ICVwTkYgLT4gJXBORlxuIiwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAg
ICAgIGksICZkZXYtPmZlYXR1cmVzW2ldLCAmZmVhdHVyZXNbaV0pOwo+ID4KPiA+ICAgICAgICAg
aWYgKGRldi0+bmV0ZGV2X29wcy0+bmRvX3NldF9mZWF0dXJlcykKPiA+ICAgICAgICAgICAgICAg
ICBlcnIgPSBkZXYtPm5ldGRldl9vcHMtPm5kb19zZXRfZmVhdHVyZXMoZGV2LCBmZWF0dXJlcyk7
Cj4gPiBAQCAtOTk3MSw5ICs5OTc5LDEwIEBAIGludCBfX25ldGRldl91cGRhdGVfZmVhdHVyZXMo
c3RydWN0IG5ldF9kZXZpY2UgKmRldikKPiA+ICAgICAgICAgICAgICAgICBlcnIgPSAwOwo+ID4K
PiA+ICAgICAgICAgaWYgKHVubGlrZWx5KGVyciA8IDApKSB7Cj4gPiAtICAgICAgICAgICAgICAg
bmV0ZGV2X2VycihkZXYsCj4gPiAtICAgICAgICAgICAgICAgICAgICAgICAic2V0X2ZlYXR1cmVz
KCkgZmFpbGVkICglZCk7IHdhbnRlZCAlcE5GLCBsZWZ0ICVwTkZcbiIsCj4gPiAtICAgICAgICAg
ICAgICAgICAgICAgICBlcnIsICZmZWF0dXJlcywgJmRldi0+ZmVhdHVyZXMpOwo+ID4gKyAgICAg
ICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBORVRERVZfRkVBVFVSRV9EV09SRFM7IGkrKykKPiA+
ICsgICAgICAgICAgICAgICAgICAgICAgIG5ldGRldl9lcnIoZGV2LAo+ID4gKyAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAic2V0X2ZlYXR1cmVzKCkgZmFpbGVkICglZCk7Cj4gPiB3
YW50ZWRbJXVdICVwTkYsIGxlZnRbJXVdICVwTkZcbiIsCj4gPiArICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGVyciwgaSwgJmZlYXR1cmVzW2ldLCBpLCAmZGV2LT5mZWF0dXJlc1tp
XSk7Cj4gPiAgICAgICAgICAgICAgICAgLyogcmV0dXJuIG5vbi0wIHNpbmNlIHNvbWUgZmVhdHVy
ZXMgbWlnaHQgaGF2ZSBjaGFuZ2VkIGFuZAo+ID4gICAgICAgICAgICAgICAgICAqIGl0J3MgYmV0
dGVyIHRvIGZpcmUgYSBzcHVyaW91cyBub3RpZmljYXRpb24gdGhhbiBtaXNzIGl0Cj4gPiAgICAg
ICAgICAgICAgICAgICovCj4gPiBAQCAtOTk4OCw5ICs5OTk3LDEwIEBAIGludCBfX25ldGRldl91
cGRhdGVfZmVhdHVyZXMoc3RydWN0IG5ldF9kZXZpY2UgKmRldikKPiA+ICAgICAgICAgICAgICAg
ICBuZXRkZXZfc3luY19sb3dlcl9mZWF0dXJlcyhkZXYsIGxvd2VyLCBmZWF0dXJlcyk7Cj4gPgo+
ID4gICAgICAgICBpZiAoIWVycikgewo+ID4gLSAgICAgICAgICAgICAgIG5ldGRldl9mZWF0dXJl
c190IGRpZmYgPSBmZWF0dXJlcyBeIGRldi0+ZmVhdHVyZXM7Cj4gPiArICAgICAgICAgICAgICAg
bmV0ZGV2X2ZlYXR1cmVzX3QgZGlmZltORVRERVZfRkVBVFVSRV9EV09SRFNdOwo+ID4KPiA+IC0g
ICAgICAgICAgICAgICBpZiAoZGlmZiAmIE5FVElGX0ZfUlhfVURQX1RVTk5FTF9QT1JUKSB7Cj4g
PiArICAgICAgICAgICAgICAgbmV0ZGV2X2ZlYXR1cmVzX3hvcihkaWZmLCBmZWF0dXJlcywgZGV2
LT5mZWF0dXJlcyk7Cj4gPiArICAgICAgICAgICAgICAgaWYgKGRpZmZbMF0gJiBORVRJRl9GX1JY
X1VEUF9UVU5ORUxfUE9SVCkgewo+ID4gICAgICAgICAgICAgICAgICAgICAgICAgLyogdWRwX3R1
bm5lbF97Z2V0LGRyb3B9X3J4X2luZm8gYm90aCBuZWVkCj4gPiAgICAgICAgICAgICAgICAgICAg
ICAgICAgKiBORVRJRl9GX1JYX1VEUF9UVU5ORUxfUE9SVCBlbmFibGVkIG9uIHRoZQo+ID4gICAg
ICAgICAgICAgICAgICAgICAgICAgICogZGV2aWNlLCBvciB0aGV5IHdvbid0IGRvIGFueXRoaW5n
Lgo+ID4gQEAgLTk5OTgsMzMgKzEwMDA4LDMzIEBAIGludCBfX25ldGRldl91cGRhdGVfZmVhdHVy
ZXMoc3RydWN0IG5ldF9kZXZpY2UgKmRldikKPiA+ICAgICAgICAgICAgICAgICAgICAgICAgICAq
ICpiZWZvcmUqIGNhbGxpbmcgdWRwX3R1bm5lbF9nZXRfcnhfaW5mbywKPiA+ICAgICAgICAgICAg
ICAgICAgICAgICAgICAqIGJ1dCAqYWZ0ZXIqIGNhbGxpbmcgdWRwX3R1bm5lbF9kcm9wX3J4X2lu
Zm8uCj4gPiAgICAgICAgICAgICAgICAgICAgICAgICAgKi8KPiA+IC0gICAgICAgICAgICAgICAg
ICAgICAgIGlmIChmZWF0dXJlcyAmIE5FVElGX0ZfUlhfVURQX1RVTk5FTF9QT1JUKSB7Cj4gPiAt
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldi0+ZmVhdHVyZXMgPSBmZWF0dXJlczsK
PiA+ICsgICAgICAgICAgICAgICAgICAgICAgIGlmIChmZWF0dXJlc1swXSAmIE5FVElGX0ZfUlhf
VURQX1RVTk5FTF9QT1JUKSB7Cj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRl
di0+ZmVhdHVyZXNbMF0gPSBmZWF0dXJlc1swXTsKPiA+ICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgdWRwX3R1bm5lbF9nZXRfcnhfaW5mbyhkZXYpOwo+ID4gICAgICAgICAgICAgICAg
ICAgICAgICAgfSBlbHNlIHsKPiA+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWRw
X3R1bm5lbF9kcm9wX3J4X2luZm8oZGV2KTsKPiA+ICAgICAgICAgICAgICAgICAgICAgICAgIH0K
PiA+ICAgICAgICAgICAgICAgICB9Cj4gPgo+ID4gLSAgICAgICAgICAgICAgIGlmIChkaWZmICYg
TkVUSUZfRl9IV19WTEFOX0NUQUdfRklMVEVSKSB7Cj4gPiAtICAgICAgICAgICAgICAgICAgICAg
ICBpZiAoZmVhdHVyZXMgJiBORVRJRl9GX0hXX1ZMQU5fQ1RBR19GSUxURVIpIHsKPiA+IC0gICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV2LT5mZWF0dXJlcyA9IGZlYXR1cmVzOwo+ID4g
KyAgICAgICAgICAgICAgIGlmIChkaWZmWzBdICYgTkVUSUZfRl9IV19WTEFOX0NUQUdfRklMVEVS
KSB7Cj4gPiArICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmVhdHVyZXNbMF0gJiBORVRJRl9G
X0hXX1ZMQU5fQ1RBR19GSUxURVIpIHsKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgZGV2LT5mZWF0dXJlc1swXSA9IGZlYXR1cmVzWzBdOwo+ID4gICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBlcnIgfD0gdmxhbl9nZXRfcnhfY3RhZ19maWx0ZXJfaW5mbyhkZXYpOwo+
ID4gICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKPiA+ICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgdmxhbl9kcm9wX3J4X2N0YWdfZmlsdGVyX2luZm8oZGV2KTsKPiA+ICAg
ICAgICAgICAgICAgICAgICAgICAgIH0KPiA+ICAgICAgICAgICAgICAgICB9Cj4gPgo+ID4gLSAg
ICAgICAgICAgICAgIGlmIChkaWZmICYgTkVUSUZfRl9IV19WTEFOX1NUQUdfRklMVEVSKSB7Cj4g
PiArICAgICAgICAgICAgICAgaWYgKGRpZmZbMF0gJiBORVRJRl9GX0hXX1ZMQU5fU1RBR19GSUxU
RVIpIHsKPiA+ICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmZWF0dXJlcyAmIE5FVElGX0Zf
SFdfVkxBTl9TVEFHX0ZJTFRFUikgewo+ID4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBkZXYtPmZlYXR1cmVzID0gZmVhdHVyZXM7Cj4gPiArICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGRldi0+ZmVhdHVyZXNbMF0gPSBmZWF0dXJlc1swXTsKPiA+ICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgZXJyIHw9IHZsYW5fZ2V0X3J4X3N0YWdfZmlsdGVyX2luZm8oZGV2
KTsKPiA+ICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7Cj4gPiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHZsYW5fZHJvcF9yeF9zdGFnX2ZpbHRlcl9pbmZvKGRldik7Cj4g
PiAgICAgICAgICAgICAgICAgICAgICAgICB9Cj4gPiAgICAgICAgICAgICAgICAgfQo+ID4KPiA+
IC0gICAgICAgICAgICAgICBkZXYtPmZlYXR1cmVzID0gZmVhdHVyZXM7Cj4gPiArICAgICAgICAg
ICAgICAgbmV0ZGV2X2ZlYXR1cmVzX2NvcHkoZGV2LT5mZWF0dXJlcywgZmVhdHVyZXMpOwo+ID4g
ICAgICAgICB9Cj4gPgo+ID4gICAgICAgICByZXR1cm4gZXJyIDwgMCA/IDAgOiAxOwo+ID4gQEAg
LTEwMjEzLDcgKzEwMjIzLDcgQEAgaW50IHJlZ2lzdGVyX25ldGRldmljZShzdHJ1Y3QgbmV0X2Rl
dmljZSAqZGV2KQo+ID4gICAgICAgICBpbnQgcmV0Owo+ID4gICAgICAgICBzdHJ1Y3QgbmV0ICpu
ZXQgPSBkZXZfbmV0KGRldik7Cj4gPgo+ID4gLSAgICAgICBCVUlMRF9CVUdfT04oc2l6ZW9mKG5l
dGRldl9mZWF0dXJlc190KSAqIEJJVFNfUEVSX0JZVEUgPAo+ID4gKyAgICAgICBCVUlMRF9CVUdf
T04oc2l6ZW9mKGRldi0+ZmVhdHVyZXMpICogQklUU19QRVJfQllURSA8Cj4gPiAgICAgICAgICAg
ICAgICAgICAgICBORVRERVZfRkVBVFVSRV9DT1VOVCk7Cj4gPiAgICAgICAgIEJVR19PTihkZXZf
Ym9vdF9waGFzZSk7Cj4gPiAgICAgICAgIEFTU0VSVF9SVE5MKCk7Cj4gPiBAQCAtMTAyNTAsNyAr
MTAyNjAsNyBAQCBpbnQgcmVnaXN0ZXJfbmV0ZGV2aWNlKHN0cnVjdCBuZXRfZGV2aWNlICpkZXYp
Cj4gPiAgICAgICAgICAgICAgICAgfQo+ID4gICAgICAgICB9Cj4gPgo+ID4gLSAgICAgICBpZiAo
KChkZXYtPmh3X2ZlYXR1cmVzIHwgZGV2LT5mZWF0dXJlcykgJgo+ID4gKyAgICAgICBpZiAoKChk
ZXYtPmh3X2ZlYXR1cmVzWzBdIHwgZGV2LT5mZWF0dXJlc1swXSkgJgo+ID4gICAgICAgICAgICAg
IE5FVElGX0ZfSFdfVkxBTl9DVEFHX0ZJTFRFUikgJiYKPiA+ICAgICAgICAgICAgICghZGV2LT5u
ZXRkZXZfb3BzLT5uZG9fdmxhbl9yeF9hZGRfdmlkIHx8Cj4gPiAgICAgICAgICAgICAgIWRldi0+
bmV0ZGV2X29wcy0+bmRvX3ZsYW5fcnhfa2lsbF92aWQpKSB7Cj4gPiBAQCAtMTAyNjgsNDQgKzEw
Mjc4LDQ2IEBAIGludCByZWdpc3Rlcl9uZXRkZXZpY2Uoc3RydWN0IG5ldF9kZXZpY2UgKmRldikK
PiA+ICAgICAgICAgLyogVHJhbnNmZXIgY2hhbmdlYWJsZSBmZWF0dXJlcyB0byB3YW50ZWRfZmVh
dHVyZXMgYW5kIGVuYWJsZQo+ID4gICAgICAgICAgKiBzb2Z0d2FyZSBvZmZsb2FkcyAoR1NPIGFu
ZCBHUk8pLgo+ID4gICAgICAgICAgKi8KPiA+IC0gICAgICAgZGV2LT5od19mZWF0dXJlcyB8PSAo
TkVUSUZfRl9TT0ZUX0ZFQVRVUkVTIHwgTkVUSUZfRl9TT0ZUX0ZFQVRVUkVTX09GRik7Cj4gPiAt
ICAgICAgIGRldi0+ZmVhdHVyZXMgfD0gTkVUSUZfRl9TT0ZUX0ZFQVRVUkVTOwo+ID4gKyAgICAg
ICBkZXYtPmh3X2ZlYXR1cmVzWzBdIHw9Cj4gPiArICAgICAgICAgICAgICAgICAgICAgICAoTkVU
SUZfRl9TT0ZUX0ZFQVRVUkVTIHwgTkVUSUZfRl9TT0ZUX0ZFQVRVUkVTX09GRik7Cj4gPiArICAg
ICAgIGRldi0+ZmVhdHVyZXNbMF0gfD0gTkVUSUZfRl9TT0ZUX0ZFQVRVUkVTOwo+ID4KPiA+ICAg
ICAgICAgaWYgKGRldi0+dWRwX3R1bm5lbF9uaWNfaW5mbykgewo+ID4gLSAgICAgICAgICAgICAg
IGRldi0+ZmVhdHVyZXMgfD0gTkVUSUZfRl9SWF9VRFBfVFVOTkVMX1BPUlQ7Cj4gPiAtICAgICAg
ICAgICAgICAgZGV2LT5od19mZWF0dXJlcyB8PSBORVRJRl9GX1JYX1VEUF9UVU5ORUxfUE9SVDsK
PiA+ICsgICAgICAgICAgICAgICBkZXYtPmZlYXR1cmVzWzBdIHw9IE5FVElGX0ZfUlhfVURQX1RV
Tk5FTF9QT1JUOwo+ID4gKyAgICAgICAgICAgICAgIGRldi0+aHdfZmVhdHVyZXNbMF0gfD0gTkVU
SUZfRl9SWF9VRFBfVFVOTkVMX1BPUlQ7Cj4gPiAgICAgICAgIH0KPiA+Cj4gPiAtICAgICAgIGRl
di0+d2FudGVkX2ZlYXR1cmVzID0gZGV2LT5mZWF0dXJlcyAmIGRldi0+aHdfZmVhdHVyZXM7Cj4g
PiArICAgICAgIG5ldGRldl9mZWF0dXJlc19hbmQoZGV2LT53YW50ZWRfZmVhdHVyZXMsIGRldi0+
ZmVhdHVyZXMsCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV2LT5od19mZWF0dXJl
cyk7Cj4gPgo+ID4gICAgICAgICBpZiAoIShkZXYtPmZsYWdzICYgSUZGX0xPT1BCQUNLKSkKPiA+
IC0gICAgICAgICAgICAgICBkZXYtPmh3X2ZlYXR1cmVzIHw9IE5FVElGX0ZfTk9DQUNIRV9DT1BZ
Owo+ID4gKyAgICAgICAgICAgICAgIGRldi0+aHdfZmVhdHVyZXNbMF0gfD0gTkVUSUZfRl9OT0NB
Q0hFX0NPUFk7Cj4gPgo+ID4gICAgICAgICAvKiBJZiBJUHY0IFRDUCBzZWdtZW50YXRpb24gb2Zm
bG9hZCBpcyBzdXBwb3J0ZWQgd2Ugc2hvdWxkIGFsc28KPiA+ICAgICAgICAgICogYWxsb3cgdGhl
IGRldmljZSB0byBlbmFibGUgc2VnbWVudGluZyB0aGUgZnJhbWUgd2l0aCB0aGUgb3B0aW9uCj4g
PiAgICAgICAgICAqIG9mIGlnbm9yaW5nIGEgc3RhdGljIElQIElEIHZhbHVlLiAgVGhpcyBkb2Vz
bid0IGVuYWJsZSB0aGUKPiA+ICAgICAgICAgICogZmVhdHVyZSBpdHNlbGYgYnV0IGFsbG93cyB0
aGUgdXNlciB0byBlbmFibGUgaXQgbGF0ZXIuCj4gPiAgICAgICAgICAqLwo+ID4gLSAgICAgICBp
ZiAoZGV2LT5od19mZWF0dXJlcyAmIE5FVElGX0ZfVFNPKQo+ID4gLSAgICAgICAgICAgICAgIGRl
di0+aHdfZmVhdHVyZXMgfD0gTkVUSUZfRl9UU09fTUFOR0xFSUQ7Cj4gPiAtICAgICAgIGlmIChk
ZXYtPnZsYW5fZmVhdHVyZXMgJiBORVRJRl9GX1RTTykKPiA+IC0gICAgICAgICAgICAgICBkZXYt
PnZsYW5fZmVhdHVyZXMgfD0gTkVUSUZfRl9UU09fTUFOR0xFSUQ7Cj4gPiAtICAgICAgIGlmIChk
ZXYtPm1wbHNfZmVhdHVyZXMgJiBORVRJRl9GX1RTTykKPiA+IC0gICAgICAgICAgICAgICBkZXYt
Pm1wbHNfZmVhdHVyZXMgfD0gTkVUSUZfRl9UU09fTUFOR0xFSUQ7Cj4gPiAtICAgICAgIGlmIChk
ZXYtPmh3X2VuY19mZWF0dXJlcyAmIE5FVElGX0ZfVFNPKQo+ID4gLSAgICAgICAgICAgICAgIGRl
di0+aHdfZW5jX2ZlYXR1cmVzIHw9IE5FVElGX0ZfVFNPX01BTkdMRUlEOwo+ID4gKyAgICAgICBp
ZiAoZGV2LT5od19mZWF0dXJlc1swXSAmIE5FVElGX0ZfVFNPKQo+ID4gKyAgICAgICAgICAgICAg
IGRldi0+aHdfZmVhdHVyZXNbMF0gfD0gTkVUSUZfRl9UU09fTUFOR0xFSUQ7Cj4gPiArICAgICAg
IGlmIChkZXYtPnZsYW5fZmVhdHVyZXNbMF0gJiBORVRJRl9GX1RTTykKPiA+ICsgICAgICAgICAg
ICAgICBkZXYtPnZsYW5fZmVhdHVyZXNbMF0gfD0gTkVUSUZfRl9UU09fTUFOR0xFSUQ7Cj4gPiAr
ICAgICAgIGlmIChkZXYtPm1wbHNfZmVhdHVyZXNbMF0gJiBORVRJRl9GX1RTTykKPiA+ICsgICAg
ICAgICAgICAgICBkZXYtPm1wbHNfZmVhdHVyZXNbMF0gfD0gTkVUSUZfRl9UU09fTUFOR0xFSUQ7
Cj4gPiArICAgICAgIGlmIChkZXYtPmh3X2VuY19mZWF0dXJlc1swXSAmIE5FVElGX0ZfVFNPKQo+
ID4gKyAgICAgICAgICAgICAgIGRldi0+aHdfZW5jX2ZlYXR1cmVzWzBdIHw9IE5FVElGX0ZfVFNP
X01BTkdMRUlEOwo+ID4KPiA+ICAgICAgICAgLyogTWFrZSBORVRJRl9GX0hJR0hETUEgaW5oZXJp
dGFibGUgdG8gVkxBTiBkZXZpY2VzLgo+ID4gICAgICAgICAgKi8KPiA+IC0gICAgICAgZGV2LT52
bGFuX2ZlYXR1cmVzIHw9IE5FVElGX0ZfSElHSERNQTsKPiA+ICsgICAgICAgZGV2LT52bGFuX2Zl
YXR1cmVzWzBdIHw9IE5FVElGX0ZfSElHSERNQTsKPiA+Cj4gPiAgICAgICAgIC8qIE1ha2UgTkVU
SUZfRl9TRyBpbmhlcml0YWJsZSB0byB0dW5uZWwgZGV2aWNlcy4KPiA+ICAgICAgICAgICovCj4g
PiAtICAgICAgIGRldi0+aHdfZW5jX2ZlYXR1cmVzIHw9IE5FVElGX0ZfU0cgfCBORVRJRl9GX0dT
T19QQVJUSUFMOwo+ID4gKyAgICAgICBkZXYtPmh3X2VuY19mZWF0dXJlc1swXSB8PSBORVRJRl9G
X1NHIHwgTkVUSUZfRl9HU09fUEFSVElBTDsKPiA+Cj4gPiAgICAgICAgIC8qIE1ha2UgTkVUSUZf
Rl9TRyBpbmhlcml0YWJsZSB0byBNUExTLgo+ID4gICAgICAgICAgKi8KPiA+IC0gICAgICAgZGV2
LT5tcGxzX2ZlYXR1cmVzIHw9IE5FVElGX0ZfU0c7Cj4gPiArICAgICAgIGRldi0+bXBsc19mZWF0
dXJlc1swXSB8PSBORVRJRl9GX1NHOwo+ID4KPiA+ICAgICAgICAgcmV0ID0gY2FsbF9uZXRkZXZp
Y2Vfbm90aWZpZXJzKE5FVERFVl9QT1NUX0lOSVQsIGRldik7Cj4gPiAgICAgICAgIHJldCA9IG5v
dGlmaWVyX3RvX2Vycm5vKHJldCk7Cj4gPiBAQCAtMTExNDYsNyArMTExNTgsNyBAQCBpbnQgX19k
ZXZfY2hhbmdlX25ldF9uYW1lc3BhY2Uoc3RydWN0Cj4gPiBuZXRfZGV2aWNlICpkZXYsIHN0cnVj
dCBuZXQgKm5ldCwKPiA+Cj4gPiAgICAgICAgIC8qIERvbid0IGFsbG93IG5hbWVzcGFjZSBsb2Nh
bCBkZXZpY2VzIHRvIGJlIG1vdmVkLiAqLwo+ID4gICAgICAgICBlcnIgPSAtRUlOVkFMOwo+ID4g
LSAgICAgICBpZiAoZGV2LT5mZWF0dXJlcyAmIE5FVElGX0ZfTkVUTlNfTE9DQUwpCj4gPiArICAg
ICAgIGlmIChkZXYtPmZlYXR1cmVzWzBdICYgTkVUSUZfRl9ORVROU19MT0NBTCkKPiA+ICAgICAg
ICAgICAgICAgICBnb3RvIG91dDsKPiA+Cj4gPiAgICAgICAgIC8qIEVuc3VyZSB0aGUgZGV2aWNl
IGhhcyBiZWVuIHJlZ2lzdHJlcmVkICovCj4gPiBAQCAtMTE1MDYsNyArMTE1MTgsNyBAQCBzdGF0
aWMgdm9pZCBfX25ldF9leGl0Cj4gPiBkZWZhdWx0X2RldmljZV9leGl0KHN0cnVjdCBuZXQgKm5l
dCkKPiA+ICAgICAgICAgICAgICAgICBjaGFyIGZiX25hbWVbSUZOQU1TSVpdOwo+ID4KPiA+ICAg
ICAgICAgICAgICAgICAvKiBJZ25vcmUgdW5tb3ZlYWJsZSBkZXZpY2VzIChpLmUuIGxvb3BiYWNr
KSAqLwo+ID4gLSAgICAgICAgICAgICAgIGlmIChkZXYtPmZlYXR1cmVzICYgTkVUSUZfRl9ORVRO
U19MT0NBTCkKPiA+ICsgICAgICAgICAgICAgICBpZiAoZGV2LT5mZWF0dXJlc1swXSAmIE5FVElG
X0ZfTkVUTlNfTE9DQUwpCj4gPiAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKPiA+
Cj4gPiAgICAgICAgICAgICAgICAgLyogTGVhdmUgdmlydHVhbCBkZXZpY2VzIGZvciB0aGUgZ2Vu
ZXJpYyBjbGVhbnVwICovCj4gPiBkaWZmIC0tZ2l0IGEvbmV0L2NvcmUvbmV0cG9sbC5jIGIvbmV0
L2NvcmUvbmV0cG9sbC5jCj4gPiBpbmRleCAwYTZiMDQ3Li4yYzBhZGY0IDEwMDY0NAo+ID4gLS0t
IGEvbmV0L2NvcmUvbmV0cG9sbC5jCj4gPiArKysgYi9uZXQvY29yZS9uZXRwb2xsLmMKPiA+IEBA
IC03NCwxMyArNzQsMTMgQEAgc3RhdGljIG5ldGRldl90eF90IG5ldHBvbGxfc3RhcnRfeG1pdChz
dHJ1Y3Qgc2tfYnVmZiAqc2tiLAo+ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBzdHJ1Y3QgbmV0X2RldmljZSAqZGV2LAo+ID4gICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBzdHJ1Y3QgbmV0ZGV2X3F1ZXVlICp0eHEpCj4gPiAgewo+ID4gKyAgICAg
ICBuZXRkZXZfZmVhdHVyZXNfdCBmZWF0dXJlc1tORVRERVZfRkVBVFVSRV9EV09SRFNdOwo+ID4g
ICAgICAgICBuZXRkZXZfdHhfdCBzdGF0dXMgPSBORVRERVZfVFhfT0s7Cj4gPiAtICAgICAgIG5l
dGRldl9mZWF0dXJlc190IGZlYXR1cmVzOwo+ID4KPiA+IC0gICAgICAgZmVhdHVyZXMgPSBuZXRp
Zl9za2JfZmVhdHVyZXMoc2tiKTsKPiA+ICsgICAgICAgbmV0aWZfc2tiX2ZlYXR1cmVzKHNrYiwg
ZmVhdHVyZXMpOwo+ID4KPiA+ICAgICAgICAgaWYgKHNrYl92bGFuX3RhZ19wcmVzZW50KHNrYikg
JiYKPiA+IC0gICAgICAgICAgICF2bGFuX2h3X29mZmxvYWRfY2FwYWJsZShmZWF0dXJlcywgc2ti
LT52bGFuX3Byb3RvKSkgewo+ID4gKyAgICAgICAgICAgIXZsYW5faHdfb2ZmbG9hZF9jYXBhYmxl
KGZlYXR1cmVzWzBdLCBza2ItPnZsYW5fcHJvdG8pKSB7Cj4gPiAgICAgICAgICAgICAgICAgc2ti
ID0gX192bGFuX2h3YWNjZWxfcHVzaF9pbnNpZGUoc2tiKTsKPiA+ICAgICAgICAgICAgICAgICBp
ZiAodW5saWtlbHkoIXNrYikpIHsKPiA+ICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFRoaXMg
aXMgYWN0dWFsbHkgYSBwYWNrZXQgZHJvcCwgYnV0IHdlCj4gPiBkaWZmIC0tZ2l0IGEvbmV0L2V0
aHRvb2wvZmVhdHVyZXMuYyBiL25ldC9ldGh0b29sL2ZlYXR1cmVzLmMKPiA+IGluZGV4IDFjOWY0
ZGYuLjBlZWRiMTcgMTAwNjQ0Cj4gPiAtLS0gYS9uZXQvZXRodG9vbC9mZWF0dXJlcy5jCj4gPiAr
KysgYi9uZXQvZXRodG9vbC9mZWF0dXJlcy5jCj4gPiBAQCAtMjUsMTIgKzI1LDEzIEBAIGNvbnN0
IHN0cnVjdCBubGFfcG9saWN5IGV0aG5sX2ZlYXR1cmVzX2dldF9wb2xpY3lbXSA9IHsKPiA+ICAg
ICAgICAgICAgICAgICBOTEFfUE9MSUNZX05FU1RFRChldGhubF9oZWFkZXJfcG9saWN5KSwKPiA+
ICB9Owo+ID4KPiA+IC1zdGF0aWMgdm9pZCBldGhubF9mZWF0dXJlc190b19iaXRtYXAzMih1MzIg
KmRlc3QsIG5ldGRldl9mZWF0dXJlc190IHNyYykKPiA+ICtzdGF0aWMgdm9pZCBldGhubF9mZWF0
dXJlc190b19iaXRtYXAzMih1MzIgKmRlc3QsIG5ldGRldl9mZWF0dXJlc190ICpzcmMpCj4gPiAg
ewo+ID4gKyAgICAgICB1MzIgKl9fc3JjID0gKHUzMiAqKXNyYzsKPiA+ICAgICAgICAgdW5zaWdu
ZWQgaW50IGk7Cj4gPgo+ID4gICAgICAgICBmb3IgKGkgPSAwOyBpIDwgRVRIVE9PTF9ERVZfRkVB
VFVSRV9XT1JEUzsgaSsrKQo+ID4gLSAgICAgICAgICAgICAgIGRlc3RbaV0gPSBzcmMgPj4gKDMy
ICogaSk7Cj4gPiArICAgICAgICAgICAgICAgZGVzdFtpXSA9IF9fc3JjW2ldOwo+ID4gIH0KPiA+
Cj4gPiAgc3RhdGljIGludCBmZWF0dXJlc19wcmVwYXJlX2RhdGEoY29uc3Qgc3RydWN0IGV0aG5s
X3JlcV9pbmZvICpyZXFfYmFzZSwKPiA+IEBAIC0zOCwxNSArMzksMjMgQEAgc3RhdGljIGludCBm
ZWF0dXJlc19wcmVwYXJlX2RhdGEoY29uc3Qgc3RydWN0Cj4gPiBldGhubF9yZXFfaW5mbyAqcmVx
X2Jhc2UsCj4gPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgZ2VubF9p
bmZvICppbmZvKQo+ID4gIHsKPiA+ICAgICAgICAgc3RydWN0IGZlYXR1cmVzX3JlcGx5X2RhdGEg
KmRhdGEgPSBGRUFUVVJFU19SRVBEQVRBKHJlcGx5X2Jhc2UpOwo+ID4gKyAgICAgICBuZXRkZXZf
ZmVhdHVyZXNfdCBmZWF0dXJlc1tORVRERVZfRkVBVFVSRV9EV09SRFNdID0gezB9Owo+ID4gICAg
ICAgICBzdHJ1Y3QgbmV0X2RldmljZSAqZGV2ID0gcmVwbHlfYmFzZS0+ZGV2Owo+ID4gLSAgICAg
ICBuZXRkZXZfZmVhdHVyZXNfdCBhbGxfZmVhdHVyZXM7Cj4gPiArICAgICAgIHVuc2lnbmVkIGlu
dCBpOwo+ID4KPiA+ICAgICAgICAgZXRobmxfZmVhdHVyZXNfdG9fYml0bWFwMzIoZGF0YS0+aHcs
IGRldi0+aHdfZmVhdHVyZXMpOwo+ID4gICAgICAgICBldGhubF9mZWF0dXJlc190b19iaXRtYXAz
MihkYXRhLT53YW50ZWQsIGRldi0+d2FudGVkX2ZlYXR1cmVzKTsKPiA+ICAgICAgICAgZXRobmxf
ZmVhdHVyZXNfdG9fYml0bWFwMzIoZGF0YS0+YWN0aXZlLCBkZXYtPmZlYXR1cmVzKTsKPiA+IC0g
ICAgICAgZXRobmxfZmVhdHVyZXNfdG9fYml0bWFwMzIoZGF0YS0+bm9jaGFuZ2UsIE5FVElGX0Zf
TkVWRVJfQ0hBTkdFKTsKPiA+IC0gICAgICAgYWxsX2ZlYXR1cmVzID0gR0VOTUFTS19VTEwoTkVU
REVWX0ZFQVRVUkVfQ09VTlQgLSAxLCAwKTsKPiA+IC0gICAgICAgZXRobmxfZmVhdHVyZXNfdG9f
Yml0bWFwMzIoZGF0YS0+YWxsLCBhbGxfZmVhdHVyZXMpOwo+ID4gKyAgICAgICBmZWF0dXJlc1sw
XSA9IE5FVElGX0ZfTkVWRVJfQ0hBTkdFOwo+ID4gKyAgICAgICBldGhubF9mZWF0dXJlc190b19i
aXRtYXAzMihkYXRhLT5ub2NoYW5nZSwgZmVhdHVyZXMpOwo+ID4gKyAgICAgICBmb3IgKGkgPSAw
OyBpIDwgTkVUREVWX0ZFQVRVUkVfRFdPUkRTOyBpKyspIHsKPiA+ICsgICAgICAgICAgICAgICBp
ZiAoTkVUREVWX0ZFQVRVUkVfQ09VTlQgPj0gKGkgKyAxKSAqIDY0KQo+ID4gKyAgICAgICAgICAg
ICAgICAgICAgICAgZmVhdHVyZXNbaV0gPSBHRU5NQVNLX1VMTCg2MywgMCk7Cj4gPiArICAgICAg
ICAgICAgICAgZWxzZQo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZXNbaV0gPSBH
RU5NQVNLX1VMTChORVRERVZfRkVBVFVSRV9DT1VOVCAtIGkgKiA2NCwKPiA+ICsgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMCk7Cj4gPiArICAgICAgIH0K
PiA+ICsgICAgICAgZXRobmxfZmVhdHVyZXNfdG9fYml0bWFwMzIoZGF0YS0+YWxsLCBmZWF0dXJl
cyk7Cj4gPgo+ID4gICAgICAgICByZXR1cm4gMDsKPiA+ICB9Cj4gPiBAQCAtMTMxLDI3ICsxNDAs
MjkgQEAgY29uc3Qgc3RydWN0IG5sYV9wb2xpY3kgZXRobmxfZmVhdHVyZXNfc2V0X3BvbGljeVtd
ID0gewo+ID4gICAgICAgICBbRVRIVE9PTF9BX0ZFQVRVUkVTX1dBTlRFRF0gICAgID0geyAudHlw
ZSA9IE5MQV9ORVNURUQgfSwKPiA+ICB9Owo+ID4KPiA+IC1zdGF0aWMgdm9pZCBldGhubF9mZWF0
dXJlc190b19iaXRtYXAodW5zaWduZWQgbG9uZyAqZGVzdCwKPiA+IG5ldGRldl9mZWF0dXJlc190
IHZhbCkKPiA+ICtzdGF0aWMgdm9pZCBldGhubF9mZWF0dXJlc190b19iaXRtYXAodW5zaWduZWQg
bG9uZyAqZGVzdCwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXRk
ZXZfZmVhdHVyZXNfdCAqdmFsKQo+ID4gIHsKPiA+ICAgICAgICAgY29uc3QgdW5zaWduZWQgaW50
IHdvcmRzID0gQklUU19UT19MT05HUyhORVRERVZfRkVBVFVSRV9DT1VOVCk7Cj4gPiAgICAgICAg
IHVuc2lnbmVkIGludCBpOwo+ID4KPiA+ICAgICAgICAgYml0bWFwX3plcm8oZGVzdCwgTkVUREVW
X0ZFQVRVUkVfQ09VTlQpOwo+ID4gICAgICAgICBmb3IgKGkgPSAwOyBpIDwgd29yZHM7IGkrKykK
PiA+IC0gICAgICAgICAgICAgICBkZXN0W2ldID0gKHVuc2lnbmVkIGxvbmcpKHZhbCA+PiAoaSAq
IEJJVFNfUEVSX0xPTkcpKTsKPiA+ICsgICAgICAgICAgICAgICBkZXN0W2ldID0KPiA+ICsgICAg
ICAgICAgICAgICAgICAgICAgICh1bnNpZ25lZCBsb25nKSh2YWxbaSAvIDJdID4+IChpICUgMiAq
IEJJVFNfUEVSX0xPTkcpKTsKPiA+ICB9Cj4gPgo+ID4gLXN0YXRpYyBuZXRkZXZfZmVhdHVyZXNf
dCBldGhubF9iaXRtYXBfdG9fZmVhdHVyZXModW5zaWduZWQgbG9uZyAqc3JjKQo+ID4gK3N0YXRp
YyB2b2lkIGV0aG5sX2JpdG1hcF90b19mZWF0dXJlcyhuZXRkZXZfZmVhdHVyZXNfdCAqdmFsLCB1
bnNpZ25lZAo+ID4gbG9uZyAqc3JjKQo+ID4gIHsKPiA+IC0gICAgICAgY29uc3QgdW5zaWduZWQg
aW50IG5mdF9iaXRzID0gc2l6ZW9mKG5ldGRldl9mZWF0dXJlc190KSAqIEJJVFNfUEVSX0JZVEU7
Cj4gPiAgICAgICAgIGNvbnN0IHVuc2lnbmVkIGludCB3b3JkcyA9IEJJVFNfVE9fTE9OR1MoTkVU
REVWX0ZFQVRVUkVfQ09VTlQpOwo+ID4gLSAgICAgICBuZXRkZXZfZmVhdHVyZXNfdCByZXQgPSAw
Owo+ID4gICAgICAgICB1bnNpZ25lZCBpbnQgaTsKPiA+Cj4gPiArICAgICAgIGZvciAoaSA9IDA7
IGkgPCBORVRERVZfRkVBVFVSRV9EV09SRFM7IGkrKykKPiA+ICsgICAgICAgICAgICAgICB2YWxb
aV0gPSAwOwo+ID4gKwo+ID4gICAgICAgICBmb3IgKGkgPSAwOyBpIDwgd29yZHM7IGkrKykKPiA+
IC0gICAgICAgICAgICAgICByZXQgfD0gKG5ldGRldl9mZWF0dXJlc190KShzcmNbaV0pIDw8IChp
ICogQklUU19QRVJfTE9ORyk7Cj4gPiAtICAgICAgIHJldCAmPSB+KG5ldGRldl9mZWF0dXJlc190
KTAgPj4gKG5mdF9iaXRzIC0gTkVUREVWX0ZFQVRVUkVfQ09VTlQpOwo+ID4gLSAgICAgICByZXR1
cm4gcmV0Owo+ID4gKyAgICAgICAgICAgICAgIHZhbFtpIC8gMl0gfD0KPiA+ICsgICAgICAgICAg
ICAgICAgICAgICAgIChuZXRkZXZfZmVhdHVyZXNfdCkoc3JjW2ldKSA8PCAoaSAlIDIgKiBCSVRT
X1BFUl9MT05HKTsKPiA+ICB9Cj4gPgo+ID4gIHN0YXRpYyBpbnQgZmVhdHVyZXNfc2VuZF9yZXBs
eShzdHJ1Y3QgbmV0X2RldmljZSAqZGV2LCBzdHJ1Y3QgZ2VubF9pbmZvICppbmZvLAo+ID4gQEAg
LTIxMiwxMiArMjIzLDE0IEBAIGludCBldGhubF9zZXRfZmVhdHVyZXMoc3RydWN0IHNrX2J1ZmYg
KnNrYiwKPiA+IHN0cnVjdCBnZW5sX2luZm8gKmluZm8pCj4gPiAgewo+ID4gICAgICAgICBERUNM
QVJFX0JJVE1BUCh3YW50ZWRfZGlmZl9tYXNrLCBORVRERVZfRkVBVFVSRV9DT1VOVCk7Cj4gPiAg
ICAgICAgIERFQ0xBUkVfQklUTUFQKGFjdGl2ZV9kaWZmX21hc2ssIE5FVERFVl9GRUFUVVJFX0NP
VU5UKTsKPiA+ICsgICAgICAgbmV0ZGV2X2ZlYXR1cmVzX3QgZmVhdHVyZXNbTkVUREVWX0ZFQVRV
UkVfRFdPUkRTXTsKPiA+ICAgICAgICAgREVDTEFSRV9CSVRNQVAob2xkX2FjdGl2ZSwgTkVUREVW
X0ZFQVRVUkVfQ09VTlQpOwo+ID4gICAgICAgICBERUNMQVJFX0JJVE1BUChvbGRfd2FudGVkLCBO
RVRERVZfRkVBVFVSRV9DT1VOVCk7Cj4gPiAgICAgICAgIERFQ0xBUkVfQklUTUFQKG5ld19hY3Rp
dmUsIE5FVERFVl9GRUFUVVJFX0NPVU5UKTsKPiA+ICAgICAgICAgREVDTEFSRV9CSVRNQVAobmV3
X3dhbnRlZCwgTkVUREVWX0ZFQVRVUkVfQ09VTlQpOwo+ID4gICAgICAgICBERUNMQVJFX0JJVE1B
UChyZXFfd2FudGVkLCBORVRERVZfRkVBVFVSRV9DT1VOVCk7Cj4gPiAgICAgICAgIERFQ0xBUkVf
QklUTUFQKHJlcV9tYXNrLCBORVRERVZfRkVBVFVSRV9DT1VOVCk7Cj4gPiArICAgICAgIG5ldGRl
dl9mZWF0dXJlc190IHRtcFtORVRERVZfRkVBVFVSRV9EV09SRFNdOwo+ID4gICAgICAgICBzdHJ1
Y3QgZXRobmxfcmVxX2luZm8gcmVxX2luZm8gPSB7fTsKPiA+ICAgICAgICAgc3RydWN0IG5sYXR0
ciAqKnRiID0gaW5mby0+YXR0cnM7Cj4gPiAgICAgICAgIHN0cnVjdCBuZXRfZGV2aWNlICpkZXY7
Cj4gPiBAQCAtMjQyLDcgKzI1NSwxMSBAQCBpbnQgZXRobmxfc2V0X2ZlYXR1cmVzKHN0cnVjdCBz
a19idWZmICpza2IsCj4gPiBzdHJ1Y3QgZ2VubF9pbmZvICppbmZvKQo+ID4gICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgbmV0ZGV2X2ZlYXR1cmVzX3N0cmluZ3MsIGluZm8tPmV4dGFj
ayk7Cj4gPiAgICAgICAgIGlmIChyZXQgPCAwKQo+ID4gICAgICAgICAgICAgICAgIGdvdG8gb3V0
X3J0bmw7Cj4gPiAtICAgICAgIGlmIChldGhubF9iaXRtYXBfdG9fZmVhdHVyZXMocmVxX21hc2sp
ICYgfk5FVElGX0ZfRVRIVE9PTF9CSVRTKSB7Cj4gPiArCj4gPiArICAgICAgIGV0aG5sX2JpdG1h
cF90b19mZWF0dXJlcyhmZWF0dXJlcywgcmVxX21hc2spOwo+ID4gKyAgICAgICBuZXRkZXZfZmVh
dHVyZXNfZXRodG9vbF9iaXRzKHRtcCk7Cj4gPiArICAgICAgIG5ldGRldl9mZWF0dXJlc19hbmRu
b3QoZmVhdHVyZXMsIGZlYXR1cmVzLCB0bXApOwo+ID4gKyAgICAgICBpZiAoIW5ldGRldl9mZWF0
dXJlc19lbXB0eShmZWF0dXJlcykpIHsKPiA+ICAgICAgICAgICAgICAgICBHRU5MX1NFVF9FUlJf
TVNHKGluZm8sICJhdHRlbXB0IHRvIGNoYW5nZSBub24tZXRodG9vbAo+ID4gZmVhdHVyZXMiKTsK
PiA+ICAgICAgICAgICAgICAgICByZXQgPSAtRUlOVkFMOwo+ID4gICAgICAgICAgICAgICAgIGdv
dG8gb3V0X3J0bmw7Cj4gPiBAQCAtMjUzLDggKzI3MCwxMyBAQCBpbnQgZXRobmxfc2V0X2ZlYXR1
cmVzKHN0cnVjdCBza19idWZmICpza2IsCj4gPiBzdHJ1Y3QgZ2VubF9pbmZvICppbmZvKQo+ID4g
ICAgICAgICBiaXRtYXBfYW5kbm90KG5ld193YW50ZWQsIG9sZF93YW50ZWQsIHJlcV9tYXNrLCBO
RVRERVZfRkVBVFVSRV9DT1VOVCk7Cj4gPiAgICAgICAgIGJpdG1hcF9vcihyZXFfd2FudGVkLCBu
ZXdfd2FudGVkLCByZXFfd2FudGVkLCBORVRERVZfRkVBVFVSRV9DT1VOVCk7Cj4gPiAgICAgICAg
IGlmICghYml0bWFwX2VxdWFsKHJlcV93YW50ZWQsIG9sZF93YW50ZWQsIE5FVERFVl9GRUFUVVJF
X0NPVU5UKSkgewo+ID4gLSAgICAgICAgICAgICAgIGRldi0+d2FudGVkX2ZlYXR1cmVzICY9IH5k
ZXYtPmh3X2ZlYXR1cmVzOwo+ID4gLSAgICAgICAgICAgICAgIGRldi0+d2FudGVkX2ZlYXR1cmVz
IHw9Cj4gPiBldGhubF9iaXRtYXBfdG9fZmVhdHVyZXMocmVxX3dhbnRlZCkgJiBkZXYtPmh3X2Zl
YXR1cmVzOwo+ID4gKyAgICAgICAgICAgICAgIG5ldGRldl9mZWF0dXJlc19hbmRub3QoZGV2LT53
YW50ZWRfZmVhdHVyZXMsCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBkZXYtPndhbnRlZF9mZWF0dXJlcywKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGRldi0+aHdfZmVhdHVyZXMpOwo+ID4gKyAgICAgICAgICAgICAgIGV0aG5sX2Jp
dG1hcF90b19mZWF0dXJlcyhmZWF0dXJlcywgcmVxX3dhbnRlZCk7Cj4gPiArICAgICAgICAgICAg
ICAgbmV0ZGV2X2ZlYXR1cmVzX2FuZChmZWF0dXJlcywgZmVhdHVyZXMsIGRldi0+aHdfZmVhdHVy
ZXMpOwo+ID4gKyAgICAgICAgICAgICAgIG5ldGRldl9mZWF0dXJlc19vcihkZXYtPndhbnRlZF9m
ZWF0dXJlcywgZGV2LT53YW50ZWRfZmVhdHVyZXMsCj4gPiArICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGZlYXR1cmVzKTsKPiA+ICAgICAgICAgICAgICAgICBfX25ldGRldl91cGRh
dGVfZmVhdHVyZXMoZGV2KTsKPiA+ICAgICAgICAgfQo+ID4gICAgICAgICBldGhubF9mZWF0dXJl
c190b19iaXRtYXAobmV3X2FjdGl2ZSwgZGV2LT5mZWF0dXJlcyk7Cj4gPiBkaWZmIC0tZ2l0IGEv
bmV0L2V0aHRvb2wvaW9jdGwuYyBiL25ldC9ldGh0b29sL2lvY3RsLmMKPiA+IGluZGV4IGJhYTVk
MTAuLmYyMTNlYzkgMTAwNjQ0Cj4gPiAtLS0gYS9uZXQvZXRodG9vbC9pb2N0bC5jCj4gPiArKysg
Yi9uZXQvZXRodG9vbC9pb2N0bC5jCj4gPiBAQCAtNjcsMTIgKzY3LDE1IEBAIHN0YXRpYyBpbnQg
ZXRodG9vbF9nZXRfZmVhdHVyZXMoc3RydWN0IG5ldF9kZXZpY2UKPiA+ICpkZXYsIHZvaWQgX191
c2VyICp1c2VyYWRkcikKPiA+ICAgICAgICAgaW50IGk7Cj4gPgo+ID4gICAgICAgICAvKiBpbiBj
YXNlIGZlYXR1cmUgYml0cyBydW4gb3V0IGFnYWluICovCj4gPiAtICAgICAgIEJVSUxEX0JVR19P
TihFVEhUT09MX0RFVl9GRUFUVVJFX1dPUkRTICogc2l6ZW9mKHUzMikgPgo+ID4gc2l6ZW9mKG5l
dGRldl9mZWF0dXJlc190KSk7Cj4gPiArICAgICAgIEJVSUxEX0JVR19PTihFVEhUT09MX0RFVl9G
RUFUVVJFX1dPUkRTICogc2l6ZW9mKHUzMikgPgo+ID4gc2l6ZW9mKGRldi0+ZmVhdHVyZXMpKTsK
PiA+Cj4gPiAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBFVEhUT09MX0RFVl9GRUFUVVJFX1dPUkRT
OyArK2kpIHsKPiA+IC0gICAgICAgICAgICAgICBmZWF0dXJlc1tpXS5hdmFpbGFibGUgPSAodTMy
KShkZXYtPmh3X2ZlYXR1cmVzID4+ICgzMiAqIGkpKTsKPiA+IC0gICAgICAgICAgICAgICBmZWF0
dXJlc1tpXS5yZXF1ZXN0ZWQgPSAodTMyKShkZXYtPndhbnRlZF9mZWF0dXJlcyA+PiAoMzIgKiBp
KSk7Cj4gPiAtICAgICAgICAgICAgICAgZmVhdHVyZXNbaV0uYWN0aXZlID0gKHUzMikoZGV2LT5m
ZWF0dXJlcyA+PiAoMzIgKiBpKSk7Cj4gPiArICAgICAgICAgICAgICAgZmVhdHVyZXNbaV0uYXZh
aWxhYmxlID0KPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICh1MzIpKGRldi0+aHdfZmVhdHVy
ZXNbaSAvIDJdID4+IChpICUgMiAqIDMyKSk7Cj4gPiArICAgICAgICAgICAgICAgZmVhdHVyZXNb
aV0ucmVxdWVzdGVkID0KPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICh1MzIpKGRldi0+d2Fu
dGVkX2ZlYXR1cmVzW2kgLyAyXSA+PiAoaSAlIDIgKiAzMikpOwo+ID4gKyAgICAgICAgICAgICAg
IGZlYXR1cmVzW2ldLmFjdGl2ZSA9Cj4gPiArICAgICAgICAgICAgICAgICAgICAgICAodTMyKShk
ZXYtPmZlYXR1cmVzW2kgLyAyXSA+PiAoaSAlIDIgKiAzMikpOwo+ID4gICAgICAgICAgICAgICAg
IGZlYXR1cmVzW2ldLm5ldmVyX2NoYW5nZWQgPQo+ID4gICAgICAgICAgICAgICAgICAgICAgICAg
KHUzMikoTkVUSUZfRl9ORVZFUl9DSEFOR0UgPj4gKDMyICogaSkpOwo+ID4gICAgICAgICB9Cj4g
PiBAQCAtOTcsNyArMTAwLDkgQEAgc3RhdGljIGludCBldGh0b29sX3NldF9mZWF0dXJlcyhzdHJ1
Y3QgbmV0X2RldmljZQo+ID4gKmRldiwgdm9pZCBfX3VzZXIgKnVzZXJhZGRyKQo+ID4gIHsKPiA+
ICAgICAgICAgc3RydWN0IGV0aHRvb2xfc2ZlYXR1cmVzIGNtZDsKPiA+ICAgICAgICAgc3RydWN0
IGV0aHRvb2xfc2V0X2ZlYXR1cmVzX2Jsb2NrIGZlYXR1cmVzW0VUSFRPT0xfREVWX0ZFQVRVUkVf
V09SRFNdOwo+ID4gLSAgICAgICBuZXRkZXZfZmVhdHVyZXNfdCB3YW50ZWQgPSAwLCB2YWxpZCA9
IDA7Cj4gPiArICAgICAgIG5ldGRldl9mZWF0dXJlc190IHdhbnRlZFtORVRERVZfRkVBVFVSRV9E
V09SRFNdID0gezB9Owo+ID4gKyAgICAgICBuZXRkZXZfZmVhdHVyZXNfdCB2YWxpZFtORVRERVZf
RkVBVFVSRV9EV09SRFNdID0gezB9Owo+ID4gKyAgICAgICBuZXRkZXZfZmVhdHVyZXNfdCB0bXBb
TkVUREVWX0ZFQVRVUkVfRFdPUkRTXTsKPiA+ICAgICAgICAgaW50IGksIHJldCA9IDA7Cj4gPgo+
ID4gICAgICAgICBpZiAoY29weV9mcm9tX3VzZXIoJmNtZCwgdXNlcmFkZHIsIHNpemVvZihjbWQp
KSkKPiA+IEBAIC0xMTEsMjMgKzExNiwzMyBAQCBzdGF0aWMgaW50IGV0aHRvb2xfc2V0X2ZlYXR1
cmVzKHN0cnVjdAo+ID4gbmV0X2RldmljZSAqZGV2LCB2b2lkIF9fdXNlciAqdXNlcmFkZHIpCj4g
PiAgICAgICAgICAgICAgICAgcmV0dXJuIC1FRkFVTFQ7Cj4gPgo+ID4gICAgICAgICBmb3IgKGkg
PSAwOyBpIDwgRVRIVE9PTF9ERVZfRkVBVFVSRV9XT1JEUzsgKytpKSB7Cj4gPiAtICAgICAgICAg
ICAgICAgdmFsaWQgfD0gKG5ldGRldl9mZWF0dXJlc190KWZlYXR1cmVzW2ldLnZhbGlkIDw8ICgz
MiAqIGkpOwo+ID4gLSAgICAgICAgICAgICAgIHdhbnRlZCB8PSAobmV0ZGV2X2ZlYXR1cmVzX3Qp
ZmVhdHVyZXNbaV0ucmVxdWVzdGVkIDw8ICgzMiAqIGkpOwo+ID4gKyAgICAgICAgICAgICAgIHZh
bGlkW2kgLyAyXSB8PQo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgKG5ldGRldl9mZWF0dXJl
c190KWZlYXR1cmVzW2ldLnZhbGlkIDw8ICgzMiAqIGkpOwo+ID4gKyAgICAgICAgICAgICAgIHdh
bnRlZFtpIC8gMl0gfD0KPiA+ICsgICAgICAgICAgICAgICAgICAgICAgIChuZXRkZXZfZmVhdHVy
ZXNfdClmZWF0dXJlc1tpXS5yZXF1ZXN0ZWQgPDwgKDMyICogaSk7Cj4gPiAgICAgICAgIH0KPiA+
Cj4gPiAtICAgICAgIGlmICh2YWxpZCAmIH5ORVRJRl9GX0VUSFRPT0xfQklUUykKPiA+ICsgICAg
ICAgbmV0ZGV2X2ZlYXR1cmVzX2V0aHRvb2xfYml0cyh0bXApOwo+ID4gKyAgICAgICBuZXRkZXZf
ZmVhdHVyZXNfYW5kbm90KHRtcCwgZmVhdHVyZXMsIHRtcCk7Cj4gPiArICAgICAgIGlmICghbmV0
ZGV2X2ZlYXR1cmVzX2VtcHR5KHRtcCkpCj4gPiAgICAgICAgICAgICAgICAgcmV0dXJuIC1FSU5W
QUw7Cj4gPgo+ID4gLSAgICAgICBpZiAodmFsaWQgJiB+ZGV2LT5od19mZWF0dXJlcykgewo+ID4g
LSAgICAgICAgICAgICAgIHZhbGlkICY9IGRldi0+aHdfZmVhdHVyZXM7Cj4gPiArICAgICAgIG5l
dGRldl9mZWF0dXJlc19hbmRub3QodG1wLCB2YWxpZCwgZGV2LT5od19mZWF0dXJlcyk7Cj4gPiAr
Cj4gPiArICAgICAgIGlmICghbmV0ZGV2X2ZlYXR1cmVzX2VtcHR5KHRtcCkpIHsKPiA+ICsgICAg
ICAgICAgICAgICBuZXRkZXZfZmVhdHVyZXNfYW5kKHZhbGlkLCB2YWxpZCwgZGV2LT5od19mZWF0
dXJlcyk7Cj4gPiAgICAgICAgICAgICAgICAgcmV0IHw9IEVUSFRPT0xfRl9VTlNVUFBPUlRFRDsK
PiA+ICAgICAgICAgfQo+ID4KPiA+IC0gICAgICAgZGV2LT53YW50ZWRfZmVhdHVyZXMgJj0gfnZh
bGlkOwo+ID4gLSAgICAgICBkZXYtPndhbnRlZF9mZWF0dXJlcyB8PSB3YW50ZWQgJiB2YWxpZDsK
PiA+ICsgICAgICAgbmV0ZGV2X2ZlYXR1cmVzX2FuZG5vdChkZXYtPndhbnRlZF9mZWF0dXJlcywg
ZGV2LT53YW50ZWRfZmVhdHVyZXMsCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
dmFsaWQpOwo+ID4gKyAgICAgICBuZXRkZXZfZmVhdHVyZXNfYW5kKHdhbnRlZCwgd2FudGVkLCB2
YWxpZCk7Cj4gPiArICAgICAgIG5ldGRldl9mZWF0dXJlc19vcihkZXYtPndhbnRlZF9mZWF0dXJl
cywgZGV2LT53YW50ZWRfZmVhdHVyZXMsIHdhbnRlZCk7Cj4gPiAgICAgICAgIF9fbmV0ZGV2X3Vw
ZGF0ZV9mZWF0dXJlcyhkZXYpOwo+ID4KPiA+IC0gICAgICAgaWYgKChkZXYtPndhbnRlZF9mZWF0
dXJlcyBeIGRldi0+ZmVhdHVyZXMpICYgdmFsaWQpCj4gPiArICAgICAgIG5ldGRldl9mZWF0dXJl
c194b3IodG1wLCBkZXYtPndhbnRlZF9mZWF0dXJlcywgZGV2LT5mZWF0dXJlcyk7Cj4gPiArICAg
ICAgIG5ldGRldl9mZWF0dXJlc19hbmQodG1wLCB0bXAsIHZhbGlkKTsKPiA+ICsgICAgICAgaWYg
KCFuZXRkZXZfZmVhdHVyZXNfZW1wdHkodG1wKSkKPiA+ICAgICAgICAgICAgICAgICByZXQgfD0g
RVRIVE9PTF9GX1dJU0g7Cj4gPgo+ID4gICAgICAgICByZXR1cm4gcmV0Owo+ID4gQEAgLTIyNyw3
ICsyNDIsNyBAQCBzdGF0aWMgaW50IGV0aHRvb2xfZ2V0X29uZV9mZWF0dXJlKHN0cnVjdCBuZXRf
ZGV2aWNlICpkZXYsCj4gPiAgICAgICAgIG5ldGRldl9mZWF0dXJlc190IG1hc2sgPSBldGh0b29s
X2dldF9mZWF0dXJlX21hc2soZXRoY21kKTsKPiA+ICAgICAgICAgc3RydWN0IGV0aHRvb2xfdmFs
dWUgZWRhdGEgPSB7Cj4gPiAgICAgICAgICAgICAgICAgLmNtZCA9IGV0aGNtZCwKPiA+IC0gICAg
ICAgICAgICAgICAuZGF0YSA9ICEhKGRldi0+ZmVhdHVyZXMgJiBtYXNrKSwKPiA+ICsgICAgICAg
ICAgICAgICAuZGF0YSA9ICEhKGRldi0+ZmVhdHVyZXNbMF0gJiBtYXNrKSwKPiA+ICAgICAgICAg
fTsKPiA+Cj4gPiAgICAgICAgIGlmIChjb3B5X3RvX3VzZXIodXNlcmFkZHIsICZlZGF0YSwgc2l6
ZW9mKGVkYXRhKSkpCj4gPiBAQCAtMjM4LDIxICsyNTMsMjMgQEAgc3RhdGljIGludCBldGh0b29s
X2dldF9vbmVfZmVhdHVyZShzdHJ1Y3QgbmV0X2RldmljZSAqZGV2LAo+ID4gIHN0YXRpYyBpbnQg
ZXRodG9vbF9zZXRfb25lX2ZlYXR1cmUoc3RydWN0IG5ldF9kZXZpY2UgKmRldiwKPiA+ICAgICAg
ICAgdm9pZCBfX3VzZXIgKnVzZXJhZGRyLCB1MzIgZXRoY21kKQo+ID4gIHsKPiA+ICsgICAgICAg
bmV0ZGV2X2ZlYXR1cmVzX3QgbWFza1tORVRERVZfRkVBVFVSRV9EV09SRFNdID0gezB9Owo+ID4g
ICAgICAgICBzdHJ1Y3QgZXRodG9vbF92YWx1ZSBlZGF0YTsKPiA+IC0gICAgICAgbmV0ZGV2X2Zl
YXR1cmVzX3QgbWFzazsKPiA+Cj4gPiAgICAgICAgIGlmIChjb3B5X2Zyb21fdXNlcigmZWRhdGEs
IHVzZXJhZGRyLCBzaXplb2YoZWRhdGEpKSkKPiA+ICAgICAgICAgICAgICAgICByZXR1cm4gLUVG
QVVMVDsKPiA+Cj4gPiAtICAgICAgIG1hc2sgPSBldGh0b29sX2dldF9mZWF0dXJlX21hc2soZXRo
Y21kKTsKPiA+IC0gICAgICAgbWFzayAmPSBkZXYtPmh3X2ZlYXR1cmVzOwo+ID4gLSAgICAgICBp
ZiAoIW1hc2spCj4gPiArICAgICAgIG1hc2tbMF0gPSBldGh0b29sX2dldF9mZWF0dXJlX21hc2so
ZXRoY21kKTsKPiA+ICsgICAgICAgbmV0ZGV2X2ZlYXR1cmVzX2FuZChtYXNrLCBtYXNrLCBkZXYt
Pmh3X2ZlYXR1cmVzKTsKPiA+ICsgICAgICAgaWYgKG5ldGRldl9mZWF0dXJlc19lbXB0eShtYXNr
KSkKPiA+ICAgICAgICAgICAgICAgICByZXR1cm4gLUVPUE5PVFNVUFA7Cj4gPgo+ID4gICAgICAg
ICBpZiAoZWRhdGEuZGF0YSkKPiA+IC0gICAgICAgICAgICAgICBkZXYtPndhbnRlZF9mZWF0dXJl
cyB8PSBtYXNrOwo+ID4gKyAgICAgICAgICAgICAgIG5ldGRldl9mZWF0dXJlc19vcihkZXYtPndh
bnRlZF9mZWF0dXJlcywgZGV2LT53YW50ZWRfZmVhdHVyZXMsCj4gPiArICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIG1hc2spCj4gPiAgICAgICAgIGVsc2UKPiA+IC0gICAgICAgICAg
ICAgICBkZXYtPndhbnRlZF9mZWF0dXJlcyAmPSB+bWFzazsKPiA+ICsgICAgICAgICAgICAgICBu
ZXRkZXZfZmVhdHVyZXNfYW5kbm90KGRldi0+d2FudGVkX2ZlYXR1cmVzLAo+ID4gKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV2LT53YW50ZWRfZmVhdHVyZXMsIG1hc2sp
Owo+ID4KPiA+ICAgICAgICAgX19uZXRkZXZfdXBkYXRlX2ZlYXR1cmVzKGRldik7Cj4gPgo+ID4g
QEAgLTI4NSwyOSArMzAyLDM3IEBAIHN0YXRpYyB1MzIgX19ldGh0b29sX2dldF9mbGFncyhzdHJ1
Y3QgbmV0X2RldmljZSAqZGV2KQo+ID4KPiA+ICBzdGF0aWMgaW50IF9fZXRodG9vbF9zZXRfZmxh
Z3Moc3RydWN0IG5ldF9kZXZpY2UgKmRldiwgdTMyIGRhdGEpCj4gPiAgewo+ID4gLSAgICAgICBu
ZXRkZXZfZmVhdHVyZXNfdCBmZWF0dXJlcyA9IDAsIGNoYW5nZWQ7Cj4gPiArICAgICAgIG5ldGRl
dl9mZWF0dXJlc190IGZlYXR1cmVzW05FVERFVl9GRUFUVVJFX0RXT1JEU10gPSB7MH07Cj4gPiAr
ICAgICAgIG5ldGRldl9mZWF0dXJlc190IGNoYW5nZWRbTkVUREVWX0ZFQVRVUkVfRFdPUkRTXTsK
PiA+ICsgICAgICAgbmV0ZGV2X2ZlYXR1cmVzX3QgdG1wW05FVERFVl9GRUFUVVJFX0RXT1JEU107
Cj4gPgo+ID4gICAgICAgICBpZiAoZGF0YSAmIH5FVEhfQUxMX0ZMQUdTKQo+ID4gICAgICAgICAg
ICAgICAgIHJldHVybiAtRUlOVkFMOwo+ID4KPiA+ICAgICAgICAgaWYgKGRhdGEgJiBFVEhfRkxB
R19MUk8pCj4gPiAtICAgICAgICAgICAgICAgZmVhdHVyZXMgfD0gTkVUSUZfRl9MUk87Cj4gPiAr
ICAgICAgICAgICAgICAgZmVhdHVyZXNbMF0gfD0gTkVUSUZfRl9MUk87Cj4gPiAgICAgICAgIGlm
IChkYXRhICYgRVRIX0ZMQUdfUlhWTEFOKQo+ID4gLSAgICAgICAgICAgICAgIGZlYXR1cmVzIHw9
IE5FVElGX0ZfSFdfVkxBTl9DVEFHX1JYOwo+ID4gKyAgICAgICAgICAgICAgIGZlYXR1cmVzWzBd
IHw9IE5FVElGX0ZfSFdfVkxBTl9DVEFHX1JYOwo+ID4gICAgICAgICBpZiAoZGF0YSAmIEVUSF9G
TEFHX1RYVkxBTikKPiA+IC0gICAgICAgICAgICAgICBmZWF0dXJlcyB8PSBORVRJRl9GX0hXX1ZM
QU5fQ1RBR19UWDsKPiA+ICsgICAgICAgICAgICAgICBmZWF0dXJlc1swXSB8PSBORVRJRl9GX0hX
X1ZMQU5fQ1RBR19UWDsKPiA+ICAgICAgICAgaWYgKGRhdGEgJiBFVEhfRkxBR19OVFVQTEUpCj4g
PiAtICAgICAgICAgICAgICAgZmVhdHVyZXMgfD0gTkVUSUZfRl9OVFVQTEU7Cj4gPiArICAgICAg
ICAgICAgICAgZmVhdHVyZXNbMF0gfD0gTkVUSUZfRl9OVFVQTEU7Cj4gPiAgICAgICAgIGlmIChk
YXRhICYgRVRIX0ZMQUdfUlhIQVNIKQo+ID4gLSAgICAgICAgICAgICAgIGZlYXR1cmVzIHw9IE5F
VElGX0ZfUlhIQVNIOwo+ID4gKyAgICAgICAgICAgICAgIGZlYXR1cmVzWzBdIHw9IE5FVElGX0Zf
UlhIQVNIOwo+ID4KPiA+ICAgICAgICAgLyogYWxsb3cgY2hhbmdpbmcgb25seSBiaXRzIHNldCBp
biBod19mZWF0dXJlcyAqLwo+ID4gLSAgICAgICBjaGFuZ2VkID0gKGZlYXR1cmVzIF4gZGV2LT5m
ZWF0dXJlcykgJiBFVEhfQUxMX0ZFQVRVUkVTOwo+ID4gLSAgICAgICBpZiAoY2hhbmdlZCAmIH5k
ZXYtPmh3X2ZlYXR1cmVzKQo+ID4gLSAgICAgICAgICAgICAgIHJldHVybiAoY2hhbmdlZCAmIGRl
di0+aHdfZmVhdHVyZXMpID8gLUVJTlZBTCA6IC1FT1BOT1RTVVBQOwo+ID4gKyAgICAgICBuZXRk
ZXZfZmVhdHVyZXNfeG9yKGNoYW5nZWQsIGZlYXR1cmVzLCBkZXYtPmZlYXR1cmVzKTsKPiA+ICsg
ICAgICAgY2hhbmdlZFswXSAmPSBFVEhfQUxMX0ZFQVRVUkVTOwo+ID4gKwo+ID4gKyAgICAgICBu
ZXRkZXZfZmVhdHVyZXNfYW5kbm90KHRtcCwgY2hhbmdlZCwgZGV2LT5od19mZWF0dXJlcyk7Cj4g
PiArICAgICAgIGlmICghbmV0ZGV2X2ZlYXR1cmVzX2VtcHR5KHRtcCkpIHsKPiA+ICsgICAgICAg
ICAgICAgICBuZXRkZXZfZmVhdHVyZXNfYW5kKHRtcCwgY2hhbmdlZCwgZGV2LT5od19mZWF0dXJl
cyk7Cj4gPiArICAgICAgICAgICAgICAgcmV0dXJuICghbmV0ZGV2X2ZlYXR1cmVzX2VtcHR5KHRt
cCkpID8gLUVJTlZBTCA6IC1FT1BOT1RTVVBQOwo+ID4gKyAgICAgICB9Cj4gPgo+ID4gLSAgICAg
ICBkZXYtPndhbnRlZF9mZWF0dXJlcyA9Cj4gPiAtICAgICAgICAgICAgICAgKGRldi0+d2FudGVk
X2ZlYXR1cmVzICYgfmNoYW5nZWQpIHwgKGZlYXR1cmVzICYgY2hhbmdlZCk7Cj4gPiArICAgICAg
IG5ldGRldl9mZWF0dXJlc19hbmRub3QodG1wLCBkZXYtPndhbnRlZF9mZWF0dXJlcywgY2hhbmdl
ZCk7Cj4gPiArICAgICAgIG5ldGRldl9mZWF0dXJlc19hbmQoZmVhdHVyZXMsIGZlYXR1cmVzLCBj
aGFuZ2VkKTsKPiA+ICsgICAgICAgbmV0ZGV2X2ZlYXR1cmVzX29yKGRldi0+d2FudGVkX2ZlYXR1
cmVzLCB0bXAsIGZlYXR1cmVzKTsKPiA+Cj4gPiAgICAgICAgIF9fbmV0ZGV2X3VwZGF0ZV9mZWF0
dXJlcyhkZXYpOwo+ID4KPiA+IEBAIC0yNTg3LDcgKzI2MTIsNyBAQCBpbnQgZGV2X2V0aHRvb2wo
c3RydWN0IG5ldCAqbmV0LCBzdHJ1Y3QgaWZyZXEgKmlmcikKPiA+ICAgICAgICAgdm9pZCBfX3Vz
ZXIgKnVzZXJhZGRyID0gaWZyLT5pZnJfZGF0YTsKPiA+ICAgICAgICAgdTMyIGV0aGNtZCwgc3Vi
X2NtZDsKPiA+ICAgICAgICAgaW50IHJjOwo+ID4gLSAgICAgICBuZXRkZXZfZmVhdHVyZXNfdCBv
bGRfZmVhdHVyZXM7Cj4gPiArICAgICAgIG5ldGRldl9mZWF0dXJlc190IG9sZF9mZWF0dXJlc1tO
RVRERVZfRkVBVFVSRV9EV09SRFNdOwo+ID4KPiA+ICAgICAgICAgaWYgKCFkZXYgfHwgIW5ldGlm
X2RldmljZV9wcmVzZW50KGRldikpCj4gPiAgICAgICAgICAgICAgICAgcmV0dXJuIC1FTk9ERVY7
Cj4gPiBAQCAtMjY1MCw3ICsyNjc1LDcgQEAgaW50IGRldl9ldGh0b29sKHN0cnVjdCBuZXQgKm5l
dCwgc3RydWN0IGlmcmVxICppZnIpCj4gPiAgICAgICAgICAgICAgICAgaWYgKHJjICA8IDApCj4g
PiAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmM7Cj4gPiAgICAgICAgIH0KPiA+IC0g
ICAgICAgb2xkX2ZlYXR1cmVzID0gZGV2LT5mZWF0dXJlczsKPiA+ICsgICAgICAgbmV0ZGV2X2Zl
YXR1cmVzX2NvcHkob2xkX2ZlYXR1cmVzLCBkZXYtPmZlYXR1cmVzKTsKPiA+Cj4gPiAgICAgICAg
IHN3aXRjaCAoZXRoY21kKSB7Cj4gPiAgICAgICAgIGNhc2UgRVRIVE9PTF9HU0VUOgo+ID4gQEAg
LTI4NjUsNyArMjg5MCw3IEBAIGludCBkZXZfZXRodG9vbChzdHJ1Y3QgbmV0ICpuZXQsIHN0cnVj
dCBpZnJlcSAqaWZyKQo+ID4gICAgICAgICBpZiAoZGV2LT5ldGh0b29sX29wcy0+Y29tcGxldGUp
Cj4gPiAgICAgICAgICAgICAgICAgZGV2LT5ldGh0b29sX29wcy0+Y29tcGxldGUoZGV2KTsKPiA+
Cj4gPiAtICAgICAgIGlmIChvbGRfZmVhdHVyZXMgIT0gZGV2LT5mZWF0dXJlcykKPiA+ICsgICAg
ICAgaWYgKCFuZXRkZXZfZmVhdHVyZXNfZXF1YWwob2xkX2ZlYXR1cmVzLCBkZXYtPmZlYXR1cmVz
KSkKPiA+ICAgICAgICAgICAgICAgICBuZXRkZXZfZmVhdHVyZXNfY2hhbmdlKGRldik7Cj4gPgo+
ID4gICAgICAgICByZXR1cm4gcmM7Cj4gPiAtLQo+ID4gMi44LjEKPiA+Cj4gPgo+ID4KPiA+IC0t
Cj4gPiBMYXRlc3QgUG9kY2FzdDoKPiA+IGh0dHBzOi8vd3d3LmxpbmtlZGluLmNvbS9mZWVkL3Vw
ZGF0ZS91cm46bGk6YWN0aXZpdHk6Njc5MTAxNDI4NDkzNjc4NTkyMC8KPiA+Cj4gPiBEYXZlIFTD
pGh0IENUTywgVGVrTGlicmUsIExMQwo+ID4gX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX18KPiA+IENha2UgbWFpbGluZyBsaXN0Cj4gPiBDYWtlQGxpc3RzLmJ1
ZmZlcmJsb2F0Lm5ldAo+ID4gaHR0cHM6Ly9saXN0cy5idWZmZXJibG9hdC5uZXQvbGlzdGluZm8v
Y2FrZQo+Cj4KPgo+IC0tCj4gUm9iZXJ0IENoYWPDs24KPiByb2JlcnQuY2hhY29uQGphY2tyYWJi
aXR3aXJlbGVzcy5jb20KCgoKLS0gCkxhdGVzdCBQb2RjYXN0OgpodHRwczovL3d3dy5saW5rZWRp
bi5jb20vZmVlZC91cGRhdGUvdXJuOmxpOmFjdGl2aXR5OjY3OTEwMTQyODQ5MzY3ODU5MjAvCgpE
YXZlIFTDpGh0IENUTywgVGVrTGlicmUsIExMQwpfX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fXwpDYWtlIG1haWxpbmcgbGlzdApDYWtlQGxpc3RzLmJ1ZmZlcmJs
b2F0Lm5ldApodHRwczovL2xpc3RzLmJ1ZmZlcmJsb2F0Lm5ldC9saXN0aW5mby9jYWtlCg==
